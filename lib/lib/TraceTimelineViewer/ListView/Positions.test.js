// Copyright (c) 2017 Uber Technologies, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import Positions from './Positions';
describe('Positions', function () {
  var bufferLen = 1;
  var getHeight = function getHeight(i) {
    return i * 2 + 2;
  };
  var ps;
  beforeEach(function () {
    ps = new Positions(bufferLen);
    ps.profileData(10);
  });
  describe('constructor()', function () {
    it('intializes member variables correctly', function () {
      ps = new Positions(1);
      expect(ps.ys).toEqual([]);
      expect(ps.heights).toEqual([]);
      expect(ps.bufferLen).toBe(1);
      expect(ps.dataLen).toBe(-1);
      expect(ps.lastI).toBe(-1);
    });
  });
  describe('profileData(...)', function () {
    it('manages increases in data length correctly', function () {
      expect(ps.dataLen).toBe(10);
      expect(ps.ys.length).toBe(10);
      expect(ps.heights.length).toBe(10);
      expect(ps.lastI).toBe(-1);
    });
    it('manages decreases in data length correctly', function () {
      ps.lastI = 9;
      ps.profileData(5);
      expect(ps.dataLen).toBe(5);
      expect(ps.ys.length).toBe(5);
      expect(ps.heights.length).toBe(5);
      expect(ps.lastI).toBe(4);
    });
    it('does nothing when data length is unchanged', function () {
      expect(ps.dataLen).toBe(10);
      expect(ps.ys.length).toBe(10);
      expect(ps.heights.length).toBe(10);
      expect(ps.lastI).toBe(-1);
      ps.profileData(10);
      expect(ps.dataLen).toBe(10);
      expect(ps.ys.length).toBe(10);
      expect(ps.heights.length).toBe(10);
      expect(ps.lastI).toBe(-1);
    });
  });
  describe('calcHeights()', function () {
    it('updates lastI correctly', function () {
      ps.calcHeights(1, getHeight);
      expect(ps.lastI).toBe(bufferLen + 1);
    });
    it('saves the heights and y-values up to `lastI <= max + bufferLen`', function () {
      var ys = [0, 2, 6, 12];
      ys.length = 10;
      var heights = [2, 4, 6];
      heights.length = 10;
      ps.calcHeights(1, getHeight);
      expect(ps.ys).toEqual(ys);
      expect(ps.heights).toEqual(heights);
    });
    it('does nothing when `max + buffer <= lastI`', function () {
      ps.calcHeights(2, getHeight);
      var ys = ps.ys.slice();
      var heights = ps.heights.slice();
      ps.calcHeights(1, getHeight);
      expect(ps.ys).toEqual(ys);
      expect(ps.heights).toEqual(heights);
    });
    describe('recalculates values up to `max + bufferLen` when `max + buffer <= lastI` and `forcedLastI = 0` is passed', function () {
      beforeEach(function () {
        // the initial state for the test
        ps.calcHeights(2, getHeight);
      });
      it('test-case has a valid initial state', function () {
        var initialYs = [0, 2, 6, 12, 20];
        initialYs.length = 10;
        var initialHeights = [2, 4, 6, 8];
        initialHeights.length = 10;
        expect(ps.ys).toEqual(initialYs);
        expect(ps.heights).toEqual(initialHeights);
        expect(ps.lastI).toBe(3);
      });
      it('recalcualtes the y-values correctly', function () {
        // recalc a sub-set of the calcualted values using a different getHeight
        ps.calcHeights(1, function () {
          return 2;
        }, 0);
        var ys = [0, 2, 4, 6, 20];
        ys.length = 10;
        expect(ps.ys).toEqual(ys);
      });
      it('recalcualtes the heights correctly', function () {
        // recalc a sub-set of the calcualted values using a different getHeight
        ps.calcHeights(1, function () {
          return 2;
        }, 0);
        var heights = [2, 2, 2, 8];
        heights.length = 10;
        expect(ps.heights).toEqual(heights);
      });
      it('saves lastI correctly', function () {
        // recalc a sub-set of the calcualted values
        ps.calcHeights(1, getHeight, 0);
        expect(ps.lastI).toBe(2);
      });
    });
    it('limits caclulations to the known data length', function () {
      ps.calcHeights(999, getHeight);
      expect(ps.lastI).toBe(ps.dataLen - 1);
    });
  });
  describe('calcYs()', function () {
    it('scans forward until `yValue` is met or exceeded', function () {
      ps.calcYs(11, getHeight);
      var ys = [0, 2, 6, 12, 20];
      ys.length = 10;
      var heights = [2, 4, 6, 8];
      heights.length = 10;
      expect(ps.ys).toEqual(ys);
      expect(ps.heights).toEqual(heights);
    });
    it('exits early if the known y-values exceed `yValue`', function () {
      ps.calcYs(11, getHeight);
      var spy = jest.spyOn(ps, 'calcHeights');
      ps.calcYs(10, getHeight);
      expect(spy).not.toHaveBeenCalled();
    });
    it('exits when exceeds the data length even if yValue is unmet', function () {
      ps.calcYs(999, getHeight);
      expect(ps.ys[ps.ys.length - 1]).toBeLessThan(999);
    });
  });
  describe('findFloorIndex()', function () {
    beforeEach(function () {
      ps.calcYs(11, getHeight);
      // Note: ps.ys = [0, 2, 6, 12, 20, undefined x 5];
    });
    it('scans y-values for index that equals or precedes `yValue`', function () {
      var i = ps.findFloorIndex(3, getHeight);
      expect(i).toBe(1);
      i = ps.findFloorIndex(21, getHeight);
      expect(i).toBe(4);
      ps.calcYs(999, getHeight);
      i = ps.findFloorIndex(11, getHeight);
      expect(i).toBe(2);
      i = ps.findFloorIndex(12, getHeight);
      expect(i).toBe(3);
      i = ps.findFloorIndex(20, getHeight);
      expect(i).toBe(4);
    });
    it('is robust against non-positive y-values', function () {
      var i = ps.findFloorIndex(0, getHeight);
      expect(i).toBe(0);
      i = ps.findFloorIndex(-10, getHeight);
      expect(i).toBe(0);
    });
    it('scans no further than dataLen even if `yValue` is unmet', function () {
      var i = ps.findFloorIndex(999, getHeight);
      expect(i).toBe(ps.lastI);
    });
  });
  describe('getEstimatedHeight()', function () {
    var simpleGetHeight = function simpleGetHeight() {
      return 2;
    };
    beforeEach(function () {
      ps.calcYs(5, simpleGetHeight);
      // Note: ps.ys = [0, 2, 4, 6, 8, undefined x 5];
    });
    it('returns the estimated max height, surpassing known values', function () {
      var estHeight = ps.getEstimatedHeight();
      expect(estHeight).toBeGreaterThan(ps.heights[ps.lastI]);
    });
    it('returns the known max height, if all heights have been calculated', function () {
      ps.calcYs(999, simpleGetHeight);
      var totalHeight = ps.getEstimatedHeight();
      expect(totalHeight).toBeGreaterThan(ps.heights[ps.heights.length - 1]);
    });
  });
  describe('confirmHeight()', function () {
    var simpleGetHeight = function simpleGetHeight() {
      return 2;
    };
    beforeEach(function () {
      ps.calcYs(5, simpleGetHeight);
      // Note: ps.ys = [0, 2, 4, 6, 8, undefined x 5];
    });
    it('calculates heights up to and including `_i` if necessary', function () {
      var startNumHeights = ps.heights.filter(Boolean).length;
      var calcHeightsSpy = jest.spyOn(ps, 'calcHeights');
      ps.confirmHeight(7, simpleGetHeight);
      var endNumHeights = ps.heights.filter(Boolean).length;
      expect(startNumHeights).toBeLessThan(endNumHeights);
      expect(calcHeightsSpy).toHaveBeenCalled();
    });
    it('invokes `heightGetter` at `_i` to compare result with known height', function () {
      var getHeightSpy = jest.fn(simpleGetHeight);
      ps.confirmHeight(ps.lastI - 1, getHeightSpy);
      expect(getHeightSpy).toHaveBeenCalled();
    });
    it('cascades difference in observed height vs known height to known y-values', function () {
      var getLargerHeight = function getLargerHeight() {
        return simpleGetHeight() + 2;
      };
      var knownYs = ps.ys.slice();
      var expectedYValues = knownYs.map(function (value) {
        return value ? value + 2 : value;
      });
      ps.confirmHeight(0, getLargerHeight);
      expect(ps.ys).toEqual(expectedYValues);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb3NpdGlvbnMiLCJkZXNjcmliZSIsImJ1ZmZlckxlbiIsImdldEhlaWdodCIsImkiLCJwcyIsImJlZm9yZUVhY2giLCJwcm9maWxlRGF0YSIsIml0IiwiZXhwZWN0IiwieXMiLCJ0b0VxdWFsIiwiaGVpZ2h0cyIsInRvQmUiLCJkYXRhTGVuIiwibGFzdEkiLCJsZW5ndGgiLCJjYWxjSGVpZ2h0cyIsInNsaWNlIiwiaW5pdGlhbFlzIiwiaW5pdGlhbEhlaWdodHMiLCJjYWxjWXMiLCJzcHkiLCJqZXN0Iiwic3B5T24iLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwidG9CZUxlc3NUaGFuIiwiZmluZEZsb29ySW5kZXgiLCJzaW1wbGVHZXRIZWlnaHQiLCJlc3RIZWlnaHQiLCJnZXRFc3RpbWF0ZWRIZWlnaHQiLCJ0b0JlR3JlYXRlclRoYW4iLCJ0b3RhbEhlaWdodCIsInN0YXJ0TnVtSGVpZ2h0cyIsImZpbHRlciIsIkJvb2xlYW4iLCJjYWxjSGVpZ2h0c1NweSIsImNvbmZpcm1IZWlnaHQiLCJlbmROdW1IZWlnaHRzIiwiZ2V0SGVpZ2h0U3B5IiwiZm4iLCJnZXRMYXJnZXJIZWlnaHQiLCJrbm93bllzIiwiZXhwZWN0ZWRZVmFsdWVzIiwibWFwIiwidmFsdWUiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL1RyYWNlVGltZWxpbmVWaWV3ZXIvTGlzdFZpZXcvUG9zaXRpb25zLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4vL1xuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbmltcG9ydCBQb3NpdGlvbnMgZnJvbSAnLi9Qb3NpdGlvbnMnO1xuXG5kZXNjcmliZSgnUG9zaXRpb25zJywgKCkgPT4ge1xuICBjb25zdCBidWZmZXJMZW4gPSAxO1xuICBjb25zdCBnZXRIZWlnaHQgPSAoaTogbnVtYmVyKSA9PiBpICogMiArIDI7XG5cbiAgbGV0IHBzOiBQb3NpdGlvbnM7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgcHMgPSBuZXcgUG9zaXRpb25zKGJ1ZmZlckxlbik7XG4gICAgcHMucHJvZmlsZURhdGEoMTApO1xuICB9KTtcblxuICBkZXNjcmliZSgnY29uc3RydWN0b3IoKScsICgpID0+IHtcbiAgICBpdCgnaW50aWFsaXplcyBtZW1iZXIgdmFyaWFibGVzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIHBzID0gbmV3IFBvc2l0aW9ucygxKTtcbiAgICAgIGV4cGVjdChwcy55cykudG9FcXVhbChbXSk7XG4gICAgICBleHBlY3QocHMuaGVpZ2h0cykudG9FcXVhbChbXSk7XG4gICAgICBleHBlY3QocHMuYnVmZmVyTGVuKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHBzLmRhdGFMZW4pLnRvQmUoLTEpO1xuICAgICAgZXhwZWN0KHBzLmxhc3RJKS50b0JlKC0xKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Byb2ZpbGVEYXRhKC4uLiknLCAoKSA9PiB7XG4gICAgaXQoJ21hbmFnZXMgaW5jcmVhc2VzIGluIGRhdGEgbGVuZ3RoIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGV4cGVjdChwcy5kYXRhTGVuKS50b0JlKDEwKTtcbiAgICAgIGV4cGVjdChwcy55cy5sZW5ndGgpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KHBzLmhlaWdodHMubGVuZ3RoKS50b0JlKDEwKTtcbiAgICAgIGV4cGVjdChwcy5sYXN0SSkudG9CZSgtMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnbWFuYWdlcyBkZWNyZWFzZXMgaW4gZGF0YSBsZW5ndGggY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgcHMubGFzdEkgPSA5O1xuICAgICAgcHMucHJvZmlsZURhdGEoNSk7XG4gICAgICBleHBlY3QocHMuZGF0YUxlbikudG9CZSg1KTtcbiAgICAgIGV4cGVjdChwcy55cy5sZW5ndGgpLnRvQmUoNSk7XG4gICAgICBleHBlY3QocHMuaGVpZ2h0cy5sZW5ndGgpLnRvQmUoNSk7XG4gICAgICBleHBlY3QocHMubGFzdEkpLnRvQmUoNCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZG9lcyBub3RoaW5nIHdoZW4gZGF0YSBsZW5ndGggaXMgdW5jaGFuZ2VkJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHBzLmRhdGFMZW4pLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KHBzLnlzLmxlbmd0aCkudG9CZSgxMCk7XG4gICAgICBleHBlY3QocHMuaGVpZ2h0cy5sZW5ndGgpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KHBzLmxhc3RJKS50b0JlKC0xKTtcbiAgICAgIHBzLnByb2ZpbGVEYXRhKDEwKTtcbiAgICAgIGV4cGVjdChwcy5kYXRhTGVuKS50b0JlKDEwKTtcbiAgICAgIGV4cGVjdChwcy55cy5sZW5ndGgpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KHBzLmhlaWdodHMubGVuZ3RoKS50b0JlKDEwKTtcbiAgICAgIGV4cGVjdChwcy5sYXN0SSkudG9CZSgtMSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjYWxjSGVpZ2h0cygpJywgKCkgPT4ge1xuICAgIGl0KCd1cGRhdGVzIGxhc3RJIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIHBzLmNhbGNIZWlnaHRzKDEsIGdldEhlaWdodCk7XG4gICAgICBleHBlY3QocHMubGFzdEkpLnRvQmUoYnVmZmVyTGVuICsgMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2F2ZXMgdGhlIGhlaWdodHMgYW5kIHktdmFsdWVzIHVwIHRvIGBsYXN0SSA8PSBtYXggKyBidWZmZXJMZW5gJywgKCkgPT4ge1xuICAgICAgY29uc3QgeXMgPSBbMCwgMiwgNiwgMTJdO1xuICAgICAgeXMubGVuZ3RoID0gMTA7XG4gICAgICBjb25zdCBoZWlnaHRzID0gWzIsIDQsIDZdO1xuICAgICAgaGVpZ2h0cy5sZW5ndGggPSAxMDtcbiAgICAgIHBzLmNhbGNIZWlnaHRzKDEsIGdldEhlaWdodCk7XG4gICAgICBleHBlY3QocHMueXMpLnRvRXF1YWwoeXMpO1xuICAgICAgZXhwZWN0KHBzLmhlaWdodHMpLnRvRXF1YWwoaGVpZ2h0cyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZG9lcyBub3RoaW5nIHdoZW4gYG1heCArIGJ1ZmZlciA8PSBsYXN0SWAnLCAoKSA9PiB7XG4gICAgICBwcy5jYWxjSGVpZ2h0cygyLCBnZXRIZWlnaHQpO1xuICAgICAgY29uc3QgeXMgPSBwcy55cy5zbGljZSgpO1xuICAgICAgY29uc3QgaGVpZ2h0cyA9IHBzLmhlaWdodHMuc2xpY2UoKTtcbiAgICAgIHBzLmNhbGNIZWlnaHRzKDEsIGdldEhlaWdodCk7XG4gICAgICBleHBlY3QocHMueXMpLnRvRXF1YWwoeXMpO1xuICAgICAgZXhwZWN0KHBzLmhlaWdodHMpLnRvRXF1YWwoaGVpZ2h0cyk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncmVjYWxjdWxhdGVzIHZhbHVlcyB1cCB0byBgbWF4ICsgYnVmZmVyTGVuYCB3aGVuIGBtYXggKyBidWZmZXIgPD0gbGFzdElgIGFuZCBgZm9yY2VkTGFzdEkgPSAwYCBpcyBwYXNzZWQnLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgLy8gdGhlIGluaXRpYWwgc3RhdGUgZm9yIHRoZSB0ZXN0XG4gICAgICAgIHBzLmNhbGNIZWlnaHRzKDIsIGdldEhlaWdodCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Rlc3QtY2FzZSBoYXMgYSB2YWxpZCBpbml0aWFsIHN0YXRlJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBpbml0aWFsWXMgPSBbMCwgMiwgNiwgMTIsIDIwXTtcbiAgICAgICAgaW5pdGlhbFlzLmxlbmd0aCA9IDEwO1xuICAgICAgICBjb25zdCBpbml0aWFsSGVpZ2h0cyA9IFsyLCA0LCA2LCA4XTtcbiAgICAgICAgaW5pdGlhbEhlaWdodHMubGVuZ3RoID0gMTA7XG4gICAgICAgIGV4cGVjdChwcy55cykudG9FcXVhbChpbml0aWFsWXMpO1xuICAgICAgICBleHBlY3QocHMuaGVpZ2h0cykudG9FcXVhbChpbml0aWFsSGVpZ2h0cyk7XG4gICAgICAgIGV4cGVjdChwcy5sYXN0SSkudG9CZSgzKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmVjYWxjdWFsdGVzIHRoZSB5LXZhbHVlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgIC8vIHJlY2FsYyBhIHN1Yi1zZXQgb2YgdGhlIGNhbGN1YWx0ZWQgdmFsdWVzIHVzaW5nIGEgZGlmZmVyZW50IGdldEhlaWdodFxuICAgICAgICBwcy5jYWxjSGVpZ2h0cygxLCAoKSA9PiAyLCAwKTtcbiAgICAgICAgY29uc3QgeXMgPSBbMCwgMiwgNCwgNiwgMjBdO1xuICAgICAgICB5cy5sZW5ndGggPSAxMDtcbiAgICAgICAgZXhwZWN0KHBzLnlzKS50b0VxdWFsKHlzKTtcbiAgICAgIH0pO1xuICAgICAgaXQoJ3JlY2FsY3VhbHRlcyB0aGUgaGVpZ2h0cyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgIC8vIHJlY2FsYyBhIHN1Yi1zZXQgb2YgdGhlIGNhbGN1YWx0ZWQgdmFsdWVzIHVzaW5nIGEgZGlmZmVyZW50IGdldEhlaWdodFxuICAgICAgICBwcy5jYWxjSGVpZ2h0cygxLCAoKSA9PiAyLCAwKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0cyA9IFsyLCAyLCAyLCA4XTtcbiAgICAgICAgaGVpZ2h0cy5sZW5ndGggPSAxMDtcbiAgICAgICAgZXhwZWN0KHBzLmhlaWdodHMpLnRvRXF1YWwoaGVpZ2h0cyk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzYXZlcyBsYXN0SSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgIC8vIHJlY2FsYyBhIHN1Yi1zZXQgb2YgdGhlIGNhbGN1YWx0ZWQgdmFsdWVzXG4gICAgICAgIHBzLmNhbGNIZWlnaHRzKDEsIGdldEhlaWdodCwgMCk7XG4gICAgICAgIGV4cGVjdChwcy5sYXN0SSkudG9CZSgyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2xpbWl0cyBjYWNsdWxhdGlvbnMgdG8gdGhlIGtub3duIGRhdGEgbGVuZ3RoJywgKCkgPT4ge1xuICAgICAgcHMuY2FsY0hlaWdodHMoOTk5LCBnZXRIZWlnaHQpO1xuICAgICAgZXhwZWN0KHBzLmxhc3RJKS50b0JlKHBzLmRhdGFMZW4gLSAxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NhbGNZcygpJywgKCkgPT4ge1xuICAgIGl0KCdzY2FucyBmb3J3YXJkIHVudGlsIGB5VmFsdWVgIGlzIG1ldCBvciBleGNlZWRlZCcsICgpID0+IHtcbiAgICAgIHBzLmNhbGNZcygxMSwgZ2V0SGVpZ2h0KTtcbiAgICAgIGNvbnN0IHlzID0gWzAsIDIsIDYsIDEyLCAyMF07XG4gICAgICB5cy5sZW5ndGggPSAxMDtcbiAgICAgIGNvbnN0IGhlaWdodHMgPSBbMiwgNCwgNiwgOF07XG4gICAgICBoZWlnaHRzLmxlbmd0aCA9IDEwO1xuICAgICAgZXhwZWN0KHBzLnlzKS50b0VxdWFsKHlzKTtcbiAgICAgIGV4cGVjdChwcy5oZWlnaHRzKS50b0VxdWFsKGhlaWdodHMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2V4aXRzIGVhcmx5IGlmIHRoZSBrbm93biB5LXZhbHVlcyBleGNlZWQgYHlWYWx1ZWAnLCAoKSA9PiB7XG4gICAgICBwcy5jYWxjWXMoMTEsIGdldEhlaWdodCk7XG4gICAgICBjb25zdCBzcHkgPSBqZXN0LnNweU9uKHBzLCAnY2FsY0hlaWdodHMnKTtcbiAgICAgIHBzLmNhbGNZcygxMCwgZ2V0SGVpZ2h0KTtcbiAgICAgIGV4cGVjdChzcHkpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZXhpdHMgd2hlbiBleGNlZWRzIHRoZSBkYXRhIGxlbmd0aCBldmVuIGlmIHlWYWx1ZSBpcyB1bm1ldCcsICgpID0+IHtcbiAgICAgIHBzLmNhbGNZcyg5OTksIGdldEhlaWdodCk7XG4gICAgICBleHBlY3QocHMueXNbcHMueXMubGVuZ3RoIC0gMV0pLnRvQmVMZXNzVGhhbig5OTkpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZmluZEZsb29ySW5kZXgoKScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHBzLmNhbGNZcygxMSwgZ2V0SGVpZ2h0KTtcbiAgICAgIC8vIE5vdGU6IHBzLnlzID0gWzAsIDIsIDYsIDEyLCAyMCwgdW5kZWZpbmVkIHggNV07XG4gICAgfSk7XG5cbiAgICBpdCgnc2NhbnMgeS12YWx1ZXMgZm9yIGluZGV4IHRoYXQgZXF1YWxzIG9yIHByZWNlZGVzIGB5VmFsdWVgJywgKCkgPT4ge1xuICAgICAgbGV0IGkgPSBwcy5maW5kRmxvb3JJbmRleCgzLCBnZXRIZWlnaHQpO1xuICAgICAgZXhwZWN0KGkpLnRvQmUoMSk7XG4gICAgICBpID0gcHMuZmluZEZsb29ySW5kZXgoMjEsIGdldEhlaWdodCk7XG4gICAgICBleHBlY3QoaSkudG9CZSg0KTtcbiAgICAgIHBzLmNhbGNZcyg5OTksIGdldEhlaWdodCk7XG4gICAgICBpID0gcHMuZmluZEZsb29ySW5kZXgoMTEsIGdldEhlaWdodCk7XG4gICAgICBleHBlY3QoaSkudG9CZSgyKTtcbiAgICAgIGkgPSBwcy5maW5kRmxvb3JJbmRleCgxMiwgZ2V0SGVpZ2h0KTtcbiAgICAgIGV4cGVjdChpKS50b0JlKDMpO1xuICAgICAgaSA9IHBzLmZpbmRGbG9vckluZGV4KDIwLCBnZXRIZWlnaHQpO1xuICAgICAgZXhwZWN0KGkpLnRvQmUoNCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaXMgcm9idXN0IGFnYWluc3Qgbm9uLXBvc2l0aXZlIHktdmFsdWVzJywgKCkgPT4ge1xuICAgICAgbGV0IGkgPSBwcy5maW5kRmxvb3JJbmRleCgwLCBnZXRIZWlnaHQpO1xuICAgICAgZXhwZWN0KGkpLnRvQmUoMCk7XG4gICAgICBpID0gcHMuZmluZEZsb29ySW5kZXgoLTEwLCBnZXRIZWlnaHQpO1xuICAgICAgZXhwZWN0KGkpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2NhbnMgbm8gZnVydGhlciB0aGFuIGRhdGFMZW4gZXZlbiBpZiBgeVZhbHVlYCBpcyB1bm1ldCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGkgPSBwcy5maW5kRmxvb3JJbmRleCg5OTksIGdldEhlaWdodCk7XG4gICAgICBleHBlY3QoaSkudG9CZShwcy5sYXN0SSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRFc3RpbWF0ZWRIZWlnaHQoKScsICgpID0+IHtcbiAgICBjb25zdCBzaW1wbGVHZXRIZWlnaHQgPSAoKSA9PiAyO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBwcy5jYWxjWXMoNSwgc2ltcGxlR2V0SGVpZ2h0KTtcbiAgICAgIC8vIE5vdGU6IHBzLnlzID0gWzAsIDIsIDQsIDYsIDgsIHVuZGVmaW5lZCB4IDVdO1xuICAgIH0pO1xuXG4gICAgaXQoJ3JldHVybnMgdGhlIGVzdGltYXRlZCBtYXggaGVpZ2h0LCBzdXJwYXNzaW5nIGtub3duIHZhbHVlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGVzdEhlaWdodCA9IHBzLmdldEVzdGltYXRlZEhlaWdodCgpO1xuICAgICAgZXhwZWN0KGVzdEhlaWdodCkudG9CZUdyZWF0ZXJUaGFuKHBzLmhlaWdodHNbcHMubGFzdEldKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZXR1cm5zIHRoZSBrbm93biBtYXggaGVpZ2h0LCBpZiBhbGwgaGVpZ2h0cyBoYXZlIGJlZW4gY2FsY3VsYXRlZCcsICgpID0+IHtcbiAgICAgIHBzLmNhbGNZcyg5OTksIHNpbXBsZUdldEhlaWdodCk7XG4gICAgICBjb25zdCB0b3RhbEhlaWdodCA9IHBzLmdldEVzdGltYXRlZEhlaWdodCgpO1xuICAgICAgZXhwZWN0KHRvdGFsSGVpZ2h0KS50b0JlR3JlYXRlclRoYW4ocHMuaGVpZ2h0c1twcy5oZWlnaHRzLmxlbmd0aCAtIDFdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NvbmZpcm1IZWlnaHQoKScsICgpID0+IHtcbiAgICBjb25zdCBzaW1wbGVHZXRIZWlnaHQgPSAoKSA9PiAyO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBwcy5jYWxjWXMoNSwgc2ltcGxlR2V0SGVpZ2h0KTtcbiAgICAgIC8vIE5vdGU6IHBzLnlzID0gWzAsIDIsIDQsIDYsIDgsIHVuZGVmaW5lZCB4IDVdO1xuICAgIH0pO1xuXG4gICAgaXQoJ2NhbGN1bGF0ZXMgaGVpZ2h0cyB1cCB0byBhbmQgaW5jbHVkaW5nIGBfaWAgaWYgbmVjZXNzYXJ5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnROdW1IZWlnaHRzID0gcHMuaGVpZ2h0cy5maWx0ZXIoQm9vbGVhbikubGVuZ3RoO1xuICAgICAgY29uc3QgY2FsY0hlaWdodHNTcHkgPSBqZXN0LnNweU9uKHBzLCAnY2FsY0hlaWdodHMnKTtcbiAgICAgIHBzLmNvbmZpcm1IZWlnaHQoNywgc2ltcGxlR2V0SGVpZ2h0KTtcbiAgICAgIGNvbnN0IGVuZE51bUhlaWdodHMgPSBwcy5oZWlnaHRzLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7XG4gICAgICBleHBlY3Qoc3RhcnROdW1IZWlnaHRzKS50b0JlTGVzc1RoYW4oZW5kTnVtSGVpZ2h0cyk7XG4gICAgICBleHBlY3QoY2FsY0hlaWdodHNTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdpbnZva2VzIGBoZWlnaHRHZXR0ZXJgIGF0IGBfaWAgdG8gY29tcGFyZSByZXN1bHQgd2l0aCBrbm93biBoZWlnaHQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBnZXRIZWlnaHRTcHkgPSBqZXN0LmZuKHNpbXBsZUdldEhlaWdodCk7XG4gICAgICBwcy5jb25maXJtSGVpZ2h0KHBzLmxhc3RJIC0gMSwgZ2V0SGVpZ2h0U3B5KTtcbiAgICAgIGV4cGVjdChnZXRIZWlnaHRTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdjYXNjYWRlcyBkaWZmZXJlbmNlIGluIG9ic2VydmVkIGhlaWdodCB2cyBrbm93biBoZWlnaHQgdG8ga25vd24geS12YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBnZXRMYXJnZXJIZWlnaHQgPSAoKSA9PiBzaW1wbGVHZXRIZWlnaHQoKSArIDI7XG4gICAgICBjb25zdCBrbm93bllzID0gcHMueXMuc2xpY2UoKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkWVZhbHVlcyA9IGtub3duWXMubWFwKCh2YWx1ZSkgPT4gKHZhbHVlID8gdmFsdWUgKyAyIDogdmFsdWUpKTtcbiAgICAgIHBzLmNvbmZpcm1IZWlnaHQoMCwgZ2V0TGFyZ2VySGVpZ2h0KTtcbiAgICAgIGV4cGVjdChwcy55cykudG9FcXVhbChleHBlY3RlZFlWYWx1ZXMpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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