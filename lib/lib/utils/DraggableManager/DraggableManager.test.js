import _extends from "@babel/runtime/helpers/extends";
// Copyright (c) 2017 Uber Technologies, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import DraggableManager from './DraggableManager';
import EUpdateTypes from './EUpdateTypes';
describe('DraggableManager', function () {
  var baseClientX = 100;
  // left button mouse events have `.button === 0`
  var baseMouseEvt = {
    button: 0,
    clientX: baseClientX
  };
  var tag = 'some-tag';
  var bounds;
  var getBounds;
  var ctorOpts;
  var instance;
  function startDragging(dragManager) {
    dragManager.handleMouseDown(_extends({}, baseMouseEvt, {
      type: 'mousedown'
    }));
    expect(dragManager.isDragging()).toBe(true);
  }
  beforeEach(function () {
    bounds = {
      clientXLeft: 50,
      maxValue: 0.9,
      minValue: 0.1,
      width: 100
    };
    getBounds = jest.fn(function () {
      return bounds;
    });
    ctorOpts = {
      getBounds: getBounds,
      tag: tag,
      onMouseEnter: jest.fn(),
      onMouseLeave: jest.fn(),
      onMouseMove: jest.fn(),
      onDragStart: jest.fn(),
      onDragMove: jest.fn(),
      onDragEnd: jest.fn(),
      resetBoundsOnResize: false
    };
    instance = new DraggableManager(ctorOpts);
  });
  describe('_getPosition()', function () {
    it('invokes the getBounds ctor argument', function () {
      instance._getPosition(0);
      expect(jest.mocked(ctorOpts.getBounds).mock.calls).toEqual([[tag]]);
    });
    it('converts clientX to x and [0, 1] value', function () {
      var left = 100;
      var pos = instance._getPosition(left);
      expect(pos).toEqual({
        x: left - bounds.clientXLeft,
        value: (left - bounds.clientXLeft) / bounds.width
      });
    });
    it('clamps x and [0, 1] value based on getBounds().minValue', function () {
      var left = 0;
      var pos = instance._getPosition(left);
      expect(pos).toEqual({
        x: bounds.minValue * bounds.width,
        value: bounds.minValue
      });
    });
    it('clamps x and [0, 1] value based on getBounds().maxValue', function () {
      var left = 10000;
      var pos = instance._getPosition(left);
      expect(pos).toEqual({
        x: bounds.maxValue * bounds.width,
        value: bounds.maxValue
      });
    });
  });
  describe('window resize event listener', function () {
    it('is added in the ctor iff `resetBoundsOnResize` param is truthy', function () {
      var oldFn = window.addEventListener;
      window.addEventListener = jest.fn();
      ctorOpts.resetBoundsOnResize = false;
      instance = new DraggableManager(ctorOpts);
      expect(jest.mocked(window.addEventListener).mock.calls).toEqual([]);
      ctorOpts.resetBoundsOnResize = true;
      instance = new DraggableManager(ctorOpts);
      expect(jest.mocked(window.addEventListener).mock.calls).toEqual([['resize', expect.any(Function)]]);
      window.addEventListener = oldFn;
    });
    it('is removed in `.dispose()` iff `resetBoundsOnResize` param is truthy', function () {
      var oldFn = window.removeEventListener;
      window.removeEventListener = jest.fn();
      ctorOpts.resetBoundsOnResize = false;
      instance = new DraggableManager(ctorOpts);
      instance.dispose();
      expect(jest.mocked(window.removeEventListener).mock.calls).toEqual([]);
      ctorOpts.resetBoundsOnResize = true;
      instance = new DraggableManager(ctorOpts);
      instance.dispose();
      expect(jest.mocked(window.removeEventListener).mock.calls).toEqual([['resize', expect.any(Function)]]);
      window.removeEventListener = oldFn;
    });
  });
  describe('minor mouse events', function () {
    it('throws an error for invalid event types', function () {
      var type = 'invalid-event-type';
      var throwers = [function () {
        return instance.handleMouseEnter(_extends({}, baseMouseEvt, {
          type: type
        }));
      }, function () {
        return instance.handleMouseMove(_extends({}, baseMouseEvt, {
          type: type
        }));
      }, function () {
        return instance.handleMouseLeave(_extends({}, baseMouseEvt, {
          type: type
        }));
      }];
      throwers.forEach(function (thrower) {
        return expect(thrower).toThrow();
      });
    });
    it('does nothing if already dragging', function () {
      startDragging(instance);
      expect(getBounds.mock.calls.length).toBe(1);
      instance.handleMouseEnter(_extends({}, baseMouseEvt, {
        type: 'mouseenter'
      }));
      instance.handleMouseMove(_extends({}, baseMouseEvt, {
        type: 'mousemove'
      }));
      instance.handleMouseLeave(_extends({}, baseMouseEvt, {
        type: 'mouseleave'
      }));
      expect(ctorOpts.onMouseEnter).not.toHaveBeenCalled();
      expect(ctorOpts.onMouseMove).not.toHaveBeenCalled();
      expect(ctorOpts.onMouseLeave).not.toHaveBeenCalled();
      var evt = _extends({}, baseMouseEvt, {
        type: 'invalid-type'
      });
      expect(function () {
        return instance.handleMouseEnter(evt);
      }).not.toThrow();
      expect(getBounds.mock.calls.length).toBe(1);
    });
    it('passes data based on the mouse event type to callbacks', function () {
      var x = baseClientX - bounds.clientXLeft;
      var value = (baseClientX - bounds.clientXLeft) / bounds.width;
      var cases = [{
        type: 'mouseenter',
        handler: instance.handleMouseEnter,
        callback: ctorOpts.onMouseEnter,
        updateType: EUpdateTypes.MouseEnter
      }, {
        type: 'mousemove',
        handler: instance.handleMouseMove,
        callback: ctorOpts.onMouseMove,
        updateType: EUpdateTypes.MouseMove
      }, {
        type: 'mouseleave',
        handler: instance.handleMouseLeave,
        callback: ctorOpts.onMouseLeave,
        updateType: EUpdateTypes.MouseLeave
      }];
      cases.forEach(function (testCase) {
        var _jest$mocked;
        var type = testCase.type,
          handler = testCase.handler,
          callback = testCase.callback,
          updateType = testCase.updateType;
        var event = _extends({}, baseMouseEvt, {
          type: type
        });
        handler(event);
        expect((_jest$mocked = jest.mocked(callback)) == null ? void 0 : _jest$mocked.mock.calls).toEqual([[{
          event: event,
          tag: tag,
          value: value,
          x: x,
          manager: instance,
          type: updateType
        }]]);
      });
    });
  });
  describe('drag events', function () {
    var realWindowAddEvent;
    var realWindowRmEvent;
    beforeEach(function () {
      realWindowAddEvent = window.addEventListener;
      realWindowRmEvent = window.removeEventListener;
      window.addEventListener = jest.fn();
      window.removeEventListener = jest.fn();
    });
    afterEach(function () {
      window.addEventListener = realWindowAddEvent;
      window.removeEventListener = realWindowRmEvent;
    });
    it('throws an error for invalid event types', function () {
      expect(function () {
        return instance.handleMouseDown(_extends({}, baseMouseEvt, {
          type: 'invalid-event-type'
        }));
      }).toThrow();
    });
    describe('mousedown', function () {
      it('is ignored if already dragging', function () {
        var _jest$mocked2;
        startDragging(instance);
        jest.mocked(window.addEventListener).mockReset();
        (_jest$mocked2 = jest.mocked(ctorOpts.onDragStart)) == null || _jest$mocked2.mockReset();
        expect(getBounds.mock.calls.length).toBe(1);
        instance.handleMouseDown(_extends({}, baseMouseEvt, {
          type: 'mousedown'
        }));
        expect(getBounds.mock.calls.length).toBe(1);
        expect(window.addEventListener).not.toHaveBeenCalled();
        expect(ctorOpts.onDragStart).not.toHaveBeenCalled();
      });
      it('sets `isDragging()` to true', function () {
        instance.handleMouseDown(_extends({}, baseMouseEvt, {
          type: 'mousedown'
        }));
        expect(instance.isDragging()).toBe(true);
      });
      it('adds the window mouse listener events', function () {
        instance.handleMouseDown(_extends({}, baseMouseEvt, {
          type: 'mousedown'
        }));
        expect(jest.mocked(window.addEventListener).mock.calls).toEqual([['mousemove', expect.any(Function)], ['mouseup', expect.any(Function)]]);
      });
    });
    describe('mousemove', function () {
      it('is ignored if not already dragging', function () {
        instance._handleDragEvent(_extends({}, baseMouseEvt, {
          type: 'mousemove'
        }));
        expect(ctorOpts.onDragMove).not.toHaveBeenCalled();
        startDragging(instance);
        instance._handleDragEvent(_extends({}, baseMouseEvt, {
          type: 'mousemove'
        }));
        expect(ctorOpts.onDragMove).toHaveBeenCalled();
      });
    });
    describe('mouseup', function () {
      it('is ignored if not already dragging', function () {
        instance._handleDragEvent(_extends({}, baseMouseEvt, {
          type: 'mouseup'
        }));
        expect(ctorOpts.onDragEnd).not.toHaveBeenCalled();
        startDragging(instance);
        instance._handleDragEvent(_extends({}, baseMouseEvt, {
          type: 'mouseup'
        }));
        expect(ctorOpts.onDragEnd).toHaveBeenCalled();
      });
      it('sets `isDragging()` to false', function () {
        startDragging(instance);
        expect(instance.isDragging()).toBe(true);
        instance._handleDragEvent(_extends({}, baseMouseEvt, {
          type: 'mouseup'
        }));
        expect(instance.isDragging()).toBe(false);
      });
      it('removes the window mouse listener events', function () {
        startDragging(instance);
        expect(window.removeEventListener).not.toHaveBeenCalled();
        instance._handleDragEvent(_extends({}, baseMouseEvt, {
          type: 'mouseup'
        }));
        expect(jest.mocked(window.removeEventListener).mock.calls).toEqual([['mousemove', expect.any(Function)], ['mouseup', expect.any(Function)]]);
      });
    });
    it('passes drag event data to the callbacks', function () {
      var x = baseClientX - bounds.clientXLeft;
      var value = (baseClientX - bounds.clientXLeft) / bounds.width;
      var cases = [{
        type: 'mousedown',
        handler: instance.handleMouseDown,
        callback: ctorOpts.onDragStart,
        updateType: EUpdateTypes.DragStart
      }, {
        type: 'mousemove',
        handler: instance._handleDragEvent,
        callback: ctorOpts.onDragMove,
        updateType: EUpdateTypes.DragMove
      }, {
        type: 'mouseup',
        handler: instance._handleDragEvent,
        callback: ctorOpts.onDragEnd,
        updateType: EUpdateTypes.DragEnd
      }];
      cases.forEach(function (testCase) {
        var _jest$mocked3;
        var type = testCase.type,
          handler = testCase.handler,
          callback = testCase.callback,
          updateType = testCase.updateType;
        var event = _extends({}, baseMouseEvt, {
          type: type
        });
        handler(event);
        expect((_jest$mocked3 = jest.mocked(callback)) == null ? void 0 : _jest$mocked3.mock.calls).toEqual([[{
          event: event,
          tag: tag,
          value: value,
          x: x,
          manager: instance,
          type: updateType
        }]]);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEcmFnZ2FibGVNYW5hZ2VyIiwiRVVwZGF0ZVR5cGVzIiwiZGVzY3JpYmUiLCJiYXNlQ2xpZW50WCIsImJhc2VNb3VzZUV2dCIsImJ1dHRvbiIsImNsaWVudFgiLCJ0YWciLCJib3VuZHMiLCJnZXRCb3VuZHMiLCJjdG9yT3B0cyIsImluc3RhbmNlIiwic3RhcnREcmFnZ2luZyIsImRyYWdNYW5hZ2VyIiwiaGFuZGxlTW91c2VEb3duIiwiX2V4dGVuZHMiLCJ0eXBlIiwiZXhwZWN0IiwiaXNEcmFnZ2luZyIsInRvQmUiLCJiZWZvcmVFYWNoIiwiY2xpZW50WExlZnQiLCJtYXhWYWx1ZSIsIm1pblZhbHVlIiwid2lkdGgiLCJqZXN0IiwiZm4iLCJvbk1vdXNlRW50ZXIiLCJvbk1vdXNlTGVhdmUiLCJvbk1vdXNlTW92ZSIsIm9uRHJhZ1N0YXJ0Iiwib25EcmFnTW92ZSIsIm9uRHJhZ0VuZCIsInJlc2V0Qm91bmRzT25SZXNpemUiLCJpdCIsIl9nZXRQb3NpdGlvbiIsIm1vY2tlZCIsIm1vY2siLCJjYWxscyIsInRvRXF1YWwiLCJsZWZ0IiwicG9zIiwieCIsInZhbHVlIiwib2xkRm4iLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiYW55IiwiRnVuY3Rpb24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcG9zZSIsInRocm93ZXJzIiwiaGFuZGxlTW91c2VFbnRlciIsImhhbmRsZU1vdXNlTW92ZSIsImhhbmRsZU1vdXNlTGVhdmUiLCJmb3JFYWNoIiwidGhyb3dlciIsInRvVGhyb3ciLCJsZW5ndGgiLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiZXZ0IiwiY2FzZXMiLCJoYW5kbGVyIiwiY2FsbGJhY2siLCJ1cGRhdGVUeXBlIiwiTW91c2VFbnRlciIsIk1vdXNlTW92ZSIsIk1vdXNlTGVhdmUiLCJ0ZXN0Q2FzZSIsIl9qZXN0JG1vY2tlZCIsImV2ZW50IiwibWFuYWdlciIsInJlYWxXaW5kb3dBZGRFdmVudCIsInJlYWxXaW5kb3dSbUV2ZW50IiwiYWZ0ZXJFYWNoIiwiX2plc3QkbW9ja2VkMiIsIm1vY2tSZXNldCIsIl9oYW5kbGVEcmFnRXZlbnQiLCJEcmFnU3RhcnQiLCJEcmFnTW92ZSIsIkRyYWdFbmQiLCJfamVzdCRtb2NrZWQzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi91dGlscy9EcmFnZ2FibGVNYW5hZ2VyL0RyYWdnYWJsZU1hbmFnZXIudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTcgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IERyYWdnYWJsZU1hbmFnZXIsIHsgRHJhZ2dhYmxlTWFuYWdlck9wdGlvbnMgfSBmcm9tICcuL0RyYWdnYWJsZU1hbmFnZXInO1xuaW1wb3J0IEVVcGRhdGVUeXBlcyBmcm9tICcuL0VVcGRhdGVUeXBlcyc7XG5cbmRlc2NyaWJlKCdEcmFnZ2FibGVNYW5hZ2VyJywgKCkgPT4ge1xuICBjb25zdCBiYXNlQ2xpZW50WCA9IDEwMDtcbiAgLy8gbGVmdCBidXR0b24gbW91c2UgZXZlbnRzIGhhdmUgYC5idXR0b24gPT09IDBgXG4gIGNvbnN0IGJhc2VNb3VzZUV2dCA9IHsgYnV0dG9uOiAwLCBjbGllbnRYOiBiYXNlQ2xpZW50WCB9O1xuICBjb25zdCB0YWcgPSAnc29tZS10YWcnO1xuICBsZXQgYm91bmRzOiB7IGNsaWVudFhMZWZ0OiBudW1iZXI7IHdpZHRoOiBudW1iZXI7IG1pblZhbHVlOiBudW1iZXI7IG1heFZhbHVlOiBudW1iZXIgfTtcbiAgbGV0IGdldEJvdW5kczogamVzdC5Nb2NrPHR5cGVvZiBib3VuZHMsIFtdPjtcbiAgbGV0IGN0b3JPcHRzOiBEcmFnZ2FibGVNYW5hZ2VyT3B0aW9ucztcbiAgbGV0IGluc3RhbmNlOiBEcmFnZ2FibGVNYW5hZ2VyO1xuXG4gIGZ1bmN0aW9uIHN0YXJ0RHJhZ2dpbmcoZHJhZ01hbmFnZXI6IERyYWdnYWJsZU1hbmFnZXIpIHtcbiAgICBkcmFnTWFuYWdlci5oYW5kbGVNb3VzZURvd24oeyAuLi5iYXNlTW91c2VFdnQsIHR5cGU6ICdtb3VzZWRvd24nIH0gYXMgUmVhY3QuTW91c2VFdmVudCk7XG4gICAgZXhwZWN0KGRyYWdNYW5hZ2VyLmlzRHJhZ2dpbmcoKSkudG9CZSh0cnVlKTtcbiAgfVxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGJvdW5kcyA9IHtcbiAgICAgIGNsaWVudFhMZWZ0OiA1MCxcbiAgICAgIG1heFZhbHVlOiAwLjksXG4gICAgICBtaW5WYWx1ZTogMC4xLFxuICAgICAgd2lkdGg6IDEwMCxcbiAgICB9O1xuICAgIGdldEJvdW5kcyA9IGplc3QuZm4oKCkgPT4gYm91bmRzKTtcbiAgICBjdG9yT3B0cyA9IHtcbiAgICAgIGdldEJvdW5kcyxcbiAgICAgIHRhZyxcbiAgICAgIG9uTW91c2VFbnRlcjogamVzdC5mbigpLFxuICAgICAgb25Nb3VzZUxlYXZlOiBqZXN0LmZuKCksXG4gICAgICBvbk1vdXNlTW92ZTogamVzdC5mbigpLFxuICAgICAgb25EcmFnU3RhcnQ6IGplc3QuZm4oKSxcbiAgICAgIG9uRHJhZ01vdmU6IGplc3QuZm4oKSxcbiAgICAgIG9uRHJhZ0VuZDogamVzdC5mbigpLFxuICAgICAgcmVzZXRCb3VuZHNPblJlc2l6ZTogZmFsc2UsXG4gICAgfTtcbiAgICBpbnN0YW5jZSA9IG5ldyBEcmFnZ2FibGVNYW5hZ2VyKGN0b3JPcHRzKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ19nZXRQb3NpdGlvbigpJywgKCkgPT4ge1xuICAgIGl0KCdpbnZva2VzIHRoZSBnZXRCb3VuZHMgY3RvciBhcmd1bWVudCcsICgpID0+IHtcbiAgICAgIGluc3RhbmNlLl9nZXRQb3NpdGlvbigwKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZChjdG9yT3B0cy5nZXRCb3VuZHMpLm1vY2suY2FsbHMpLnRvRXF1YWwoW1t0YWddXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnY29udmVydHMgY2xpZW50WCB0byB4IGFuZCBbMCwgMV0gdmFsdWUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBsZWZ0ID0gMTAwO1xuICAgICAgY29uc3QgcG9zID0gaW5zdGFuY2UuX2dldFBvc2l0aW9uKGxlZnQpO1xuICAgICAgZXhwZWN0KHBvcykudG9FcXVhbCh7XG4gICAgICAgIHg6IGxlZnQgLSBib3VuZHMuY2xpZW50WExlZnQsXG4gICAgICAgIHZhbHVlOiAobGVmdCAtIGJvdW5kcy5jbGllbnRYTGVmdCkgLyBib3VuZHMud2lkdGgsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdjbGFtcHMgeCBhbmQgWzAsIDFdIHZhbHVlIGJhc2VkIG9uIGdldEJvdW5kcygpLm1pblZhbHVlJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGVmdCA9IDA7XG4gICAgICBjb25zdCBwb3MgPSBpbnN0YW5jZS5fZ2V0UG9zaXRpb24obGVmdCk7XG4gICAgICBleHBlY3QocG9zKS50b0VxdWFsKHtcbiAgICAgICAgeDogYm91bmRzLm1pblZhbHVlICogYm91bmRzLndpZHRoLFxuICAgICAgICB2YWx1ZTogYm91bmRzLm1pblZhbHVlLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnY2xhbXBzIHggYW5kIFswLCAxXSB2YWx1ZSBiYXNlZCBvbiBnZXRCb3VuZHMoKS5tYXhWYWx1ZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGxlZnQgPSAxMDAwMDtcbiAgICAgIGNvbnN0IHBvcyA9IGluc3RhbmNlLl9nZXRQb3NpdGlvbihsZWZ0KTtcbiAgICAgIGV4cGVjdChwb3MpLnRvRXF1YWwoe1xuICAgICAgICB4OiBib3VuZHMubWF4VmFsdWUgKiBib3VuZHMud2lkdGgsXG4gICAgICAgIHZhbHVlOiBib3VuZHMubWF4VmFsdWUsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3dpbmRvdyByZXNpemUgZXZlbnQgbGlzdGVuZXInLCAoKSA9PiB7XG4gICAgaXQoJ2lzIGFkZGVkIGluIHRoZSBjdG9yIGlmZiBgcmVzZXRCb3VuZHNPblJlc2l6ZWAgcGFyYW0gaXMgdHJ1dGh5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2xkRm4gPSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcjtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID0gamVzdC5mbigpO1xuXG4gICAgICBjdG9yT3B0cy5yZXNldEJvdW5kc09uUmVzaXplID0gZmFsc2U7XG4gICAgICBpbnN0YW5jZSA9IG5ldyBEcmFnZ2FibGVNYW5hZ2VyKGN0b3JPcHRzKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZCh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikubW9jay5jYWxscykudG9FcXVhbChbXSk7XG4gICAgICBjdG9yT3B0cy5yZXNldEJvdW5kc09uUmVzaXplID0gdHJ1ZTtcbiAgICAgIGluc3RhbmNlID0gbmV3IERyYWdnYWJsZU1hbmFnZXIoY3Rvck9wdHMpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKS5tb2NrLmNhbGxzKS50b0VxdWFsKFtbJ3Jlc2l6ZScsIGV4cGVjdC5hbnkoRnVuY3Rpb24pXV0pO1xuXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9IG9sZEZuO1xuICAgIH0pO1xuXG4gICAgaXQoJ2lzIHJlbW92ZWQgaW4gYC5kaXNwb3NlKClgIGlmZiBgcmVzZXRCb3VuZHNPblJlc2l6ZWAgcGFyYW0gaXMgdHJ1dGh5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2xkRm4gPSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyID0gamVzdC5mbigpO1xuXG4gICAgICBjdG9yT3B0cy5yZXNldEJvdW5kc09uUmVzaXplID0gZmFsc2U7XG4gICAgICBpbnN0YW5jZSA9IG5ldyBEcmFnZ2FibGVNYW5hZ2VyKGN0b3JPcHRzKTtcbiAgICAgIGluc3RhbmNlLmRpc3Bvc2UoKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZCh3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcikubW9jay5jYWxscykudG9FcXVhbChbXSk7XG4gICAgICBjdG9yT3B0cy5yZXNldEJvdW5kc09uUmVzaXplID0gdHJ1ZTtcbiAgICAgIGluc3RhbmNlID0gbmV3IERyYWdnYWJsZU1hbmFnZXIoY3Rvck9wdHMpO1xuICAgICAgaW5zdGFuY2UuZGlzcG9zZSgpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKS5tb2NrLmNhbGxzKS50b0VxdWFsKFtbJ3Jlc2l6ZScsIGV4cGVjdC5hbnkoRnVuY3Rpb24pXV0pO1xuXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IG9sZEZuO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbWlub3IgbW91c2UgZXZlbnRzJywgKCkgPT4ge1xuICAgIGl0KCd0aHJvd3MgYW4gZXJyb3IgZm9yIGludmFsaWQgZXZlbnQgdHlwZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0eXBlID0gJ2ludmFsaWQtZXZlbnQtdHlwZSc7XG4gICAgICBjb25zdCB0aHJvd2VycyA9IFtcbiAgICAgICAgKCkgPT4gaW5zdGFuY2UuaGFuZGxlTW91c2VFbnRlcih7IC4uLmJhc2VNb3VzZUV2dCwgdHlwZSB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQpLFxuICAgICAgICAoKSA9PiBpbnN0YW5jZS5oYW5kbGVNb3VzZU1vdmUoeyAuLi5iYXNlTW91c2VFdnQsIHR5cGUgfSBhcyBSZWFjdC5Nb3VzZUV2ZW50KSxcbiAgICAgICAgKCkgPT4gaW5zdGFuY2UuaGFuZGxlTW91c2VMZWF2ZSh7IC4uLmJhc2VNb3VzZUV2dCwgdHlwZSB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQpLFxuICAgICAgXTtcbiAgICAgIHRocm93ZXJzLmZvckVhY2goKHRocm93ZXIpID0+IGV4cGVjdCh0aHJvd2VyKS50b1Rocm93KCkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RvZXMgbm90aGluZyBpZiBhbHJlYWR5IGRyYWdnaW5nJywgKCkgPT4ge1xuICAgICAgc3RhcnREcmFnZ2luZyhpbnN0YW5jZSk7XG4gICAgICBleHBlY3QoZ2V0Qm91bmRzLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDEpO1xuXG4gICAgICBpbnN0YW5jZS5oYW5kbGVNb3VzZUVudGVyKHsgLi4uYmFzZU1vdXNlRXZ0LCB0eXBlOiAnbW91c2VlbnRlcicgfSBhcyBSZWFjdC5Nb3VzZUV2ZW50KTtcbiAgICAgIGluc3RhbmNlLmhhbmRsZU1vdXNlTW92ZSh7IC4uLmJhc2VNb3VzZUV2dCwgdHlwZTogJ21vdXNlbW92ZScgfSBhcyBSZWFjdC5Nb3VzZUV2ZW50KTtcbiAgICAgIGluc3RhbmNlLmhhbmRsZU1vdXNlTGVhdmUoeyAuLi5iYXNlTW91c2VFdnQsIHR5cGU6ICdtb3VzZWxlYXZlJyB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQpO1xuICAgICAgZXhwZWN0KGN0b3JPcHRzLm9uTW91c2VFbnRlcikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChjdG9yT3B0cy5vbk1vdXNlTW92ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChjdG9yT3B0cy5vbk1vdXNlTGVhdmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG5cbiAgICAgIGNvbnN0IGV2dCA9IHsgLi4uYmFzZU1vdXNlRXZ0LCB0eXBlOiAnaW52YWxpZC10eXBlJyB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQ7XG4gICAgICBleHBlY3QoKCkgPT4gaW5zdGFuY2UuaGFuZGxlTW91c2VFbnRlcihldnQpKS5ub3QudG9UaHJvdygpO1xuXG4gICAgICBleHBlY3QoZ2V0Qm91bmRzLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Bhc3NlcyBkYXRhIGJhc2VkIG9uIHRoZSBtb3VzZSBldmVudCB0eXBlIHRvIGNhbGxiYWNrcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHggPSBiYXNlQ2xpZW50WCAtIGJvdW5kcy5jbGllbnRYTGVmdDtcbiAgICAgIGNvbnN0IHZhbHVlID0gKGJhc2VDbGllbnRYIC0gYm91bmRzLmNsaWVudFhMZWZ0KSAvIGJvdW5kcy53aWR0aDtcbiAgICAgIGNvbnN0IGNhc2VzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ21vdXNlZW50ZXInLFxuICAgICAgICAgIGhhbmRsZXI6IGluc3RhbmNlLmhhbmRsZU1vdXNlRW50ZXIsXG4gICAgICAgICAgY2FsbGJhY2s6IGN0b3JPcHRzLm9uTW91c2VFbnRlcixcbiAgICAgICAgICB1cGRhdGVUeXBlOiBFVXBkYXRlVHlwZXMuTW91c2VFbnRlcixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdtb3VzZW1vdmUnLFxuICAgICAgICAgIGhhbmRsZXI6IGluc3RhbmNlLmhhbmRsZU1vdXNlTW92ZSxcbiAgICAgICAgICBjYWxsYmFjazogY3Rvck9wdHMub25Nb3VzZU1vdmUsXG4gICAgICAgICAgdXBkYXRlVHlwZTogRVVwZGF0ZVR5cGVzLk1vdXNlTW92ZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdtb3VzZWxlYXZlJyxcbiAgICAgICAgICBoYW5kbGVyOiBpbnN0YW5jZS5oYW5kbGVNb3VzZUxlYXZlLFxuICAgICAgICAgIGNhbGxiYWNrOiBjdG9yT3B0cy5vbk1vdXNlTGVhdmUsXG4gICAgICAgICAgdXBkYXRlVHlwZTogRVVwZGF0ZVR5cGVzLk1vdXNlTGVhdmUsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBjYXNlcy5mb3JFYWNoKCh0ZXN0Q2FzZSkgPT4ge1xuICAgICAgICBjb25zdCB7IHR5cGUsIGhhbmRsZXIsIGNhbGxiYWNrLCB1cGRhdGVUeXBlIH0gPSB0ZXN0Q2FzZTtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB7IC4uLmJhc2VNb3VzZUV2dCwgdHlwZSB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQ7XG4gICAgICAgIGhhbmRsZXIoZXZlbnQpO1xuICAgICAgICBleHBlY3QoamVzdC5tb2NrZWQoY2FsbGJhY2spPy5tb2NrLmNhbGxzKS50b0VxdWFsKFtcbiAgICAgICAgICBbeyBldmVudCwgdGFnLCB2YWx1ZSwgeCwgbWFuYWdlcjogaW5zdGFuY2UsIHR5cGU6IHVwZGF0ZVR5cGUgfV0sXG4gICAgICAgIF0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkcmFnIGV2ZW50cycsICgpID0+IHtcbiAgICBsZXQgcmVhbFdpbmRvd0FkZEV2ZW50OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXI7XG4gICAgbGV0IHJlYWxXaW5kb3dSbUV2ZW50OiB0eXBlb2Ygd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHJlYWxXaW5kb3dBZGRFdmVudCA9IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyO1xuICAgICAgcmVhbFdpbmRvd1JtRXZlbnQgPSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID0gamVzdC5mbigpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBqZXN0LmZuKCk7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPSByZWFsV2luZG93QWRkRXZlbnQ7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHJlYWxXaW5kb3dSbUV2ZW50O1xuICAgIH0pO1xuXG4gICAgaXQoJ3Rocm93cyBhbiBlcnJvciBmb3IgaW52YWxpZCBldmVudCB0eXBlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PlxuICAgICAgICBpbnN0YW5jZS5oYW5kbGVNb3VzZURvd24oeyAuLi5iYXNlTW91c2VFdnQsIHR5cGU6ICdpbnZhbGlkLWV2ZW50LXR5cGUnIH0gYXMgUmVhY3QuTW91c2VFdmVudClcbiAgICAgICkudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ21vdXNlZG93bicsICgpID0+IHtcbiAgICAgIGl0KCdpcyBpZ25vcmVkIGlmIGFscmVhZHkgZHJhZ2dpbmcnLCAoKSA9PiB7XG4gICAgICAgIHN0YXJ0RHJhZ2dpbmcoaW5zdGFuY2UpO1xuICAgICAgICBqZXN0Lm1vY2tlZCh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikubW9ja1Jlc2V0KCk7XG4gICAgICAgIGplc3QubW9ja2VkKGN0b3JPcHRzLm9uRHJhZ1N0YXJ0KT8ubW9ja1Jlc2V0KCk7XG5cbiAgICAgICAgZXhwZWN0KGdldEJvdW5kcy5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgxKTtcbiAgICAgICAgaW5zdGFuY2UuaGFuZGxlTW91c2VEb3duKHsgLi4uYmFzZU1vdXNlRXZ0LCB0eXBlOiAnbW91c2Vkb3duJyB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQpO1xuICAgICAgICBleHBlY3QoZ2V0Qm91bmRzLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDEpO1xuXG4gICAgICAgIGV4cGVjdCh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgICAgZXhwZWN0KGN0b3JPcHRzLm9uRHJhZ1N0YXJ0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzZXRzIGBpc0RyYWdnaW5nKClgIHRvIHRydWUnLCAoKSA9PiB7XG4gICAgICAgIGluc3RhbmNlLmhhbmRsZU1vdXNlRG93bih7IC4uLmJhc2VNb3VzZUV2dCwgdHlwZTogJ21vdXNlZG93bicgfSBhcyBSZWFjdC5Nb3VzZUV2ZW50KTtcbiAgICAgICAgZXhwZWN0KGluc3RhbmNlLmlzRHJhZ2dpbmcoKSkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnYWRkcyB0aGUgd2luZG93IG1vdXNlIGxpc3RlbmVyIGV2ZW50cycsICgpID0+IHtcbiAgICAgICAgaW5zdGFuY2UuaGFuZGxlTW91c2VEb3duKHsgLi4uYmFzZU1vdXNlRXZ0LCB0eXBlOiAnbW91c2Vkb3duJyB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQpO1xuICAgICAgICBleHBlY3QoamVzdC5tb2NrZWQod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpLm1vY2suY2FsbHMpLnRvRXF1YWwoW1xuICAgICAgICAgIFsnbW91c2Vtb3ZlJywgZXhwZWN0LmFueShGdW5jdGlvbildLFxuICAgICAgICAgIFsnbW91c2V1cCcsIGV4cGVjdC5hbnkoRnVuY3Rpb24pXSxcbiAgICAgICAgXSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdtb3VzZW1vdmUnLCAoKSA9PiB7XG4gICAgICBpdCgnaXMgaWdub3JlZCBpZiBub3QgYWxyZWFkeSBkcmFnZ2luZycsICgpID0+IHtcbiAgICAgICAgaW5zdGFuY2UuX2hhbmRsZURyYWdFdmVudCh7IC4uLmJhc2VNb3VzZUV2dCwgdHlwZTogJ21vdXNlbW92ZScgfSBhcyBSZWFjdC5Nb3VzZUV2ZW50KTtcbiAgICAgICAgZXhwZWN0KGN0b3JPcHRzLm9uRHJhZ01vdmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICAgIHN0YXJ0RHJhZ2dpbmcoaW5zdGFuY2UpO1xuICAgICAgICBpbnN0YW5jZS5faGFuZGxlRHJhZ0V2ZW50KHsgLi4uYmFzZU1vdXNlRXZ0LCB0eXBlOiAnbW91c2Vtb3ZlJyB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQpO1xuICAgICAgICBleHBlY3QoY3Rvck9wdHMub25EcmFnTW92ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnbW91c2V1cCcsICgpID0+IHtcbiAgICAgIGl0KCdpcyBpZ25vcmVkIGlmIG5vdCBhbHJlYWR5IGRyYWdnaW5nJywgKCkgPT4ge1xuICAgICAgICBpbnN0YW5jZS5faGFuZGxlRHJhZ0V2ZW50KHsgLi4uYmFzZU1vdXNlRXZ0LCB0eXBlOiAnbW91c2V1cCcgfSBhcyBSZWFjdC5Nb3VzZUV2ZW50KTtcbiAgICAgICAgZXhwZWN0KGN0b3JPcHRzLm9uRHJhZ0VuZCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgICAgc3RhcnREcmFnZ2luZyhpbnN0YW5jZSk7XG4gICAgICAgIGluc3RhbmNlLl9oYW5kbGVEcmFnRXZlbnQoeyAuLi5iYXNlTW91c2VFdnQsIHR5cGU6ICdtb3VzZXVwJyB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQpO1xuICAgICAgICBleHBlY3QoY3Rvck9wdHMub25EcmFnRW5kKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3NldHMgYGlzRHJhZ2dpbmcoKWAgdG8gZmFsc2UnLCAoKSA9PiB7XG4gICAgICAgIHN0YXJ0RHJhZ2dpbmcoaW5zdGFuY2UpO1xuICAgICAgICBleHBlY3QoaW5zdGFuY2UuaXNEcmFnZ2luZygpKS50b0JlKHRydWUpO1xuICAgICAgICBpbnN0YW5jZS5faGFuZGxlRHJhZ0V2ZW50KHsgLi4uYmFzZU1vdXNlRXZ0LCB0eXBlOiAnbW91c2V1cCcgfSBhcyBSZWFjdC5Nb3VzZUV2ZW50KTtcbiAgICAgICAgZXhwZWN0KGluc3RhbmNlLmlzRHJhZ2dpbmcoKSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JlbW92ZXMgdGhlIHdpbmRvdyBtb3VzZSBsaXN0ZW5lciBldmVudHMnLCAoKSA9PiB7XG4gICAgICAgIHN0YXJ0RHJhZ2dpbmcoaW5zdGFuY2UpO1xuICAgICAgICBleHBlY3Qod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICAgIGluc3RhbmNlLl9oYW5kbGVEcmFnRXZlbnQoeyAuLi5iYXNlTW91c2VFdnQsIHR5cGU6ICdtb3VzZXVwJyB9IGFzIFJlYWN0Lk1vdXNlRXZlbnQpO1xuICAgICAgICBleHBlY3QoamVzdC5tb2NrZWQod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIpLm1vY2suY2FsbHMpLnRvRXF1YWwoW1xuICAgICAgICAgIFsnbW91c2Vtb3ZlJywgZXhwZWN0LmFueShGdW5jdGlvbildLFxuICAgICAgICAgIFsnbW91c2V1cCcsIGV4cGVjdC5hbnkoRnVuY3Rpb24pXSxcbiAgICAgICAgXSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdwYXNzZXMgZHJhZyBldmVudCBkYXRhIHRvIHRoZSBjYWxsYmFja3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCB4ID0gYmFzZUNsaWVudFggLSBib3VuZHMuY2xpZW50WExlZnQ7XG4gICAgICBjb25zdCB2YWx1ZSA9IChiYXNlQ2xpZW50WCAtIGJvdW5kcy5jbGllbnRYTGVmdCkgLyBib3VuZHMud2lkdGg7XG4gICAgICBjb25zdCBjYXNlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdtb3VzZWRvd24nLFxuICAgICAgICAgIGhhbmRsZXI6IGluc3RhbmNlLmhhbmRsZU1vdXNlRG93bixcbiAgICAgICAgICBjYWxsYmFjazogY3Rvck9wdHMub25EcmFnU3RhcnQsXG4gICAgICAgICAgdXBkYXRlVHlwZTogRVVwZGF0ZVR5cGVzLkRyYWdTdGFydCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdtb3VzZW1vdmUnLFxuICAgICAgICAgIGhhbmRsZXI6IGluc3RhbmNlLl9oYW5kbGVEcmFnRXZlbnQsXG4gICAgICAgICAgY2FsbGJhY2s6IGN0b3JPcHRzLm9uRHJhZ01vdmUsXG4gICAgICAgICAgdXBkYXRlVHlwZTogRVVwZGF0ZVR5cGVzLkRyYWdNb3ZlLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ21vdXNldXAnLFxuICAgICAgICAgIGhhbmRsZXI6IGluc3RhbmNlLl9oYW5kbGVEcmFnRXZlbnQsXG4gICAgICAgICAgY2FsbGJhY2s6IGN0b3JPcHRzLm9uRHJhZ0VuZCxcbiAgICAgICAgICB1cGRhdGVUeXBlOiBFVXBkYXRlVHlwZXMuRHJhZ0VuZCxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGNhc2VzLmZvckVhY2goKHRlc3RDYXNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdHlwZSwgaGFuZGxlciwgY2FsbGJhY2ssIHVwZGF0ZVR5cGUgfSA9IHRlc3RDYXNlO1xuICAgICAgICBjb25zdCBldmVudCA9IHsgLi4uYmFzZU1vdXNlRXZ0LCB0eXBlIH0gYXMgUmVhY3QuTW91c2VFdmVudDtcbiAgICAgICAgaGFuZGxlcihldmVudCk7XG4gICAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZChjYWxsYmFjayk/Lm1vY2suY2FsbHMpLnRvRXF1YWwoW1xuICAgICAgICAgIFt7IGV2ZW50LCB0YWcsIHZhbHVlLCB4LCBtYW5hZ2VyOiBpbnN0YW5jZSwgdHlwZTogdXBkYXRlVHlw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