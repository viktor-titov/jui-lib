// Copyright (c) 2017 Uber Technologies, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import { createTheme } from '@grafana/data';
import { colors } from '@grafana/ui';
import { getColorByKey, getFilteredColors, clear } from './color-generator';
var colorsToFilter = [].concat(colors);
var theme = createTheme();
it('gives the same color for the same key', function () {
  clear(theme);
  var colorOne = getColorByKey('serviceA', createTheme());
  var colorTwo = getColorByKey('serviceA', createTheme());
  expect(colorOne).toBe(colorTwo);
});
it('gives different colors for each key', function () {
  clear(theme);
  var colorOne = getColorByKey('serviceA', createTheme());
  var colorTwo = getColorByKey('serviceB', createTheme());
  expect(colorOne).not.toBe(colorTwo);
});
it('should not allow red', function () {
  expect(colorsToFilter.indexOf('#E24D42')).toBe(4);
  expect(colorsToFilter.indexOf('#BF1B00')).toBe(28);
  var filteredColors = getFilteredColors(colorsToFilter, createTheme());
  expect(filteredColors.indexOf('#E24D42')).toBe(-1);
  expect(filteredColors.indexOf('#BF1B00')).toBe(-1);
});
it('should not allow colors with a contrast ratio < 3 in light mode', function () {
  expect(colorsToFilter.indexOf('#7EB26D')).toBe(0);
  expect(colorsToFilter.indexOf('#EAB839')).toBe(1);
  var filteredColors = getFilteredColors(colorsToFilter, createTheme({
    colors: {
      mode: 'light'
    }
  }));
  expect(filteredColors.indexOf('#7EB26D')).toBe(-1);
  expect(filteredColors.indexOf('#EAB839')).toBe(-1);
});
it('should not allow colors with a contrast ratio < 3 in dark mode', function () {
  expect(colorsToFilter.indexOf('#890F02')).toBe(11);
  expect(colorsToFilter.indexOf('#0A437C')).toBe(12);
  var filteredColors = getFilteredColors(colorsToFilter, createTheme({
    colors: {
      mode: 'dark'
    }
  }));
  expect(filteredColors.indexOf('#890F02')).toBe(-1);
  expect(filteredColors.indexOf('#0A437C')).toBe(-1);
});
it('should not allow a color that is the same as the previous color', function () {
  clear(theme);
  var colorOne = getColorByKey('random4', theme); // #447EBC
  var colorTwo = getColorByKey('random17', theme); // #447EBC
  expect(colorOne).not.toBe(colorTwo);
  expect(colorOne).toBe('#447EBC');
  expect(colorTwo).toBe('#B7DBAB');
});
it('should not allow a color that looks similar to the previous color', function () {
  theme = createTheme({
    colors: {
      mode: 'light'
    }
  });
  clear(theme);
  var colorOne = getColorByKey('random9', theme); // #58140C
  var colorTwo = getColorByKey('random18', theme); // #511749
  expect(colorOne).toBe('#58140C');
  // #1F78C1 is the next color that has a contrast ratio >= 3 for the current theme
  expect(colorTwo).toBe('#1F78C1');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVUaGVtZSIsImNvbG9ycyIsImdldENvbG9yQnlLZXkiLCJnZXRGaWx0ZXJlZENvbG9ycyIsImNsZWFyIiwiY29sb3JzVG9GaWx0ZXIiLCJjb25jYXQiLCJ0aGVtZSIsIml0IiwiY29sb3JPbmUiLCJjb2xvclR3byIsImV4cGVjdCIsInRvQmUiLCJub3QiLCJpbmRleE9mIiwiZmlsdGVyZWRDb2xvcnMiLCJtb2RlIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi91dGlscy9jb2xvci1nZW5lcmF0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTcgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuaW1wb3J0IHsgY3JlYXRlVGhlbWUgfSBmcm9tICdAZ3JhZmFuYS9kYXRhJztcbmltcG9ydCB7IGNvbG9ycyB9IGZyb20gJ0BncmFmYW5hL3VpJztcblxuaW1wb3J0IHsgZ2V0Q29sb3JCeUtleSwgZ2V0RmlsdGVyZWRDb2xvcnMsIGNsZWFyIH0gZnJvbSAnLi9jb2xvci1nZW5lcmF0b3InO1xuXG5jb25zdCBjb2xvcnNUb0ZpbHRlciA9IFsuLi5jb2xvcnNdO1xubGV0IHRoZW1lID0gY3JlYXRlVGhlbWUoKTtcblxuaXQoJ2dpdmVzIHRoZSBzYW1lIGNvbG9yIGZvciB0aGUgc2FtZSBrZXknLCAoKSA9PiB7XG4gIGNsZWFyKHRoZW1lKTtcbiAgY29uc3QgY29sb3JPbmUgPSBnZXRDb2xvckJ5S2V5KCdzZXJ2aWNlQScsIGNyZWF0ZVRoZW1lKCkpO1xuICBjb25zdCBjb2xvclR3byA9IGdldENvbG9yQnlLZXkoJ3NlcnZpY2VBJywgY3JlYXRlVGhlbWUoKSk7XG4gIGV4cGVjdChjb2xvck9uZSkudG9CZShjb2xvclR3byk7XG59KTtcblxuaXQoJ2dpdmVzIGRpZmZlcmVudCBjb2xvcnMgZm9yIGVhY2gga2V5JywgKCkgPT4ge1xuICBjbGVhcih0aGVtZSk7XG4gIGNvbnN0IGNvbG9yT25lID0gZ2V0Q29sb3JCeUtleSgnc2VydmljZUEnLCBjcmVhdGVUaGVtZSgpKTtcbiAgY29uc3QgY29sb3JUd28gPSBnZXRDb2xvckJ5S2V5KCdzZXJ2aWNlQicsIGNyZWF0ZVRoZW1lKCkpO1xuICBleHBlY3QoY29sb3JPbmUpLm5vdC50b0JlKGNvbG9yVHdvKTtcbn0pO1xuXG5pdCgnc2hvdWxkIG5vdCBhbGxvdyByZWQnLCAoKSA9PiB7XG4gIGV4cGVjdChjb2xvcnNUb0ZpbHRlci5pbmRleE9mKCcjRTI0RDQyJykpLnRvQmUoNCk7XG4gIGV4cGVjdChjb2xvcnNUb0ZpbHRlci5pbmRleE9mKCcjQkYxQjAwJykpLnRvQmUoMjgpO1xuICBjb25zdCBmaWx0ZXJlZENvbG9ycyA9IGdldEZpbHRlcmVkQ29sb3JzKGNvbG9yc1RvRmlsdGVyLCBjcmVhdGVUaGVtZSgpKTtcbiAgZXhwZWN0KGZpbHRlcmVkQ29sb3JzLmluZGV4T2YoJyNFMjRENDInKSkudG9CZSgtMSk7XG4gIGV4cGVjdChmaWx0ZXJlZENvbG9ycy5pbmRleE9mKCcjQkYxQjAwJykpLnRvQmUoLTEpO1xufSk7XG5cbml0KCdzaG91bGQgbm90IGFsbG93IGNvbG9ycyB3aXRoIGEgY29udHJhc3QgcmF0aW8gPCAzIGluIGxpZ2h0IG1vZGUnLCAoKSA9PiB7XG4gIGV4cGVjdChjb2xvcnNUb0ZpbHRlci5pbmRleE9mKCcjN0VCMjZEJykpLnRvQmUoMCk7XG4gIGV4cGVjdChjb2xvcnNUb0ZpbHRlci5pbmRleE9mKCcjRUFCODM5JykpLnRvQmUoMSk7XG4gIGNvbnN0IGZpbHRlcmVkQ29sb3JzID0gZ2V0RmlsdGVyZWRDb2xvcnMoY29sb3JzVG9GaWx0ZXIsIGNyZWF0ZVRoZW1lKHsgY29sb3JzOiB7IG1vZGU6ICdsaWdodCcgfSB9KSk7XG4gIGV4cGVjdChmaWx0ZXJlZENvbG9ycy5pbmRleE9mKCcjN0VCMjZEJykpLnRvQmUoLTEpO1xuICBleHBlY3QoZmlsdGVyZWRDb2xvcnMuaW5kZXhPZignI0VBQjgzOScpKS50b0JlKC0xKTtcbn0pO1xuXG5pdCgnc2hvdWxkIG5vdCBhbGxvdyBjb2xvcnMgd2l0aCBhIGNvbnRyYXN0IHJhdGlvIDwgMyBpbiBkYXJrIG1vZGUnLCAoKSA9PiB7XG4gIGV4cGVjdChjb2xvcnNUb0ZpbHRlci5pbmRleE9mKCcjODkwRjAyJykpLnRvQmUoMTEpO1xuICBleHBlY3QoY29sb3JzVG9GaWx0ZXIuaW5kZXhPZignIzBBNDM3QycpKS50b0JlKDEyKTtcbiAgY29uc3QgZmlsdGVyZWRDb2xvcnMgPSBnZXRGaWx0ZXJlZENvbG9ycyhjb2xvcnNUb0ZpbHRlciwgY3JlYXRlVGhlbWUoeyBjb2xvcnM6IHsgbW9kZTogJ2RhcmsnIH0gfSkpO1xuICBleHBlY3QoZmlsdGVyZWRDb2xvcnMuaW5kZXhPZignIzg5MEYwMicpKS50b0JlKC0xKTtcbiAgZXhwZWN0KGZpbHRlcmVkQ29sb3JzLmluZGV4T2YoJyMwQTQzN0MnKSkudG9CZSgtMSk7XG59KTtcblxuaXQoJ3Nob3VsZCBub3QgYWxsb3cgYSBjb2xvciB0aGF0IGlzIHRoZSBzYW1lIGFzIHRoZSBwcmV2aW91cyBjb2xvcicsICgpID0+IHtcbiAgY2xlYXIodGhlbWUpO1xuICBjb25zdCBjb2xvck9uZSA9IGdldENvbG9yQnlLZXkoJ3JhbmRvbTQnLCB0aGVtZSk7IC8vICM0NDdFQkNcbiAgY29uc3QgY29sb3JUd28gPSBnZXRDb2xvckJ5S2V5KCdyYW5kb20xNycsIHRoZW1lKTsgLy8gIzQ0N0VCQ1xuICBleHBlY3QoY29sb3JPbmUpLm5vdC50b0JlKGNvbG9yVHdvKTtcbiAgZXhwZWN0KGNvbG9yT25lKS50b0JlKCcjNDQ3RUJDJyk7XG4gIGV4cGVjdChjb2xvclR3bykudG9CZSgnI0I3REJBQicpO1xufSk7XG5cbml0KCdzaG91bGQgbm90IGFsbG93IGEgY29sb3IgdGhhdCBsb29rcyBzaW1pbGFyIHRvIHRoZSBwcmV2aW91cyBjb2xvcicsICgpID0+IHtcbiAgdGhlbWUgPSBjcmVhdGVUaGVtZSh7IGNvbG9yczogeyBtb2RlOiAnbGlnaHQnIH0gfSk7XG4gIGNsZWFyKHRoZW1lKTtcbiAgY29uc3QgY29sb3JPbmUgPSBnZXRDb2xvckJ5S2V5KCdyYW5kb205JywgdGhlbWUpOyAvLyAjNTgxNDBDXG4gIGNvbnN0IGNvbG9yVHdvID0gZ2V0Q29sb3JCeUtleSgncmFuZG9tMTgnLCB0aGVtZSk7IC8vICM1MTE3NDlcbiAgZXhwZWN0KGNvbG9yT25lKS50b0JlKCcjNTgxNDBDJyk7XG4gIC8vICMxRjc4QzEgaXMgdGhlIG5leHQgY29sb3IgdGhhdCBoYXMgYSBjb250cmFzdCByYXRpbyA+PSAzIGZvciB0aGUgY3VycmVudCB0aGVtZVxuICBleHBlY3QoY29sb3JUd28pLnRvQmUoJyMxRjc4QzEnKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtB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