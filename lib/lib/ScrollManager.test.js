// Copyright (c) 2017 Uber Technologies, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

jest.mock('./scroll-page');
import traceGenerator from '../src/demo/trace-generators';
import ScrollManager from './ScrollManager';
import { scrollBy, scrollTo } from './scroll-page';
var SPAN_HEIGHT = 2;
function getTrace() {
  var generatedTrace = traceGenerator.trace({
    numberOfSpans: 10
  });
  generatedTrace.duration = 2000;
  generatedTrace.startTime = 1000;
  generatedTrace.spans.forEach(function (span, index) {
    span.duration = 1;
    span.startTime = 1000;
    span.spanID = (index + 1).toString();
  });
  return generatedTrace;
}
function getAccessors() {
  return {
    getViewRange: jest.fn(function () {
      return [0, 1];
    }),
    getSearchedSpanIDs: jest.fn(),
    getCollapsedChildren: jest.fn(),
    getViewHeight: jest.fn(function () {
      return SPAN_HEIGHT * 2;
    }),
    getBottomRowIndexVisible: jest.fn(),
    getTopRowIndexVisible: jest.fn(),
    getRowPosition: jest.fn(),
    mapRowIndexToSpanIndex: jest.fn(function (n) {
      return n;
    }),
    mapSpanIndexToRowIndex: jest.fn(function (n) {
      return n;
    })
  };
}
describe('ScrollManager', function () {
  var trace;
  var accessors;
  var manager;
  beforeEach(function () {
    jest.mocked(scrollBy).mockReset();
    jest.mocked(scrollTo).mockReset();
    trace = getTrace();
    accessors = getAccessors();
    manager = new ScrollManager(trace, {
      scrollBy: scrollBy,
      scrollTo: scrollTo
    });
    manager.setAccessors(accessors);
  });
  it('saves the accessors', function () {
    accessors = getAccessors();
    manager.setAccessors(accessors);
    expect(manager._accessors).toBe(accessors);
  });
  describe('_scrollPast()', function () {
    it('throws if accessors is not set', function () {
      expect(manager._scrollPast).toThrow();
    });
    it('is a noop if an invalid rowPosition is returned by the accessors', function () {
      // eslint-disable-next-line no-console
      var oldWarn = console.warn;
      // eslint-disable-next-line no-console
      console.warn = function () {};
      manager._scrollPast(-2, 1);
      expect(jest.mocked(accessors.getRowPosition).mock.calls.length).toBe(1);
      expect(jest.mocked(accessors.getViewHeight).mock.calls.length).toBe(0);
      expect(jest.mocked(scrollTo).mock.calls.length).toBe(0);
      // eslint-disable-next-line no-console
      console.warn = oldWarn;
    });
    it('scrolls up with direction is `-1`', function () {
      var y = 10;
      var expectTo = y - 0.5 * accessors.getViewHeight();
      jest.mocked(accessors.getRowPosition).mockReturnValue({
        y: y,
        height: SPAN_HEIGHT
      });
      manager._scrollPast(NaN, -1);
      expect(jest.mocked(scrollTo).mock.calls).toEqual([[expectTo]]);
    });
    it('scrolls down with direction `1`', function () {
      var y = 10;
      var vh = accessors.getViewHeight();
      var expectTo = y + SPAN_HEIGHT - 0.5 * vh;
      jest.mocked(accessors.getRowPosition).mockReturnValue({
        y: y,
        height: SPAN_HEIGHT
      });
      manager._scrollPast(NaN, 1);
      expect(jest.mocked(scrollTo).mock.calls).toEqual([[expectTo]]);
    });
  });
  describe('_scrollToVisibleSpan()', function () {
    function getRefs(spanID) {
      return [{
        refType: 'CHILD_OF',
        spanID: spanID
      }];
    }
    var scrollPastMock;
    beforeEach(function () {
      scrollPastMock = jest.fn();
      manager._scrollPast = scrollPastMock;
    });
    it('throws if accessors is not set', function () {
      expect(manager._scrollToVisibleSpan).toThrow();
    });
    it('exits if the trace is not set', function () {
      manager.setTrace(null);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock.mock.calls.length).toBe(0);
    });
    it('does nothing if already at the boundary', function () {
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(0);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(trace.spans.length - 1);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock.mock.calls.length).toBe(0);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock.mock.calls.length).toBe(0);
    });
    it('centers the current top or bottom span', function () {
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(5);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(5);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock).lastCalledWith(5, -1);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(5, 1);
    });
    it('skips spans that are out of view', function () {
      trace.spans[4].startTime = trace.startTime + trace.duration * 0.5;
      accessors.getViewRange = function () {
        return [0.4, 0.6];
      };
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(trace.spans.length - 1);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(0);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(4, 1);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock).lastCalledWith(4, -1);
    });
    it('skips spans that do not match the text search', function () {
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(trace.spans.length - 1);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(0);
      accessors.getSearchedSpanIDs = function () {
        return new Set([trace.spans[4].spanID]);
      };
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(4, 1);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock).lastCalledWith(4, -1);
    });
    it('scrolls to boundary when scrolling away from closest spanID in findMatches', function () {
      var closetFindMatchesSpanID = 4;
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(closetFindMatchesSpanID - 1);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(closetFindMatchesSpanID + 1);
      accessors.getSearchedSpanIDs = function () {
        return new Set([trace.spans[closetFindMatchesSpanID].spanID]);
      };
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(trace.spans.length - 1, 1);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock).lastCalledWith(0, -1);
    });
    it('scrolls to last visible row when boundary is hidden', function () {
      var parentOfLastRowWithHiddenChildrenIndex = trace.spans.length - 2;
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(0);
      accessors.getCollapsedChildren = function () {
        return new Set([trace.spans[parentOfLastRowWithHiddenChildrenIndex].spanID]);
      };
      accessors.getSearchedSpanIDs = function () {
        return new Set([trace.spans[0].spanID]);
      };
      trace.spans[trace.spans.length - 1].references = getRefs(trace.spans[parentOfLastRowWithHiddenChildrenIndex].spanID);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(parentOfLastRowWithHiddenChildrenIndex, 1);
    });
    describe('scrollToNextVisibleSpan() and scrollToPrevVisibleSpan()', function () {
      beforeEach(function () {
        // change spans so 0 and 4 are top-level and their children are collapsed
        var spans = trace.spans;
        var parentID;
        for (var i = 0; i < spans.length; i++) {
          switch (i) {
            case 0:
            case 4:
              parentID = spans[i].spanID;
              break;
            default:
              spans[i].references = getRefs(parentID);
          }
        }
        // set which spans are "in-view" and which have collapsed children
        jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(trace.spans.length - 1);
        jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(0);
        jest.mocked(accessors.getCollapsedChildren).mockReturnValue(new Set([spans[0].spanID, spans[4].spanID]));
      });
      it('skips spans that are hidden because their parent is collapsed', function () {
        manager.scrollToNextVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, 1);
        manager.scrollToPrevVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, -1);
      });
      it('ignores references with unknown types', function () {
        // modify spans[2] so that it has an unknown refType
        var spans = trace.spans;
        spans[2].references = [{
          refType: 'OTHER'
        }];
        manager.scrollToNextVisibleSpan();
        expect(scrollPastMock).lastCalledWith(2, 1);
        manager.scrollToPrevVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, -1);
      });
      it('handles more than one level of ancestry', function () {
        // modify spans[2] so that it has an unknown refType
        var spans = trace.spans;
        spans[2].references = getRefs(spans[1].spanID);
        manager.scrollToNextVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, 1);
        manager.scrollToPrevVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, -1);
      });
    });
    describe('scrollToFirstVisibleSpan', function () {
      beforeEach(function () {
        jest.spyOn(manager, '_scrollToVisibleSpan');
      });
      it('calls _scrollToVisibleSpan searching downwards from first span', function () {
        manager.scrollToFirstVisibleSpan();
        expect(manager._scrollToVisibleSpan).toHaveBeenCalledWith(1, 0);
      });
    });
  });
  describe('scrollPageDown() and scrollPageUp()', function () {
    it('scrolls by +/~ viewHeight when invoked', function () {
      manager.scrollPageDown();
      expect(scrollBy).lastCalledWith(0.95 * accessors.getViewHeight(), true);
      manager.scrollPageUp();
      expect(scrollBy).lastCalledWith(-0.95 * accessors.getViewHeight(), true);
    });
    it('is a no-op if _accessors or _scroller is not defined', function () {
      manager._accessors = null;
      manager.scrollPageDown();
      manager.scrollPageUp();
      expect(jest.mocked(scrollBy).mock.calls.length).toBe(0);
      manager._accessors = accessors;
      manager._scroller = null;
      manager.scrollPageDown();
      manager.scrollPageUp();
      expect(jest.mocked(scrollBy).mock.calls.length).toBe(0);
    });
  });
  describe('destroy()', function () {
    it('disposes', function () {
      expect(manager._trace).toBeDefined();
      expect(manager._accessors).toBeDefined();
      expect(manager._scroller).toBeDefined();
      manager.destroy();
      expect(manager._trace).not.toBeDefined();
      expect(manager._accessors).not.toBeDefined();
      expect(manager._scroller).not.toBeDefined();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInRyYWNlR2VuZXJhdG9yIiwiU2Nyb2xsTWFuYWdlciIsInNjcm9sbEJ5Iiwic2Nyb2xsVG8iLCJTUEFOX0hFSUdIVCIsImdldFRyYWNlIiwiZ2VuZXJhdGVkVHJhY2UiLCJ0cmFjZSIsIm51bWJlck9mU3BhbnMiLCJkdXJhdGlvbiIsInN0YXJ0VGltZSIsInNwYW5zIiwiZm9yRWFjaCIsInNwYW4iLCJpbmRleCIsInNwYW5JRCIsInRvU3RyaW5nIiwiZ2V0QWNjZXNzb3JzIiwiZ2V0Vmlld1JhbmdlIiwiZm4iLCJnZXRTZWFyY2hlZFNwYW5JRHMiLCJnZXRDb2xsYXBzZWRDaGlsZHJlbiIsImdldFZpZXdIZWlnaHQiLCJnZXRCb3R0b21Sb3dJbmRleFZpc2libGUiLCJnZXRUb3BSb3dJbmRleFZpc2libGUiLCJnZXRSb3dQb3NpdGlvbiIsIm1hcFJvd0luZGV4VG9TcGFuSW5kZXgiLCJuIiwibWFwU3BhbkluZGV4VG9Sb3dJbmRleCIsImRlc2NyaWJlIiwiYWNjZXNzb3JzIiwibWFuYWdlciIsImJlZm9yZUVhY2giLCJtb2NrZWQiLCJtb2NrUmVzZXQiLCJzZXRBY2Nlc3NvcnMiLCJpdCIsImV4cGVjdCIsIl9hY2Nlc3NvcnMiLCJ0b0JlIiwiX3Njcm9sbFBhc3QiLCJ0b1Rocm93Iiwib2xkV2FybiIsImNvbnNvbGUiLCJ3YXJuIiwiY2FsbHMiLCJsZW5ndGgiLCJ5IiwiZXhwZWN0VG8iLCJtb2NrUmV0dXJuVmFsdWUiLCJoZWlnaHQiLCJOYU4iLCJ0b0VxdWFsIiwidmgiLCJnZXRSZWZzIiwicmVmVHlwZSIsInNjcm9sbFBhc3RNb2NrIiwiX3Njcm9sbFRvVmlzaWJsZVNwYW4iLCJzZXRUcmFjZSIsImxhc3RDYWxsZWRXaXRoIiwiU2V0IiwiY2xvc2V0RmluZE1hdGNoZXNTcGFuSUQiLCJwYXJlbnRPZkxhc3RSb3dXaXRoSGlkZGVuQ2hpbGRyZW5JbmRleCIsInJlZmVyZW5jZXMiLCJwYXJlbnRJRCIsImkiLCJzY3JvbGxUb05leHRWaXNpYmxlU3BhbiIsInNjcm9sbFRvUHJldlZpc2libGVTcGFuIiwic3B5T24iLCJzY3JvbGxUb0ZpcnN0VmlzaWJsZVNwYW4iLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInNjcm9sbFBhZ2VEb3duIiwic2Nyb2xsUGFnZVVwIiwiX3Njcm9sbGVyIiwiX3RyYWNlIiwidG9CZURlZmluZWQiLCJkZXN0cm95Iiwibm90Il0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi9TY3JvbGxNYW5hZ2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4vL1xuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbmplc3QubW9jaygnLi9zY3JvbGwtcGFnZScpO1xuXG5pbXBvcnQgdHJhY2VHZW5lcmF0b3IgZnJvbSAnLi4vc3JjL2RlbW8vdHJhY2UtZ2VuZXJhdG9ycyc7XG5cbmltcG9ydCBTY3JvbGxNYW5hZ2VyLCB7IEFjY2Vzc29ycyB9IGZyb20gJy4vU2Nyb2xsTWFuYWdlcic7XG5pbXBvcnQgeyBzY3JvbGxCeSwgc2Nyb2xsVG8gfSBmcm9tICcuL3Njcm9sbC1wYWdlJztcbmltcG9ydCB7IFRyYWNlLCBUcmFjZVNwYW5EYXRhLCBUcmFjZVNwYW5SZWZlcmVuY2UgfSBmcm9tICcuL3R5cGVzL3RyYWNlJztcblxuY29uc3QgU1BBTl9IRUlHSFQgPSAyO1xuXG5mdW5jdGlvbiBnZXRUcmFjZSgpOiBUcmFjZSB7XG4gIGNvbnN0IGdlbmVyYXRlZFRyYWNlID0gdHJhY2VHZW5lcmF0b3IudHJhY2UoeyBudW1iZXJPZlNwYW5zOiAxMCB9KTtcbiAgZ2VuZXJhdGVkVHJhY2UuZHVyYXRpb24gPSAyMDAwO1xuICBnZW5lcmF0ZWRUcmFjZS5zdGFydFRpbWUgPSAxMDAwO1xuXG4gIGdlbmVyYXRlZFRyYWNlLnNwYW5zLmZvckVhY2goKHNwYW46IFRyYWNlU3BhbkRhdGEsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICBzcGFuLmR1cmF0aW9uID0gMTtcbiAgICBzcGFuLnN0YXJ0VGltZSA9IDEwMDA7XG4gICAgc3Bhbi5zcGFuSUQgPSAoaW5kZXggKyAxKS50b1N0cmluZygpO1xuICB9KTtcbiAgcmV0dXJuIGdlbmVyYXRlZFRyYWNlO1xufVxuXG5mdW5jdGlvbiBnZXRBY2Nlc3NvcnMoKSB7XG4gIHJldHVybiB7XG4gICAgZ2V0Vmlld1JhbmdlOiBqZXN0LmZuKCgpID0+IFswLCAxXSBhcyBbbnVtYmVyLCBudW1iZXJdKSxcbiAgICBnZXRTZWFyY2hlZFNwYW5JRHM6IGplc3QuZm4oKSxcbiAgICBnZXRDb2xsYXBzZWRDaGlsZHJlbjogamVzdC5mbigpLFxuICAgIGdldFZpZXdIZWlnaHQ6IGplc3QuZm4oKCkgPT4gU1BBTl9IRUlHSFQgKiAyKSxcbiAgICBnZXRCb3R0b21Sb3dJbmRleFZpc2libGU6IGplc3QuZm4oKSxcbiAgICBnZXRUb3BSb3dJbmRleFZpc2libGU6IGplc3QuZm4oKSxcbiAgICBnZXRSb3dQb3NpdGlvbjogamVzdC5mbigpLFxuICAgIG1hcFJvd0luZGV4VG9TcGFuSW5kZXg6IGplc3QuZm4oKG4pID0+IG4pLFxuICAgIG1hcFNwYW5JbmRleFRvUm93SW5kZXg6IGplc3QuZm4oKG4pID0+IG4pLFxuICB9O1xufVxuXG5kZXNjcmliZSgnU2Nyb2xsTWFuYWdlcicsICgpID0+IHtcbiAgbGV0IHRyYWNlOiBUcmFjZTtcbiAgbGV0IGFjY2Vzc29yczogQWNjZXNzb3JzO1xuICBsZXQgbWFuYWdlcjogU2Nyb2xsTWFuYWdlcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0Lm1vY2tlZChzY3JvbGxCeSkubW9ja1Jlc2V0KCk7XG4gICAgamVzdC5tb2NrZWQoc2Nyb2xsVG8pLm1vY2tSZXNldCgpO1xuICAgIHRyYWNlID0gZ2V0VHJhY2UoKTtcbiAgICBhY2Nlc3NvcnMgPSBnZXRBY2Nlc3NvcnMoKTtcbiAgICBtYW5hZ2VyID0gbmV3IFNjcm9sbE1hbmFnZXIodHJhY2UsIHsgc2Nyb2xsQnksIHNjcm9sbFRvIH0pO1xuICAgIG1hbmFnZXIuc2V0QWNjZXNzb3JzKGFjY2Vzc29ycyk7XG4gIH0pO1xuXG4gIGl0KCdzYXZlcyB0aGUgYWNjZXNzb3JzJywgKCkgPT4ge1xuICAgIGFjY2Vzc29ycyA9IGdldEFjY2Vzc29ycygpO1xuICAgIG1hbmFnZXIuc2V0QWNjZXNzb3JzKGFjY2Vzc29ycyk7XG4gICAgZXhwZWN0KG1hbmFnZXIuX2FjY2Vzc29ycykudG9CZShhY2Nlc3NvcnMpO1xuICB9KTtcblxuICBkZXNjcmliZSgnX3Njcm9sbFBhc3QoKScsICgpID0+IHtcbiAgICBpdCgndGhyb3dzIGlmIGFjY2Vzc29ycyBpcyBub3Qgc2V0JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KG1hbmFnZXIuX3Njcm9sbFBhc3QpLnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIGl0KCdpcyBhIG5vb3AgaWYgYW4gaW52YWxpZCByb3dQb3NpdGlvbiBpcyByZXR1cm5lZCBieSB0aGUgYWNjZXNzb3JzJywgKCkgPT4ge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnN0IG9sZFdhcm4gPSBjb25zb2xlLndhcm47XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuID0gKCkgPT4ge307XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxQYXN0KC0yLCAxKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Um93UG9zaXRpb24pLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRWaWV3SGVpZ2h0KS5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZChzY3JvbGxUbykubW9jay5jYWxscy5sZW5ndGgpLnRvQmUoMCk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuID0gb2xkV2FybjtcbiAgICB9KTtcblxuICAgIGl0KCdzY3JvbGxzIHVwIHdpdGggZGlyZWN0aW9uIGlzIGAtMWAnLCAoKSA9PiB7XG4gICAgICBjb25zdCB5ID0gMTA7XG4gICAgICBjb25zdCBleHBlY3RUbyA9IHkgLSAwLjUgKiBhY2Nlc3NvcnMuZ2V0Vmlld0hlaWdodCgpO1xuICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldFJvd1Bvc2l0aW9uKS5tb2NrUmV0dXJuVmFsdWUoeyB5LCBoZWlnaHQ6IFNQQU5fSEVJR0hUIH0pO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsUGFzdChOYU4sIC0xKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZChzY3JvbGxUbykubW9jay5jYWxscykudG9FcXVhbChbW2V4cGVjdFRvXV0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Njcm9sbHMgZG93biB3aXRoIGRpcmVjdGlvbiBgMWAnLCAoKSA9PiB7XG4gICAgICBjb25zdCB5ID0gMTA7XG4gICAgICBjb25zdCB2aCA9IGFjY2Vzc29ycy5nZXRWaWV3SGVpZ2h0KCk7XG4gICAgICBjb25zdCBleHBlY3RUbyA9IHkgKyBTUEFOX0hFSUdIVCAtIDAuNSAqIHZoO1xuICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldFJvd1Bvc2l0aW9uKS5tb2NrUmV0dXJuVmFsdWUoeyB5LCBoZWlnaHQ6IFNQQU5fSEVJR0hUIH0pO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsUGFzdChOYU4sIDEpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKHNjcm9sbFRvKS5tb2NrLmNhbGxzKS50b0VxdWFsKFtbZXhwZWN0VG9dXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdfc2Nyb2xsVG9WaXNpYmxlU3BhbigpJywgKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGdldFJlZnMoc3BhbklEOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbeyByZWZUeXBlOiAnQ0hJTERfT0YnLCBzcGFuSUQgfV0gYXMgVHJhY2VTcGFuUmVmZXJlbmNlW107XG4gICAgfVxuICAgIGxldCBzY3JvbGxQYXN0TW9jazogamVzdC5Nb2NrO1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBzY3JvbGxQYXN0TW9jayA9IGplc3QuZm4oKTtcbiAgICAgIG1hbmFnZXIuX3Njcm9sbFBhc3QgPSBzY3JvbGxQYXN0TW9jaztcbiAgICB9KTtcbiAgICBpdCgndGhyb3dzIGlmIGFjY2Vzc29ycyBpcyBub3Qgc2V0JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KG1hbmFnZXIuX3Njcm9sbFRvVmlzaWJsZVNwYW4pLnRvVGhyb3coKTtcbiAgICB9KTtcbiAgICBpdCgnZXhpdHMgaWYgdGhlIHRyYWNlIGlzIG5vdCBzZXQnLCAoKSA9PiB7XG4gICAgICBtYW5hZ2VyLnNldFRyYWNlKG51bGwpO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbigxKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jay5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdkb2VzIG5vdGhpbmcgaWYgYWxyZWFkeSBhdCB0aGUgYm91bmRhcnknLCAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0VG9wUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUoMCk7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Qm90dG9tUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUodHJhY2Uuc3BhbnMubGVuZ3RoIC0gMSk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKC0xKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jay5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgwKTtcbiAgICAgIG1hbmFnZXIuX3Njcm9sbFRvVmlzaWJsZVNwYW4oMSk7XG4gICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2subW9jay5jYWxscy5sZW5ndGgpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnY2VudGVycyB0aGUgY3VycmVudCB0b3Agb3IgYm90dG9tIHNwYW4nLCAoKSA9PiB7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0VG9wUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUoNSk7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Qm90dG9tUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUoNSk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKC0xKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoNSwgLTEpO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbigxKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoNSwgMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2tpcHMgc3BhbnMgdGhhdCBhcmUgb3V0IG9mIHZpZXcnLCAoKSA9PiB7XG4gICAgICB0cmFjZS5zcGFuc1s0XS5zdGFydFRpbWUgPSB0cmFjZS5zdGFydFRpbWUgKyB0cmFjZS5kdXJhdGlvbiAqIDAuNTtcbiAgICAgIGFjY2Vzc29ycy5nZXRWaWV3UmFuZ2UgPSAoKSA9PiBbMC40LCAwLjZdO1xuICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldFRvcFJvd0luZGV4VmlzaWJsZSkubW9ja1JldHVyblZhbHVlKHRyYWNlLnNwYW5zLmxlbmd0aCAtIDEpO1xuICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldEJvdHRvbVJvd0luZGV4VmlzaWJsZSkubW9ja1JldHVyblZhbHVlKDApO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbigxKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoNCwgMSk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKC0xKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoNCwgLTEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NraXBzIHNwYW5zIHRoYXQgZG8gbm90IG1hdGNoIHRoZSB0ZXh0IHNlYXJjaCcsICgpID0+IHtcbiAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRUb3BSb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSh0cmFjZS5zcGFucy5sZW5ndGggLSAxKTtcbiAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRCb3R0b21Sb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSgwKTtcbiAgICAgIGFjY2Vzc29ycy5nZXRTZWFyY2hlZFNwYW5JRHMgPSAoKSA9PiBuZXcgU2V0KFt0cmFjZS5zcGFuc1s0XS5zcGFuSURdKTtcbiAgICAgIG1hbmFnZXIuX3Njcm9sbFRvVmlzaWJsZVNwYW4oMSk7XG4gICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2spLmxhc3RDYWxsZWRXaXRoKDQsIDEpO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbigtMSk7XG4gICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2spLmxhc3RDYWxsZWRXaXRoKDQsIC0xKTtcbiAgICB9KTtcblxuICAgIGl0KCdzY3JvbGxzIHRvIGJvdW5kYXJ5IHdoZW4gc2Nyb2xsaW5nIGF3YXkgZnJvbSBjbG9zZXN0IHNwYW5JRCBpbiBmaW5kTWF0Y2hlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNsb3NldEZpbmRNYXRjaGVzU3BhbklEID0gNDtcbiAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRUb3BSb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZShjbG9zZXRGaW5kTWF0Y2hlc1NwYW5JRCAtIDEpO1xuICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldEJvdHRvbVJvd0luZGV4VmlzaWJsZSkubW9ja1JldHVyblZhbHVlKGNsb3NldEZpbmRNYXRjaGVzU3BhbklEICsgMSk7XG4gICAgICBhY2Nlc3NvcnMuZ2V0U2VhcmNoZWRTcGFuSURzID0gKCkgPT4gbmV3IFNldChbdHJhY2Uuc3BhbnNbY2xvc2V0RmluZE1hdGNoZXNTcGFuSURdLnNwYW5JRF0pO1xuXG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKDEpO1xuICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCh0cmFjZS5zcGFucy5sZW5ndGggLSAxLCAxKTtcblxuICAgICAgbWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbigtMSk7XG4gICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2spLmxhc3RDYWxsZWRXaXRoKDAsIC0xKTtcbiAgICB9KTtcblxuICAgIGl0KCdzY3JvbGxzIHRvIGxhc3QgdmlzaWJsZSByb3cgd2hlbiBib3VuZGFyeSBpcyBoaWRkZW4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJlbnRPZkxhc3RSb3dXaXRoSGlkZGVuQ2hpbGRyZW5JbmRleCA9IHRyYWNlLnNwYW5zLmxlbmd0aCAtIDI7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Qm90dG9tUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUoMCk7XG4gICAgICBhY2Nlc3NvcnMuZ2V0Q29sbGFwc2VkQ2hpbGRyZW4gPSAoKSA9PiBuZXcgU2V0KFt0cmFjZS5zcGFuc1twYXJlbnRPZkxhc3RSb3dXaXRoSGlkZGVuQ2hpbGRyZW5JbmRleF0uc3BhbklEXSk7XG4gICAgICBhY2Nlc3NvcnMuZ2V0U2VhcmNoZWRTcGFuSURzID0gKCkgPT4gbmV3IFNldChbdHJhY2Uuc3BhbnNbMF0uc3BhbklEXSk7XG4gICAgICB0cmFjZS5zcGFuc1t0cmFjZS5zcGFucy5sZW5ndGggLSAxXS5yZWZlcmVuY2VzID0gZ2V0UmVmcyhcbiAgICAgICAgdHJhY2Uuc3BhbnNbcGFyZW50T2ZMYXN0Um93V2l0aEhpZGRlbkNoaWxkcmVuSW5kZXhdLnNwYW5JRFxuICAgICAgKTtcblxuICAgICAgbWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbigxKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgocGFyZW50T2ZMYXN0Um93V2l0aEhpZGRlbkNoaWxkcmVuSW5kZXgsIDEpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3Njcm9sbFRvTmV4dFZpc2libGVTcGFuKCkgYW5kIHNjcm9sbFRvUHJldlZpc2libGVTcGFuKCknLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgLy8gY2hhbmdlIHNwYW5zIHNvIDAgYW5kIDQgYXJlIHRvcC1sZXZlbCBhbmQgdGhlaXIgY2hpbGRyZW4gYXJlIGNvbGxhcHNlZFxuICAgICAgICBjb25zdCBzcGFucyA9IHRyYWNlLnNwYW5zO1xuICAgICAgICBsZXQgcGFyZW50SUQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BhbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBzd2l0Y2ggKGkpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgcGFyZW50SUQgPSBzcGFuc1tpXS5zcGFuSUQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgc3BhbnNbaV0ucmVmZXJlbmNlcyA9IGdldFJlZnMocGFyZW50SUQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBzZXQgd2hpY2ggc3BhbnMgYXJlIFwiaW4tdmlld1wiIGFuZCB3aGljaCBoYXZlIGNvbGxhcHNlZCBjaGlsZHJlblxuICAgICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0VG9wUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUodHJhY2Uuc3BhbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRCb3R0b21Sb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSgwKTtcbiAgICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldENvbGxhcHNlZENoaWxkcmVuKS5tb2NrUmV0dXJuVmFsdWUobmV3IFNldChbc3BhbnNbMF0uc3BhbklELCBzcGFuc1s0XS5zcGFuSURdKSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3NraXBzIHNwYW5zIHRoYXQgYXJlIGhpZGRlbiBiZWNhdXNlIHRoZWlyIHBhcmVudCBpcyBjb2xsYXBzZWQnLCAoKSA9PiB7XG4gICAgICAgIG1hbmFnZXIuc2Nyb2xsVG9OZXh0VmlzaWJsZVNwYW4oKTtcbiAgICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCg0LCAxKTtcbiAgICAgICAgbWFuYWdlci5zY3JvbGxUb1ByZXZWaXNpYmxlU3BhbigpO1xuICAgICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2spLmxhc3RDYWxsZWRXaXRoKDQsIC0xKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnaWdub3JlcyByZWZlcmVuY2VzIHdpdGggdW5rbm93biB0eXBlcycsICgpID0+IHtcbiAgICAgICAgLy8gbW9kaWZ5IHNwYW5zWzJdIHNvIHRoYXQgaXQgaGFzIGFuIHVua25vd24gcmVmVHlwZVxuICAgICAgICBjb25zdCBzcGFucyA9IHRyYWNlLnNwYW5zO1xuICAgICAgICBzcGFuc1syXS5yZWZlcmVuY2VzID0gW3sgcmVmVHlwZTogJ09USEVSJyB9XSBhcyB1bmtub3duIGFzIFRyYWNlU3BhblJlZmVyZW5jZVtdO1xuICAgICAgICBtYW5hZ2VyLnNjcm9sbFRvTmV4dFZpc2libGVTcGFuKCk7XG4gICAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoMiwgMSk7XG4gICAgICAgIG1hbmFnZXIuc2Nyb2xsVG9QcmV2VmlzaWJsZVNwYW4oKTtcbiAgICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCg0LCAtMSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ2hhbmRsZXMgbW9yZSB0aGFuIG9uZSBsZXZlbCBvZiBhbmNlc3RyeScsICgpID0+IHtcbiAgICAgICAgLy8gbW9kaWZ5IHNwYW5zWzJdIHNvIHRoYXQgaXQgaGFzIGFuIHVua25vd24gcmVmVHlwZVxuICAgICAgICBjb25zdCBzcGFucyA9IHRyYWNlLnNwYW5zO1xuICAgICAgICBzcGFuc1syXS5yZWZlcmVuY2VzID0gZ2V0UmVmcyhzcGFuc1sxXS5zcGFuSUQpO1xuICAgICAgICBtYW5hZ2VyLnNjcm9sbFRvTmV4dFZpc2libGVTcGFuKCk7XG4gICAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoNCwgMSk7XG4gICAgICAgIG1hbmFnZXIuc2Nyb2xsVG9QcmV2VmlzaWJsZVNwYW4oKTtcbiAgICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCg0LCAtMSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdzY3JvbGxUb0ZpcnN0VmlzaWJsZVNwYW4nLCAoKSA9PiB7XG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgamVzdC5zcHlPbihtYW5hZ2VyLCAnX3Njcm9sbFRvVmlzaWJsZVNwYW4nKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnY2FsbHMgX3Njcm9sbFRvVmlzaWJsZVNwYW4gc2VhcmNoaW5nIGRvd253YXJkcyBmcm9tIGZpcnN0IHNwYW4nLCAoKSA9PiB7XG4gICAgICAgIG1hbmFnZXIuc2Nyb2xsVG9GaXJzdFZpc2libGVTcGFuKCk7XG4gICAgICAgIGV4cGVjdChtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgxLCAwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc2Nyb2xsUGFnZURvd24oKSBhbmQgc2Nyb2xsUGFnZVVwKCknLCAoKSA9PiB7XG4gICAgaXQoJ3Njcm9sbHMgYnkgKy9+IHZpZXdIZWlnaHQgd2hlbiBpbnZva2VkJywgKCkgPT4ge1xuICAgICAgbWFuYWdlci5zY3JvbGxQYWdlRG93bigpO1xuICAgICAgZXhwZWN0KHNjcm9sbEJ5KS5sYXN0Q2FsbGVkV2l0aCgwLjk1ICogYWNjZXNzb3JzLmdldFZpZXdIZWlnaHQoKSwgdHJ1ZSk7XG4gICAgICBtYW5hZ2VyLnNjcm9sbFBhZ2VVcCgpO1xuICAgICAgZXhwZWN0KHNjcm9sbEJ5KS5sYXN0Q2FsbGVkV2l0aCgtMC45NSAqIGFjY2Vzc29ycy5nZXRWaWV3SGVpZ2h0KCksIHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2lzIGEgbm8tb3AgaWYgX2FjY2Vzc29ycyBvciBfc2Nyb2xsZXIgaXMgbm90IGRlZmluZWQnLCAoKSA9PiB7XG4gICAgICBtYW5hZ2VyLl9hY2Nlc3NvcnMgPSBudWxsO1xuICAgICAgbWFuYWdlci5zY3JvbGxQYWdlRG93bigpO1xuICAgICAgbWFuYWdlci5zY3JvbGxQYWdlVXAoKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZChzY3JvbGxCeSkubW9jay5jYWxscy5sZW5ndGgpLnRvQmUoMCk7XG4gICAgICBtYW5hZ2VyLl9hY2Nlc3NvcnMgPSBhY2Nlc3NvcnM7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxlciA9IG51bGw7XG4gICAgICBtYW5hZ2VyLnNjcm9sbFBhZ2VEb3duKCk7XG4gICAgICBtYW5hZ2VyLnNjcm9sbFBhZ2VVcCgpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKHNjcm9sbEJ5KS5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Rlc3Ryb3koKScsICgpID0+IHtcbiAgICBpdCgnZGlzcG9zZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QobWFuYWdlci5fdHJhY2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWFuYWdlci5fYWNjZXNzb3JzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG1hbmFnZXIuX3Njcm9sbGVyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgbWFuYWdlci5kZXN0cm95KCk7XG4gICAgICBleHBlY3QobWFuYWdlci5fdHJhY2UpLm5vdC50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG1hbmFnZXIuX2FjY2Vzc29ycykubm90LnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWFuYWdlci5fc2Nyb2xsZXIpLm5vdC50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQUEsSUFBSSxDQUFDQyxJQUFJLENBQUMsZUFBZSxDQUFDO0FB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