// Copyright (c) 2017 Uber Technologies, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

jest.mock('./Tween');
import Tween from './Tween';
import { scrollBy, scrollTo, cancel } from './scroll-page';

// keep track of instances, manually
// https://github.com/facebook/jest/issues/5019
var tweenInstances = [];
describe('scroll-by', function () {
  beforeEach(function () {
    window.scrollY = 100;
    tweenInstances.length = 0;
    jest.mocked(Tween).mockClear();
    jest.mocked(Tween).mockImplementation(function (opts) {
      var rv = {
        to: opts.to,
        onUpdate: opts.onUpdate,
        cancel: jest.fn(),
        getCurrent: jest.fn()
      };
      tweenInstances.push(rv);
      return rv;
    });
  });
  afterEach(function () {
    cancel();
  });
  describe('scrollBy()', function () {
    describe('when `appendToLast` is `false`', function () {
      it('scrolls from `window.scrollY` to `window.scrollY + yDelta`', function () {
        var yDelta = 10;
        scrollBy(yDelta);
        var spec = expect.objectContaining({
          to: window.scrollY + yDelta
        });
        expect(jest.mocked(Tween).mock.calls).toEqual([[spec]]);
      });
    });
    describe('when `appendToLast` is true', function () {
      it('is the same as `appendToLast === false` without an in-progress scroll', function () {
        var yDelta = 10;
        scrollBy(yDelta, true);
        expect(jest.mocked(Tween).mock.calls.length).toBe(1);
        scrollBy(yDelta, false);
        expect(jest.mocked(Tween).mock.calls[0]).toEqual(jest.mocked(Tween).mock.calls[1]);
      });
      it('is additive when an in-progress scroll is the same direction', function () {
        var yDelta = 10;
        var spec = expect.objectContaining({
          to: window.scrollY + 2 * yDelta
        });
        scrollBy(yDelta);
        scrollBy(yDelta, true);
        expect(jest.mocked(Tween).mock.calls.length).toBe(2);
        expect(jest.mocked(Tween).mock.calls[1]).toEqual([spec]);
      });
      it('ignores the in-progress scroll is the other direction', function () {
        var yDelta = 10;
        var spec = expect.objectContaining({
          to: window.scrollY - yDelta
        });
        scrollBy(yDelta);
        scrollBy(-yDelta, true);
        expect(jest.mocked(Tween).mock.calls.length).toBe(2);
        expect(jest.mocked(Tween).mock.calls[1]).toEqual([spec]);
      });
    });
  });
  describe('scrollTo', function () {
    it('scrolls to `y`', function () {
      var to = 10;
      var spec = expect.objectContaining({
        to: to
      });
      scrollTo(to);
      expect(jest.mocked(Tween).mock.calls).toEqual([[spec]]);
    });
    it('ignores the in-progress scroll', function () {
      var to = 10;
      var spec = expect.objectContaining({
        to: to
      });
      scrollTo(Math.random());
      scrollTo(to);
      expect(jest.mocked(Tween).mock.calls.length).toBe(2);
      expect(jest.mocked(Tween).mock.calls[1]).toEqual([spec]);
    });
  });
  describe('cancel', function () {
    it('cancels the in-progress scroll', function () {
      scrollTo(10);
      // there is now an in-progress tween
      expect(tweenInstances.length).toBe(1);
      var tw = tweenInstances[0];
      cancel();
      expect(jest.mocked(tw.cancel).mock.calls).toEqual([[]]);
    });
    it('is a noop if there is not an in-progress scroll', function () {
      scrollTo(10);
      // there is now an in-progress tween
      expect(tweenInstances.length).toBe(1);
      var tw = tweenInstances[0];
      cancel();
      expect(jest.mocked(tw.cancel).mock.calls).toEqual([[]]);
      jest.mocked(tw.cancel).mockReset();
      // now, we check to see if `cancel()` has an effect on the last created tween
      cancel();
      expect(jest.mocked(tw.cancel).mock.calls.length).toBe(0);
    });
  });
  describe('_onTweenUpdate', function () {
    var oldScrollTo;
    beforeEach(function () {
      oldScrollTo = window.scrollTo;
      window.scrollTo = jest.fn();
    });
    afterEach(function () {
      window.scrollTo = oldScrollTo;
    });
    it('scrolls to `value`', function () {
      var value = 123;
      // cause a `Tween` to be created to get a reference to _onTweenUpdate
      scrollTo(10);
      var onUpdate = tweenInstances[0].onUpdate;
      onUpdate == null || onUpdate({
        value: value,
        done: false
      });
      expect(jest.mocked(window.scrollTo).mock.calls.length).toBe(1);
      expect(jest.mocked(window.scrollTo).mock.calls[0][1]).toBe(value);
    });
    it('discards the in-progress scroll if the scroll is done', function () {
      // cause a `Tween` to be created to get a reference to _onTweenUpdate
      scrollTo(10);
      var _tweenInstances$ = tweenInstances[0],
        onUpdate = _tweenInstances$.onUpdate,
        twCancel = _tweenInstances$.cancel;
      onUpdate == null || onUpdate({
        value: 123,
        done: true
      });
      // if the tween is not discarded, `cancel()` will cancel it
      cancel();
      expect(jest.mocked(twCancel).mock.calls.length).toBe(0);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIlR3ZWVuIiwic2Nyb2xsQnkiLCJzY3JvbGxUbyIsImNhbmNlbCIsInR3ZWVuSW5zdGFuY2VzIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwid2luZG93Iiwic2Nyb2xsWSIsImxlbmd0aCIsIm1vY2tlZCIsIm1vY2tDbGVhciIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIm9wdHMiLCJydiIsInRvIiwib25VcGRhdGUiLCJmbiIsImdldEN1cnJlbnQiLCJwdXNoIiwiYWZ0ZXJFYWNoIiwiaXQiLCJ5RGVsdGEiLCJzcGVjIiwiZXhwZWN0Iiwib2JqZWN0Q29udGFpbmluZyIsImNhbGxzIiwidG9FcXVhbCIsInRvQmUiLCJNYXRoIiwicmFuZG9tIiwidHciLCJtb2NrUmVzZXQiLCJvbGRTY3JvbGxUbyIsInZhbHVlIiwiZG9uZSIsIl90d2Vlbkluc3RhbmNlcyQiLCJ0d0NhbmNlbCJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvc2Nyb2xsLXBhZ2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTcgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuamVzdC5tb2NrKCcuL1R3ZWVuJyk7XG5cbmltcG9ydCBUd2VlbiBmcm9tICcuL1R3ZWVuJztcbmltcG9ydCB7IHNjcm9sbEJ5LCBzY3JvbGxUbywgY2FuY2VsIH0gZnJvbSAnLi9zY3JvbGwtcGFnZSc7XG5cbi8vIGtlZXAgdHJhY2sgb2YgaW5zdGFuY2VzLCBtYW51YWxseVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2plc3QvaXNzdWVzLzUwMTlcbmNvbnN0IHR3ZWVuSW5zdGFuY2VzOiBUd2VlbltdID0gW107XG5cbmRlc2NyaWJlKCdzY3JvbGwtYnknLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHdpbmRvdy5zY3JvbGxZID0gMTAwO1xuICAgIHR3ZWVuSW5zdGFuY2VzLmxlbmd0aCA9IDA7XG4gICAgamVzdC5tb2NrZWQoVHdlZW4pLm1vY2tDbGVhcigpO1xuICAgIGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrSW1wbGVtZW50YXRpb24oKG9wdHMpID0+IHtcbiAgICAgIGNvbnN0IHJ2ID0geyB0bzogb3B0cy50bywgb25VcGRhdGU6IG9wdHMub25VcGRhdGUsIGNhbmNlbDogamVzdC5mbigpLCBnZXRDdXJyZW50OiBqZXN0LmZuKCkgfSBhcyB1bmtub3duIGFzIFR3ZWVuO1xuICAgICAgdHdlZW5JbnN0YW5jZXMucHVzaChydik7XG4gICAgICByZXR1cm4gcnY7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgY2FuY2VsKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzY3JvbGxCeSgpJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCd3aGVuIGBhcHBlbmRUb0xhc3RgIGlzIGBmYWxzZWAnLCAoKSA9PiB7XG4gICAgICBpdCgnc2Nyb2xscyBmcm9tIGB3aW5kb3cuc2Nyb2xsWWAgdG8gYHdpbmRvdy5zY3JvbGxZICsgeURlbHRhYCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgeURlbHRhID0gMTA7XG4gICAgICAgIHNjcm9sbEJ5KHlEZWx0YSk7XG4gICAgICAgIGNvbnN0IHNwZWMgPSBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IHRvOiB3aW5kb3cuc2Nyb2xsWSArIHlEZWx0YSB9KTtcbiAgICAgICAgZXhwZWN0KGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrLmNhbGxzKS50b0VxdWFsKFtbc3BlY11dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3doZW4gYGFwcGVuZFRvTGFzdGAgaXMgdHJ1ZScsICgpID0+IHtcbiAgICAgIGl0KCdpcyB0aGUgc2FtZSBhcyBgYXBwZW5kVG9MYXN0ID09PSBmYWxzZWAgd2l0aG91dCBhbiBpbi1wcm9ncmVzcyBzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHlEZWx0YSA9IDEwO1xuICAgICAgICBzY3JvbGxCeSh5RGVsdGEsIHRydWUpO1xuICAgICAgICBleHBlY3QoamVzdC5tb2NrZWQoVHdlZW4pLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgICBzY3JvbGxCeSh5RGVsdGEsIGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrLmNhbGxzWzBdKS50b0VxdWFsKGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrLmNhbGxzWzFdKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnaXMgYWRkaXRpdmUgd2hlbiBhbiBpbi1wcm9ncmVzcyBzY3JvbGwgaXMgdGhlIHNhbWUgZGlyZWN0aW9uJywgKCkgPT4ge1xuICAgICAgICBjb25zdCB5RGVsdGEgPSAxMDtcbiAgICAgICAgY29uc3Qgc3BlYyA9IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgdG86IHdpbmRvdy5zY3JvbGxZICsgMiAqIHlEZWx0YSB9KTtcbiAgICAgICAgc2Nyb2xsQnkoeURlbHRhKTtcbiAgICAgICAgc2Nyb2xsQnkoeURlbHRhLCB0cnVlKTtcbiAgICAgICAgZXhwZWN0KGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgyKTtcbiAgICAgICAgZXhwZWN0KGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrLmNhbGxzWzFdKS50b0VxdWFsKFtzcGVjXSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ2lnbm9yZXMgdGhlIGluLXByb2dyZXNzIHNjcm9sbCBpcyB0aGUgb3RoZXIgZGlyZWN0aW9uJywgKCkgPT4ge1xuICAgICAgICBjb25zdCB5RGVsdGEgPSAxMDtcbiAgICAgICAgY29uc3Qgc3BlYyA9IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgdG86IHdpbmRvdy5zY3JvbGxZIC0geURlbHRhIH0pO1xuICAgICAgICBzY3JvbGxCeSh5RGVsdGEpO1xuICAgICAgICBzY3JvbGxCeSgteURlbHRhLCB0cnVlKTtcbiAgICAgICAgZXhwZWN0KGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgyKTtcbiAgICAgICAgZXhwZWN0KGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrLmNhbGxzWzFdKS50b0VxdWFsKFtzcGVjXSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Njcm9sbFRvJywgKCkgPT4ge1xuICAgIGl0KCdzY3JvbGxzIHRvIGB5YCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvID0gMTA7XG4gICAgICBjb25zdCBzcGVjID0gZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyB0byB9KTtcbiAgICAgIHNjcm9sbFRvKHRvKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZChUd2VlbikubW9jay5jYWxscykudG9FcXVhbChbW3NwZWNdXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnaWdub3JlcyB0aGUgaW4tcHJvZ3Jlc3Mgc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgY29uc3QgdG8gPSAxMDtcbiAgICAgIGNvbnN0IHNwZWMgPSBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IHRvIH0pO1xuICAgICAgc2Nyb2xsVG8oTWF0aC5yYW5kb20oKSk7XG4gICAgICBzY3JvbGxUbyh0byk7XG4gICAgICBleHBlY3QoamVzdC5tb2NrZWQoVHdlZW4pLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKFR3ZWVuKS5tb2NrLmNhbGxzWzFdKS50b0VxdWFsKFtzcGVjXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjYW5jZWwnLCAoKSA9PiB7XG4gICAgaXQoJ2NhbmNlbHMgdGhlIGluLXByb2dyZXNzIHNjcm9sbCcsICgpID0+IHtcbiAgICAgIHNjcm9sbFRvKDEwKTtcbiAgICAgIC8vIHRoZXJlIGlzIG5vdyBhbiBpbi1wcm9ncmVzcyB0d2VlblxuICAgICAgZXhwZWN0KHR3ZWVuSW5zdGFuY2VzLmxlbmd0aCkudG9CZSgxKTtcbiAgICAgIGNvbnN0IHR3ID0gdHdlZW5JbnN0YW5jZXNbMF07XG4gICAgICBjYW5jZWwoKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZCh0dy5jYW5jZWwpLm1vY2suY2FsbHMpLnRvRXF1YWwoW1tdXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnaXMgYSBub29wIGlmIHRoZXJlIGlzIG5vdCBhbiBpbi1wcm9ncmVzcyBzY3JvbGwnLCAoKSA9PiB7XG4gICAgICBzY3JvbGxUbygxMCk7XG4gICAgICAvLyB0aGVyZSBpcyBub3cgYW4gaW4tcHJvZ3Jlc3MgdHdlZW5cbiAgICAgIGV4cGVjdCh0d2Vlbkluc3RhbmNlcy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBjb25zdCB0dyA9IHR3ZWVuSW5zdGFuY2VzWzBdO1xuICAgICAgY2FuY2VsKCk7XG4gICAgICBleHBlY3QoamVzdC5tb2NrZWQodHcuY2FuY2VsKS5tb2NrLmNhbGxzKS50b0VxdWFsKFtbXV0pO1xuICAgICAgamVzdC5tb2NrZWQodHcuY2FuY2VsKS5tb2NrUmVzZXQoKTtcbiAgICAgIC8vIG5vdywgd2UgY2hlY2sgdG8gc2VlIGlmIGBjYW5jZWwoKWAgaGFzIGFuIGVmZmVjdCBvbiB0aGUgbGFzdCBjcmVhdGVkIHR3ZWVuXG4gICAgICBjYW5jZWwoKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZCh0dy5jYW5jZWwpLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnX29uVHdlZW5VcGRhdGUnLCAoKSA9PiB7XG4gICAgbGV0IG9sZFNjcm9sbFRvOiB7IChvcHRpb25zPzogU2Nyb2xsVG9PcHRpb25zIHwgdW5kZWZpbmVkKTogdm9pZDsgKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB9O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBvbGRTY3JvbGxUbyA9IHdpbmRvdy5zY3JvbGxUbztcbiAgICAgIHdpbmRvdy5zY3JvbGxUbyA9IGplc3QuZm4oKTtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8gPSBvbGRTY3JvbGxUbztcbiAgICB9KTtcblxuICAgIGl0KCdzY3JvbGxzIHRvIGB2YWx1ZWAnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IDEyMztcbiAgICAgIC8vIGNhdXNlIGEgYFR3ZWVuYCB0byBiZSBjcmVhdGVkIHRvIGdldCBhIHJlZmVyZW5jZSB0byBfb25Ud2VlblVwZGF0ZVxuICAgICAgc2Nyb2xsVG8oMTApO1xuICAgICAgY29uc3QgeyBvblVwZGF0ZSB9ID0gdHdlZW5JbnN0YW5jZXNbMF07XG4gICAgICBvblVwZGF0ZT8uKHsgdmFsdWUsIGRvbmU6IGZhbHNlIH0pO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKHdpbmRvdy5zY3JvbGxUbykubW9jay5jYWxscy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoamVzdC5tb2NrZWQod2luZG93LnNjcm9sbFRvKS5tb2NrLmNhbGxzWzBdWzFdKS50b0JlKHZhbHVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkaXNjYXJkcyB0aGUgaW4tcHJvZ3Jlc3Mgc2Nyb2xsIGlmIHRoZSBzY3JvbGwgaXMgZG9uZScsICgpID0+IHtcbiAgICAgIC8vIGNhdXNlIGEgYFR3ZWVuYCB0byBiZSBjcmVhdGVkIHRvIGdldCBhIHJlZmVyZW5jZSB0byBfb25Ud2VlblVwZGF0ZVxuICAgICAgc2Nyb2xsVG8oMTApO1xuICAgICAgY29uc3QgeyBvblVwZGF0ZSwgY2FuY2VsOiB0d0NhbmNlbCB9ID0gdHdlZW5JbnN0YW5jZXNbMF07XG4gICAgICBvblVwZGF0ZT8uKHsgdmFsdWU6IDEyMywgZG9uZTogdHJ1ZSB9KTtcbiAgICAgIC8vIGlmIHRoZSB0d2VlbiBpcyBub3QgZGlzY2FyZGVkLCBgY2FuY2VsKClgIHdpbGwgY2FuY2VsIGl0XG4gICAgICBjYW5jZWwoKTtcbiAgICAgIGV4cGVjdChqZXN0Lm1vY2tlZCh0d0NhbmNlbCkubW9jay5jYWxscy5sZW5ndGgpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBQSxJQUFJLENBQUNDLElBQUksQ0FBQyxTQUFTLENBQUM7QUFFcEIsT0FBT0MsS0FBSyxNQUFNLFNBQVM7QUFDM0IsU0FBU0MsUUFBUSxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sUUFBUSxlQUFlOztBQUUxRDtBQUNBO0FBQ0EsSUFBTUMsY0FBdUIsR0FBRyxFQUFFO0FBRWxDQyxRQUFRLENBQUMsV0FBVyxFQUFFLFlBQU07RUFDMUJDLFVBQVUsQ0FBQyxZQUFNO0lBQ2ZDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLEdBQUc7SUFDcEJK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