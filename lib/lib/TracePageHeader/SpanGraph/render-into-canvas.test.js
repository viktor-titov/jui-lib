// Copyright (c) 2017 Uber Technologies, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import { range as _range } from 'lodash';
import renderIntoCanvas, { ITEM_ALPHA, MIN_ITEM_HEIGHT, MAX_TOTAL_HEIGHT, MIN_ITEM_WIDTH, MIN_TOTAL_HEIGHT, MAX_ITEM_HEIGHT } from './render-into-canvas';
var BG_COLOR = '#FFFFFF';
var getCanvasWidth = function getCanvasWidth() {
  return window.innerWidth * 2;
};
var getBgFillRect = function getBgFillRect(items) {
  return {
    fillStyle: BG_COLOR,
    height: !items || items.length < MIN_TOTAL_HEIGHT ? MIN_TOTAL_HEIGHT : Math.min(MAX_TOTAL_HEIGHT, items.length),
    width: getCanvasWidth(),
    x: 0,
    y: 0
  };
};
describe('renderIntoCanvas()', function () {
  var basicItem = {
    valueWidth: 100,
    valueOffset: 50,
    serviceName: 'some-name'
  };
  var CanvasContext = /*#__PURE__*/function () {
    function CanvasContext() {
      this.fillRectAccumulator = [];
      this.fillStyle = undefined;
      this.fillRectAccumulator = [];
    }
    var _proto = CanvasContext.prototype;
    _proto.fillRect = function fillRect(x, y, width, height) {
      var fillStyle = this.fillStyle;
      this.fillRectAccumulator.push({
        fillStyle: fillStyle,
        height: height,
        width: width,
        x: x,
        y: y
      });
    };
    return CanvasContext;
  }();
  var Canvas = /*#__PURE__*/function () {
    function Canvas() {
      this.contexts = [];
      this.height = NaN;
      this.width = NaN;
      this.getContext = jest.fn(this._getContext.bind(this));
    }
    var _proto2 = Canvas.prototype;
    _proto2._getContext = function _getContext() {
      var ctx = new CanvasContext();
      this.contexts.push(ctx);
      return ctx;
    };
    return Canvas;
  }();
  function getColorFactory() {
    var i = 0;
    var inputOutput = [];
    function getFakeColor(str) {
      var rv = [i, i, i];
      i++;
      inputOutput.push({
        input: str,
        output: rv.slice()
      });
      return rv;
    }
    getFakeColor.inputOutput = inputOutput;
    return getFakeColor;
  }
  it('sets the width', function () {
    var canvas = new Canvas();
    expect(canvas.width !== canvas.width).toBe(true);
    renderIntoCanvas(canvas, [basicItem], 150, getColorFactory(), BG_COLOR);
    expect(canvas.width).toBe(getCanvasWidth());
  });
  describe('when there are limited number of items', function () {
    it('sets the height', function () {
      var canvas = new Canvas();
      expect(canvas.height !== canvas.height).toBe(true);
      renderIntoCanvas(canvas, [basicItem], 150, getColorFactory(), BG_COLOR);
      expect(canvas.height).toBe(MIN_TOTAL_HEIGHT);
    });
    it('draws the background', function () {
      var expectedDrawing = [getBgFillRect()];
      var canvas = new Canvas();
      var items = [];
      var totalValueWidth = 4000;
      var getFillColor = getColorFactory();
      renderIntoCanvas(canvas, items, totalValueWidth, getFillColor, BG_COLOR);
      expect(canvas.getContext.mock.calls).toEqual([['2d', {
        alpha: false
      }]]);
      expect(canvas.contexts.length).toBe(1);
      expect(canvas.contexts[0].fillRectAccumulator).toEqual(expectedDrawing);
    });
    it('draws the map', function () {
      var totalValueWidth = 4000;
      var items = [{
        valueWidth: 50,
        valueOffset: 50,
        serviceName: 'service-name-0'
      }, {
        valueWidth: 100,
        valueOffset: 100,
        serviceName: 'service-name-1'
      }, {
        valueWidth: 150,
        valueOffset: 150,
        serviceName: 'service-name-2'
      }];
      var expectedColors = [{
        input: items[0].serviceName,
        output: [0, 0, 0]
      }, {
        input: items[1].serviceName,
        output: [1, 1, 1]
      }, {
        input: items[2].serviceName,
        output: [2, 2, 2]
      }];
      var cHeight = items.length < MIN_TOTAL_HEIGHT ? MIN_TOTAL_HEIGHT : Math.min(items.length, MAX_TOTAL_HEIGHT);
      var expectedDrawings = [getBgFillRect()].concat(items.map(function (item, i) {
        var valueWidth = item.valueWidth,
          valueOffset = item.valueOffset;
        var color = expectedColors[i].output;
        var fillStyle = "rgba(" + color.concat(ITEM_ALPHA).join() + ")";
        var height = Math.min(MAX_ITEM_HEIGHT, Math.max(MIN_ITEM_HEIGHT, cHeight / items.length));
        var width = valueWidth / totalValueWidth * getCanvasWidth();
        var x = valueOffset / totalValueWidth * getCanvasWidth();
        var y = cHeight / items.length * i;
        return {
          fillStyle: fillStyle,
          height: height,
          width: width,
          x: x,
          y: y
        };
      }));
      var canvas = new Canvas();
      var getFillColor = getColorFactory();
      renderIntoCanvas(canvas, items, totalValueWidth, getFillColor, BG_COLOR);
      expect(getFillColor.inputOutput).toEqual(expectedColors);
      expect(canvas.getContext.mock.calls).toEqual([['2d', {
        alpha: false
      }]]);
      expect(canvas.contexts.length).toBe(1);
      expect(canvas.contexts[0].fillRectAccumulator).toEqual(expectedDrawings);
    });
  });
  describe('when there are many items', function () {
    it('sets the height when there are many items', function () {
      var canvas = new Canvas();
      var items = [];
      for (var i = 0; i < MIN_TOTAL_HEIGHT + 1; i++) {
        items.push(basicItem);
      }
      expect(canvas.height !== canvas.height).toBe(true);
      renderIntoCanvas(canvas, items, 150, getColorFactory(), BG_COLOR);
      expect(canvas.height).toBe(items.length);
    });
    it('draws the map', function () {
      var totalValueWidth = 4000;
      var items = _range(MIN_TOTAL_HEIGHT * 10).map(function (i) {
        return {
          valueWidth: i,
          valueOffset: i,
          serviceName: "service-name-" + i
        };
      });
      var expectedColors = items.map(function (item, i) {
        return {
          input: item.serviceName,
          output: [i, i, i]
        };
      });
      var expectedDrawings = [getBgFillRect(items)].concat(items.map(function (item, i) {
        var valueWidth = item.valueWidth,
          valueOffset = item.valueOffset;
        var color = expectedColors[i].output;
        var fillStyle = "rgba(" + color.concat(ITEM_ALPHA).join() + ")";
        var height = MIN_ITEM_HEIGHT;
        var width = Math.max(MIN_ITEM_WIDTH, valueWidth / totalValueWidth * getCanvasWidth());
        var x = valueOffset / totalValueWidth * getCanvasWidth();
        var y = MAX_TOTAL_HEIGHT / items.length * i;
        return {
          fillStyle: fillStyle,
          height: height,
          width: width,
          x: x,
          y: y
        };
      }));
      var canvas = new Canvas();
      var getFillColor = getColorFactory();
      renderIntoCanvas(canvas, items, totalValueWidth, getFillColor, BG_COLOR);
      expect(getFillColor.inputOutput).toEqual(expectedColors);
      expect(canvas.getContext.mock.calls).toEqual([['2d', {
        alpha: false
      }]]);
      expect(canvas.contexts.length).toBe(1);
      expect(canvas.contexts[0].fillRectAccumulator).toEqual(expectedDrawings);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyYW5nZSIsIl9yYW5nZSIsInJlbmRlckludG9DYW52YXMiLCJJVEVNX0FMUEhBIiwiTUlOX0lURU1fSEVJR0hUIiwiTUFYX1RPVEFMX0hFSUdIVCIsIk1JTl9JVEVNX1dJRFRIIiwiTUlOX1RPVEFMX0hFSUdIVCIsIk1BWF9JVEVNX0hFSUdIVCIsIkJHX0NPTE9SIiwiZ2V0Q2FudmFzV2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZ2V0QmdGaWxsUmVjdCIsIml0ZW1zIiwiZmlsbFN0eWxlIiwiaGVpZ2h0IiwibGVuZ3RoIiwiTWF0aCIsIm1pbiIsIndpZHRoIiwieCIsInkiLCJkZXNjcmliZSIsImJhc2ljSXRlbSIsInZhbHVlV2lkdGgiLCJ2YWx1ZU9mZnNldCIsInNlcnZpY2VOYW1lIiwiQ2FudmFzQ29udGV4dCIsImZpbGxSZWN0QWNjdW11bGF0b3IiLCJ1bmRlZmluZWQiLCJfcHJvdG8iLCJwcm90b3R5cGUiLCJmaWxsUmVjdCIsInB1c2giLCJDYW52YXMiLCJjb250ZXh0cyIsIk5hTiIsImdldENvbnRleHQiLCJqZXN0IiwiZm4iLCJfZ2V0Q29udGV4dCIsImJpbmQiLCJfcHJvdG8yIiwiY3R4IiwiZ2V0Q29sb3JGYWN0b3J5IiwiaSIsImlucHV0T3V0cHV0IiwiZ2V0RmFrZUNvbG9yIiwic3RyIiwicnYiLCJpbnB1dCIsIm91dHB1dCIsInNsaWNlIiwiaXQiLCJjYW52YXMiLCJleHBlY3QiLCJ0b0JlIiwiZXhwZWN0ZWREcmF3aW5nIiwidG90YWxWYWx1ZVdpZHRoIiwiZ2V0RmlsbENvbG9yIiwibW9jayIsImNhbGxzIiwidG9FcXVhbCIsImFscGhhIiwiZXhwZWN0ZWRDb2xvcnMiLCJjSGVpZ2h0IiwiZXhwZWN0ZWREcmF3aW5ncyIsImNvbmNhdCIsIm1hcCIsIml0ZW0iLCJjb2xvciIsImpvaW4iLCJtYXgiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL1RyYWNlUGFnZUhlYWRlci9TcGFuR3JhcGgvcmVuZGVyLWludG8tY2FudmFzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3IFViZXIgVGVjaG5vbG9naWVzLCBJbmMuXG4vL1xuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG5cbmltcG9ydCB7IHJhbmdlIGFzIF9yYW5nZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCByZW5kZXJJbnRvQ2FudmFzLCB7XG4gIElURU1fQUxQSEEsXG4gIE1JTl9JVEVNX0hFSUdIVCxcbiAgTUFYX1RPVEFMX0hFSUdIVCxcbiAgTUlOX0lURU1fV0lEVEgsXG4gIE1JTl9UT1RBTF9IRUlHSFQsXG4gIE1BWF9JVEVNX0hFSUdIVCxcbn0gZnJvbSAnLi9yZW5kZXItaW50by1jYW52YXMnO1xuXG5jb25zdCBCR19DT0xPUiA9ICcjRkZGRkZGJztcblxuY29uc3QgZ2V0Q2FudmFzV2lkdGggPSAoKSA9PiB3aW5kb3cuaW5uZXJXaWR0aCAqIDI7XG5jb25zdCBnZXRCZ0ZpbGxSZWN0ID0gKGl0ZW1zPzogQXJyYXk8eyB2YWx1ZVdpZHRoOiBudW1iZXI7IHZhbHVlT2Zmc2V0OiBudW1iZXI7IHNlcnZpY2VOYW1lOiBzdHJpbmcgfT4pID0+ICh7XG4gIGZpbGxTdHlsZTogQkdfQ09MT1IsXG4gIGhlaWdodDogIWl0ZW1zIHx8IGl0ZW1zLmxlbmd0aCA8IE1JTl9UT1RBTF9IRUlHSFQgPyBNSU5fVE9UQUxfSEVJR0hUIDogTWF0aC5taW4oTUFYX1RPVEFMX0hFSUdIVCwgaXRlbXMubGVuZ3RoKSxcbiAgd2lkdGg6IGdldENhbnZhc1dpZHRoKCksXG4gIHg6IDAsXG4gIHk6IDAsXG59KTtcblxuZGVzY3JpYmUoJ3JlbmRlckludG9DYW52YXMoKScsICgpID0+IHtcbiAgY29uc3QgYmFzaWNJdGVtID0geyB2YWx1ZVdpZHRoOiAxMDAsIHZhbHVlT2Zmc2V0OiA1MCwgc2VydmljZU5hbWU6ICdzb21lLW5hbWUnIH07XG5cbiAgY2xhc3MgQ2FudmFzQ29udGV4dCB7XG4gICAgZmlsbFN0eWxlOiB1bmRlZmluZWQ7XG4gICAgZmlsbFJlY3RBY2N1bXVsYXRvcjogQXJyYXk8eyBmaWxsU3R5bGU6IHVuZGVmaW5lZDsgaGVpZ2h0OiBudW1iZXI7IHdpZHRoOiBudW1iZXI7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0+ID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHRoaXMuZmlsbFN0eWxlID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5maWxsUmVjdEFjY3VtdWxhdG9yID0gW107XG4gICAgfVxuXG4gICAgZmlsbFJlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICBjb25zdCBmaWxsU3R5bGUgPSB0aGlzLmZpbGxTdHlsZTtcbiAgICAgIHRoaXMuZmlsbFJlY3RBY2N1bXVsYXRvci5wdXNoKHtcbiAgICAgICAgZmlsbFN0eWxlLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIHdpZHRoLFxuICAgICAgICB4LFxuICAgICAgICB5LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY2xhc3MgQ2FudmFzIHtcbiAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICB3aWR0aDogbnVtYmVyO1xuICAgIGNvbnRleHRzOiBDYW52YXNDb250ZXh0W107XG4gICAgZ2V0Q29udGV4dDogamVzdC5Nb2NrO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICB0aGlzLmNvbnRleHRzID0gW107XG4gICAgICB0aGlzLmhlaWdodCA9IE5hTjtcbiAgICAgIHRoaXMud2lkdGggPSBOYU47XG4gICAgICB0aGlzLmdldENvbnRleHQgPSBqZXN0LmZuKHRoaXMuX2dldENvbnRleHQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgX2dldENvbnRleHQoKSB7XG4gICAgICBjb25zdCBjdHggPSBuZXcgQ2FudmFzQ29udGV4dCgpO1xuICAgICAgdGhpcy5jb250ZXh0cy5wdXNoKGN0eCk7XG4gICAgICByZXR1cm4gY3R4O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvbG9yRmFjdG9yeSgpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgY29uc3QgaW5wdXRPdXRwdXQ6IEFycmF5PHsgaW5wdXQ6IHN0cmluZzsgb3V0cHV0OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gfT4gPSBbXTtcbiAgICBmdW5jdGlvbiBnZXRGYWtlQ29sb3Ioc3RyOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IHJ2OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbaSwgaSwgaV07XG4gICAgICBpKys7XG4gICAgICBpbnB1dE91dHB1dC5wdXNoKHtcbiAgICAgICAgaW5wdXQ6IHN0cixcbiAgICAgICAgb3V0cHV0OiBydi5zbGljZSgpIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJ2O1xuICAgIH1cbiAgICBnZXRGYWtlQ29sb3IuaW5wdXRPdXRwdXQgPSBpbnB1dE91dHB1dDtcbiAgICByZXR1cm4gZ2V0RmFrZUNvbG9yO1xuICB9XG5cbiAgaXQoJ3NldHMgdGhlIHdpZHRoJywgKCkgPT4ge1xuICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBDYW52YXMoKTtcbiAgICBleHBlY3QoY2FudmFzLndpZHRoICE9PSBjYW52YXMud2lkdGgpLnRvQmUodHJ1ZSk7XG4gICAgcmVuZGVySW50b0NhbnZhcyhjYW52YXMgYXMgdW5rbm93biBhcyBIVE1MQ2FudmFzRWxlbWVudCwgW2Jhc2ljSXRlbV0sIDE1MCwgZ2V0Q29sb3JGYWN0b3J5KCksIEJHX0NPTE9SKTtcbiAgICBleHBlY3QoY2FudmFzLndpZHRoKS50b0JlKGdldENhbnZhc1dpZHRoKCkpO1xuICB9KTtcblxuICBkZXNjcmliZSgnd2hlbiB0aGVyZSBhcmUgbGltaXRlZCBudW1iZXIgb2YgaXRlbXMnLCAoKSA9PiB7XG4gICAgaXQoJ3NldHMgdGhlIGhlaWdodCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBDYW52YXMoKTtcbiAgICAgIGV4cGVjdChjYW52YXMuaGVpZ2h0ICE9PSBjYW52YXMuaGVpZ2h0KS50b0JlKHRydWUpO1xuICAgICAgcmVuZGVySW50b0NhbnZhcyhjYW52YXMgYXMgdW5rbm93biBhcyBIVE1MQ2FudmFzRWxlbWVudCwgW2Jhc2ljSXRlbV0sIDE1MCwgZ2V0Q29sb3JGYWN0b3J5KCksIEJHX0NPTE9SKTtcbiAgICAgIGV4cGVjdChjYW52YXMuaGVpZ2h0KS50b0JlKE1JTl9UT1RBTF9IRUlHSFQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RyYXdzIHRoZSBiYWNrZ3JvdW5kJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXhwZWN0ZWREcmF3aW5nID0gW2dldEJnRmlsbFJlY3QoKV07XG4gICAgICBjb25zdCBjYW52YXMgPSBuZXcgQ2FudmFzKCk7XG4gICAgICBjb25zdCBpdGVtczogQXJyYXk8eyB2YWx1ZVdpZHRoOiBudW1iZXI7IHZhbHVlT2Zmc2V0OiBudW1iZXI7IHNlcnZpY2VOYW1lOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAgIGNvbnN0IHRvdGFsVmFsdWVXaWR0aCA9IDQwMDA7XG4gICAgICBjb25zdCBnZXRGaWxsQ29sb3IgPSBnZXRDb2xvckZhY3RvcnkoKTtcbiAgICAgIHJlbmRlckludG9DYW52YXMoY2FudmFzIGFzIHVua25vd24gYXMgSFRNTENhbnZhc0VsZW1lbnQsIGl0ZW1zLCB0b3RhbFZhbHVlV2lkdGgsIGdldEZpbGxDb2xvciwgQkdfQ09MT1IpO1xuICAgICAgZXhwZWN0KChjYW52YXMuZ2V0Q29udGV4dCBhcyBqZXN0Lk1vY2spLm1vY2suY2FsbHMpLnRvRXF1YWwoW1snMmQnLCB7IGFscGhhOiBmYWxzZSB9XV0pO1xuICAgICAgZXhwZWN0KGNhbnZhcy5jb250ZXh0cy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoY2FudmFzLmNvbnRleHRzWzBdLmZpbGxSZWN0QWNjdW11bGF0b3IpLnRvRXF1YWwoZXhwZWN0ZWREcmF3aW5nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkcmF3cyB0aGUgbWFwJywgKCkgPT4ge1xuICAgICAgY29uc3QgdG90YWxWYWx1ZVdpZHRoID0gNDAwMDtcbiAgICAgIGNvbnN0IGl0ZW1zID0gW1xuICAgICAgICB7IHZhbHVlV2lkdGg6IDUwLCB2YWx1ZU9mZnNldDogNTAsIHNlcnZpY2VOYW1lOiAnc2VydmljZS1uYW1lLTAnIH0sXG4gICAgICAgIHsgdmFsdWVXaWR0aDogMTAwLCB2YWx1ZU9mZnNldDogMTAwLCBzZXJ2aWNlTmFtZTogJ3NlcnZpY2UtbmFtZS0xJyB9LFxuICAgICAgICB7IHZhbHVlV2lkdGg6IDE1MCwgdmFsdWVPZmZzZXQ6IDE1MCwgc2VydmljZU5hbWU6ICdzZXJ2aWNlLW5hbWUtMicgfSxcbiAgICAgIF07XG4gICAgICBjb25zdCBleHBlY3RlZENvbG9ycyA9IFtcbiAgICAgICAgeyBpbnB1dDogaXRlbXNbMF0uc2VydmljZU5hbWUsIG91dHB1dDogWzAsIDAsIDBdIH0sXG4gICAgICAgIHsgaW5wdXQ6IGl0ZW1zWzFdLnNlcnZpY2VOYW1lLCBvdXRwdXQ6IFsxLCAxLCAxXSB9LFxuICAgICAgICB7IGlucHV0OiBpdGVtc1syXS5zZXJ2aWNlTmFtZSwgb3V0cHV0OiBbMiwgMiwgMl0gfSxcbiAgICAgIF07XG4gICAgICBjb25zdCBjSGVpZ2h0ID0gaXRlbXMubGVuZ3RoIDwgTUlOX1RPVEFMX0hFSUdIVCA/IE1JTl9UT1RBTF9IRUlHSFQgOiBNYXRoLm1pbihpdGVtcy5sZW5ndGgsIE1BWF9UT1RBTF9IRUlHSFQpO1xuXG4gICAgICBjb25zdCBleHBlY3RlZERyYXdpbmdzID0gW1xuICAgICAgICBnZXRCZ0ZpbGxSZWN0KCksXG4gICAgICAgIC4uLml0ZW1zLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWVXaWR0aCwgdmFsdWVPZmZzZXQgfSA9IGl0ZW07XG4gICAgICAgICAgY29uc3QgY29sb3IgPSBleHBlY3RlZENvbG9yc1tpXS5vdXRwdXQ7XG4gICAgICAgICAgY29uc3QgZmlsbFN0eWxlID0gYHJnYmEoJHtjb2xvci5jb25jYXQoSVRFTV9BTFBIQSkuam9pbigpfSlgO1xuICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWluKE1BWF9JVEVNX0hFSUdIVCwgTWF0aC5tYXgoTUlOX0lURU1fSEVJR0hULCBjSGVpZ2h0IC8gaXRlbXMubGVuZ3RoKSk7XG4gICAgICAgICAgY29uc3Qgd2lkdGggPSAodmFsdWVXaWR0aCAvIHRvdGFsVmFsdWVXaWR0aCkgKiBnZXRDYW52YXNXaWR0aCgpO1xuICAgICAgICAgIGNvbnN0IHggPSAodmFsdWVPZmZzZXQgLyB0b3RhbFZhbHVlV2lkdGgpICogZ2V0Q2FudmFzV2lkdGgoKTtcbiAgICAgICAgICBjb25zdCB5ID0gKGNIZWlnaHQgLyBpdGVtcy5sZW5ndGgpICogaTtcbiAgICAgICAgICByZXR1cm4geyBmaWxsU3R5bGUsIGhlaWdodCwgd2lkdGgsIHgsIHkgfTtcbiAgICAgICAgfSksXG4gICAgICBdO1xuICAgICAgY29uc3QgY2FudmFzID0gbmV3IENhbnZhcygpO1xuICAgICAgY29uc3QgZ2V0RmlsbENvbG9yID0gZ2V0Q29sb3JGYWN0b3J5KCk7XG4gICAgICByZW5kZXJJbnRvQ2FudmFzKGNhbnZhcyBhcyB1bmtub3duIGFzIEhUTUxDYW52YXNFbGVtZW50LCBpdGVtcywgdG90YWxWYWx1ZVdpZHRoLCBnZXRGaWxsQ29sb3IsIEJHX0NPTE9SKTtcbiAgICAgIGV4cGVjdChnZXRGaWxsQ29sb3IuaW5wdXRPdXRwdXQpLnRvRXF1YWwoZXhwZWN0ZWRDb2xvcnMpO1xuICAgICAgZXhwZWN0KGNhbnZhcy5nZXRDb250ZXh0Lm1vY2suY2FsbHMpLnRvRXF1YWwoW1snMmQnLCB7IGFscGhhOiBmYWxzZSB9XV0pO1xuICAgICAgZXhwZWN0KGNhbnZhcy5jb250ZXh0cy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoY2FudmFzLmNvbnRleHRzWzBdLmZpbGxSZWN0QWNjdW11bGF0b3IpLnRvRXF1YWwoZXhwZWN0ZWREcmF3aW5ncyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd3aGVuIHRoZXJlIGFyZSBtYW55IGl0ZW1zJywgKCkgPT4ge1xuICAgIGl0KCdzZXRzIHRoZSBoZWlnaHQgd2hlbiB0aGVyZSBhcmUgbWFueSBpdGVtcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBDYW52YXMoKTtcbiAgICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1JTl9UT1RBTF9IRUlHSFQgKyAxOyBpKyspIHtcbiAgICAgICAgaXRlbXMucHVzaChiYXNpY0l0ZW0pO1xuICAgICAgfVxuICAgICAgZXhwZWN0KGNhbnZhcy5oZWlnaHQgIT09IGNhbnZhcy5oZWlnaHQpLnRvQmUodHJ1ZSk7XG4gICAgICByZW5kZXJJbnRvQ2FudmFzKGNhbnZhcyBhcyB1bmtub3duIGFzIEhUTUxDYW52YXNFbGVtZW50LCBpdGVtcywgMTUwLCBnZXRDb2xvckZhY3RvcnkoKSwgQkdfQ09MT1IpO1xuICAgICAgZXhwZWN0KGNhbnZhcy5oZWlnaHQpLnRvQmUoaXRlbXMubGVuZ3RoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkcmF3cyB0aGUgbWFwJywgKCkgPT4ge1xuICAgICAgY29uc3QgdG90YWxWYWx1ZVdpZHRoID0gNDAwMDtcbiAgICAgIGNvbnN0IGl0ZW1zID0gX3JhbmdlKE1JTl9UT1RBTF9IRUlHSFQgKiAxMCkubWFwKChpKSA9PiAoe1xuICAgICAgICB2YWx1ZVdpZHRoOiBpLFxuICAgICAgICB2YWx1ZU9mZnNldDogaSxcbiAgICAgICAgc2VydmljZU5hbWU6IGBzZXJ2aWNlLW5hbWUtJHtpfWAsXG4gICAgICB9KSk7XG4gICAgICBjb25zdCBleHBlY3RlZENvbG9ycyA9IGl0ZW1zLm1hcCgoaXRlbSwgaSkgPT4gKHtcbiAgICAgICAgaW5wdXQ6IGl0ZW0uc2VydmljZU5hbWUsXG4gICAgICAgIG91dHB1dDogW2ksIGksIGldLFxuICAgICAgfSkpO1xuICAgICAgY29uc3QgZXhwZWN0ZWREcmF3aW5ncyA9IFtcbiAgICAgICAgZ2V0QmdGaWxsUmVjdChpdGVtcyksXG4gICAgICAgIC4uLml0ZW1zLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWVXaWR0aCwgdmFsdWVPZmZzZXQgfSA9IGl0ZW07XG4gICAgICAgICAgY29uc3QgY29sb3IgPSBleHBlY3RlZENvbG9yc1tpXS5vdXRwdXQ7XG4gICAgICAgICAgY29uc3QgZmlsbFN0eWxlID0gYHJnYmEoJHtjb2xvci5jb25jYXQoSVRFTV9BTFBIQSkuam9pbigpfSlgO1xuICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1JTl9JVEVNX0hFSUdIVDtcbiAgICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KE1JTl9JVEVNX1dJRFRILCAodmFsdWVXaWR0aCAvIHRvdGFsVmFsdWVXaWR0aCkgKiBnZXRDYW52YXNXaWR0aCgpKTtcbiAgICAgICAgICBjb25zdCB4ID0gKHZhbHVlT2Zmc2V0IC8gdG90YWxWYWx1ZVdpZHRoKSAqIGdldENhbnZhc1dpZHRoKCk7XG4gICAgICAgICAgY29uc3QgeSA9IChNQVhfVE9UQUxfSEVJR0hUIC8gaXRlbXMubGVuZ3RoKSAqIGk7XG4gICAgICAgICAgcmV0dXJuIHsgZmlsbFN0eWxlLCBoZWlnaHQsIHdpZHRoLCB4LCB5IH07XG4gICAgICAgIH0pLFxuICAgICAgXTtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IG5ldyBDYW52YXMoKTtcbiAgICAgIGNvbnN0IGdldEZpbGxDb2xvciA9IGdldENvbG9yRmFjdG9yeSgpO1xuICAgICAgcmVuZGVySW50b0NhbnZhcyhjYW52YXMgYXMgdW5rbm93biBhcyBIVE1MQ2FudmFzRWxlbWVudCwgaXRlbXMsIHRvdGFsVmFsdWVXaWR0aCwgZ2V0RmlsbENvbG9yLCBCR19DT0xPUik7XG4gICAgICBleHBlY3QoZ2V0RmlsbENvbG9yLmlucHV0T3V0cHV0KS50b0VxdWFsKGV4cGVjdGVkQ29sb3JzKTtcbiAgICAgIGV4cGVjdCgoY2FudmFzLmdldENvbnRleHQgYXMgamVzdC5Nb2NrKS5tb2NrLmNhbGxzKS50b0VxdWFsKFtbJzJkJywgeyBhbHBoYTogZmFsc2UgfV1dKTtcbiAgICAgIGV4cGVjdChjYW52YXMuY29udGV4dHMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGNhbnZhcy5jb250ZXh0c1swXS5maWxsUmVjdEFjY3VtdWxhdG9yKS50b0VxdWFsKGV4cGVjdGVkRHJhd2luZ3MpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTQSxLQUFLLElBQUlDLE1BQU0sUUFBUSxRQUFRO0FBRXhDLE9BQU9DLGdCQUFnQixJQUNyQkMsVUFBVSxFQUNWQyxlQUFlLEVB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