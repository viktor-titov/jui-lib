// Copyright (c) 2017 Uber Technologies, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import { createTheme } from '@grafana/data';
import { colors } from '@grafana/ui';
import { getColorByKey, getFilteredColors, clear } from './color-generator';
var colorsToFilter = [].concat(colors);
var theme = createTheme();
it('gives the same color for the same key', function () {
  clear(theme);
  var colorOne = getColorByKey('serviceA', createTheme());
  var colorTwo = getColorByKey('serviceA', createTheme());
  expect(colorOne).toBe(colorTwo);
});
it('gives different colors for each key', function () {
  clear(theme);
  var colorOne = getColorByKey('serviceA', createTheme());
  var colorTwo = getColorByKey('serviceB', createTheme());
  expect(colorOne).not.toBe(colorTwo);
});
it('should not allow red', function () {
  expect(colorsToFilter.indexOf('#E24D42')).toBe(4);
  expect(colorsToFilter.indexOf('#BF1B00')).toBe(28);
  var filteredColors = getFilteredColors(colorsToFilter, createTheme());
  expect(filteredColors.indexOf('#E24D42')).toBe(-1);
  expect(filteredColors.indexOf('#BF1B00')).toBe(-1);
});
it('should not allow colors with a contrast ratio < 3 in light mode', function () {
  expect(colorsToFilter.indexOf('#7EB26D')).toBe(0);
  expect(colorsToFilter.indexOf('#EAB839')).toBe(1);
  var filteredColors = getFilteredColors(colorsToFilter, createTheme({
    colors: {
      mode: 'light'
    }
  }));
  expect(filteredColors.indexOf('#7EB26D')).toBe(-1);
  expect(filteredColors.indexOf('#EAB839')).toBe(-1);
});
it('should not allow colors with a contrast ratio < 3 in dark mode', function () {
  expect(colorsToFilter.indexOf('#890F02')).toBe(11);
  expect(colorsToFilter.indexOf('#0A437C')).toBe(12);
  var filteredColors = getFilteredColors(colorsToFilter, createTheme({
    colors: {
      mode: 'dark'
    }
  }));
  expect(filteredColors.indexOf('#890F02')).toBe(-1);
  expect(filteredColors.indexOf('#0A437C')).toBe(-1);
});
it('should not allow a color that is the same as the previous color', function () {
  clear(theme);
  var colorOne = getColorByKey('random4', theme); // #447EBC
  var colorTwo = getColorByKey('random17', theme); // #447EBC
  expect(colorOne).not.toBe(colorTwo);
  expect(colorOne).toBe('#447EBC');
  expect(colorTwo).toBe('#B7DBAB');
});
it('should not allow a color that looks similar to the previous color', function () {
  theme = createTheme({
    colors: {
      mode: 'light'
    }
  });
  clear(theme);
  var colorOne = getColorByKey('random9', theme); // #58140C
  var colorTwo = getColorByKey('random18', theme); // #511749
  expect(colorOne).toBe('#58140C');
  // #1F78C1 is the next color that has a contrast ratio >= 3 for the current theme
  expect(colorTwo).toBe('#1F78C1');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVUaGVtZSIsImNvbG9ycyIsImdldENvbG9yQnlLZXkiLCJnZXRGaWx0ZXJlZENvbG9ycyIsImNsZWFyIiwiY29sb3JzVG9GaWx0ZXIiLCJjb25jYXQiLCJ0aGVtZSIsIml0IiwiY29sb3JPbmUiLCJjb2xvclR3byIsImV4cGVjdCIsInRvQmUiLCJub3QiLCJpbmRleE9mIiwiZmlsdGVyZWRDb2xvcnMiLCJtb2RlIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL2NvbG9yLWdlbmVyYXRvci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNyBVYmVyIFRlY2hub2xvZ2llcywgSW5jLlxuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG5pbXBvcnQgeyBjcmVhdGVUaGVtZSB9IGZyb20gJ0BncmFmYW5hL2RhdGEnO1xuaW1wb3J0IHsgY29sb3JzIH0gZnJvbSAnQGdyYWZhbmEvdWknO1xuXG5pbXBvcnQgeyBnZXRDb2xvckJ5S2V5LCBnZXRGaWx0ZXJlZENvbG9ycywgY2xlYXIgfSBmcm9tICcuL2NvbG9yLWdlbmVyYXRvcic7XG5cbmNvbnN0IGNvbG9yc1RvRmlsdGVyID0gWy4uLmNvbG9yc107XG5sZXQgdGhlbWUgPSBjcmVhdGVUaGVtZSgpO1xuXG5pdCgnZ2l2ZXMgdGhlIHNhbWUgY29sb3IgZm9yIHRoZSBzYW1lIGtleScsICgpID0+IHtcbiAgY2xlYXIodGhlbWUpO1xuICBjb25zdCBjb2xvck9uZSA9IGdldENvbG9yQnlLZXkoJ3NlcnZpY2VBJywgY3JlYXRlVGhlbWUoKSk7XG4gIGNvbnN0IGNvbG9yVHdvID0gZ2V0Q29sb3JCeUtleSgnc2VydmljZUEnLCBjcmVhdGVUaGVtZSgpKTtcbiAgZXhwZWN0KGNvbG9yT25lKS50b0JlKGNvbG9yVHdvKTtcbn0pO1xuXG5pdCgnZ2l2ZXMgZGlmZmVyZW50IGNvbG9ycyBmb3IgZWFjaCBrZXknLCAoKSA9PiB7XG4gIGNsZWFyKHRoZW1lKTtcbiAgY29uc3QgY29sb3JPbmUgPSBnZXRDb2xvckJ5S2V5KCdzZXJ2aWNlQScsIGNyZWF0ZVRoZW1lKCkpO1xuICBjb25zdCBjb2xvclR3byA9IGdldENvbG9yQnlLZXkoJ3NlcnZpY2VCJywgY3JlYXRlVGhlbWUoKSk7XG4gIGV4cGVjdChjb2xvck9uZSkubm90LnRvQmUoY29sb3JUd28pO1xufSk7XG5cbml0KCdzaG91bGQgbm90IGFsbG93IHJlZCcsICgpID0+IHtcbiAgZXhwZWN0KGNvbG9yc1RvRmlsdGVyLmluZGV4T2YoJyNFMjRENDInKSkudG9CZSg0KTtcbiAgZXhwZWN0KGNvbG9yc1RvRmlsdGVyLmluZGV4T2YoJyNCRjFCMDAnKSkudG9CZSgyOCk7XG4gIGNvbnN0IGZpbHRlcmVkQ29sb3JzID0gZ2V0RmlsdGVyZWRDb2xvcnMoY29sb3JzVG9GaWx0ZXIsIGNyZWF0ZVRoZW1lKCkpO1xuICBleHBlY3QoZmlsdGVyZWRDb2xvcnMuaW5kZXhPZignI0UyNEQ0MicpKS50b0JlKC0xKTtcbiAgZXhwZWN0KGZpbHRlcmVkQ29sb3JzLmluZGV4T2YoJyNCRjFCMDAnKSkudG9CZSgtMSk7XG59KTtcblxuaXQoJ3Nob3VsZCBub3QgYWxsb3cgY29sb3JzIHdpdGggYSBjb250cmFzdCByYXRpbyA8IDMgaW4gbGlnaHQgbW9kZScsICgpID0+IHtcbiAgZXhwZWN0KGNvbG9yc1RvRmlsdGVyLmluZGV4T2YoJyM3RUIyNkQnKSkudG9CZSgwKTtcbiAgZXhwZWN0KGNvbG9yc1RvRmlsdGVyLmluZGV4T2YoJyNFQUI4MzknKSkudG9CZSgxKTtcbiAgY29uc3QgZmlsdGVyZWRDb2xvcnMgPSBnZXRGaWx0ZXJlZENvbG9ycyhjb2xvcnNUb0ZpbHRlciwgY3JlYXRlVGhlbWUoeyBjb2xvcnM6IHsgbW9kZTogJ2xpZ2h0JyB9IH0pKTtcbiAgZXhwZWN0KGZpbHRlcmVkQ29sb3JzLmluZGV4T2YoJyM3RUIyNkQnKSkudG9CZSgtMSk7XG4gIGV4cGVjdChmaWx0ZXJlZENvbG9ycy5pbmRleE9mKCcjRUFCODM5JykpLnRvQmUoLTEpO1xufSk7XG5cbml0KCdzaG91bGQgbm90IGFsbG93IGNvbG9ycyB3aXRoIGEgY29udHJhc3QgcmF0aW8gPCAzIGluIGRhcmsgbW9kZScsICgpID0+IHtcbiAgZXhwZWN0KGNvbG9yc1RvRmlsdGVyLmluZGV4T2YoJyM4OTBGMDInKSkudG9CZSgxMSk7XG4gIGV4cGVjdChjb2xvcnNUb0ZpbHRlci5pbmRleE9mKCcjMEE0MzdDJykpLnRvQmUoMTIpO1xuICBjb25zdCBmaWx0ZXJlZENvbG9ycyA9IGdldEZpbHRlcmVkQ29sb3JzKGNvbG9yc1RvRmlsdGVyLCBjcmVhdGVUaGVtZSh7IGNvbG9yczogeyBtb2RlOiAnZGFyaycgfSB9KSk7XG4gIGV4cGVjdChmaWx0ZXJlZENvbG9ycy5pbmRleE9mKCcjODkwRjAyJykpLnRvQmUoLTEpO1xuICBleHBlY3QoZmlsdGVyZWRDb2xvcnMuaW5kZXhPZignIzBBNDM3QycpKS50b0JlKC0xKTtcbn0pO1xuXG5pdCgnc2hvdWxkIG5vdCBhbGxvdyBhIGNvbG9yIHRoYXQgaXMgdGhlIHNhbWUgYXMgdGhlIHByZXZpb3VzIGNvbG9yJywgKCkgPT4ge1xuICBjbGVhcih0aGVtZSk7XG4gIGNvbnN0IGNvbG9yT25lID0gZ2V0Q29sb3JCeUtleSgncmFuZG9tNCcsIHRoZW1lKTsgLy8gIzQ0N0VCQ1xuICBjb25zdCBjb2xvclR3byA9IGdldENvbG9yQnlLZXkoJ3JhbmRvbTE3JywgdGhlbWUpOyAvLyAjNDQ3RUJDXG4gIGV4cGVjdChjb2xvck9uZSkubm90LnRvQmUoY29sb3JUd28pO1xuICBleHBlY3QoY29sb3JPbmUpLnRvQmUoJyM0NDdFQkMnKTtcbiAgZXhwZWN0KGNvbG9yVHdvKS50b0JlKCcjQjdEQkFCJyk7XG59KTtcblxuaXQoJ3Nob3VsZCBub3QgYWxsb3cgYSBjb2xvciB0aGF0IGxvb2tzIHNpbWlsYXIgdG8gdGhlIHByZXZpb3VzIGNvbG9yJywgKCkgPT4ge1xuICB0aGVtZSA9IGNyZWF0ZVRoZW1lKHsgY29sb3JzOiB7IG1vZGU6ICdsaWdodCcgfSB9KTtcbiAgY2xlYXIodGhlbWUpO1xuICBjb25zdCBjb2xvck9uZSA9IGdldENvbG9yQnlLZXkoJ3JhbmRvbTknLCB0aGVtZSk7IC8vICM1ODE0MENcbiAgY29uc3QgY29sb3JUd28gPSBnZXRDb2xvckJ5S2V5KCdyYW5kb20xOCcsIHRoZW1lKTsgLy8gIzUxMTc0OVxuICBleHBlY3QoY29sb3JPbmUpLnRvQmUoJyM1ODE0MEMnKTtcbiAgLy8gIzFGNzhDMSBpcyB0aGUgbmV4dCBjb2xvciB0aGF0IGhhcyBhIGNvbnRyYXN0IHJhdGlvID49IDMgZm9yIHRoZSBjdXJyZW50IHRoZW1lXG4gIGV4cGVjdChjb2xvclR3bykudG9CZSgnIzFGNzhDMScpO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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