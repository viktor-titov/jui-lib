// Copyright (c) 2017 Uber Technologies, Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

jest.mock('./scroll-page');
import traceGenerator from '../src/demo/trace-generators';
import ScrollManager from './ScrollManager';
import { scrollBy, scrollTo } from './scroll-page';
var SPAN_HEIGHT = 2;
function getTrace() {
  var generatedTrace = traceGenerator.trace({
    numberOfSpans: 10
  });
  generatedTrace.duration = 2000;
  generatedTrace.startTime = 1000;
  generatedTrace.spans.forEach(function (span, index) {
    span.duration = 1;
    span.startTime = 1000;
    span.spanID = (index + 1).toString();
  });
  return generatedTrace;
}
function getAccessors() {
  return {
    getViewRange: jest.fn(function () {
      return [0, 1];
    }),
    getSearchedSpanIDs: jest.fn(),
    getCollapsedChildren: jest.fn(),
    getViewHeight: jest.fn(function () {
      return SPAN_HEIGHT * 2;
    }),
    getBottomRowIndexVisible: jest.fn(),
    getTopRowIndexVisible: jest.fn(),
    getRowPosition: jest.fn(),
    mapRowIndexToSpanIndex: jest.fn(function (n) {
      return n;
    }),
    mapSpanIndexToRowIndex: jest.fn(function (n) {
      return n;
    })
  };
}
describe('ScrollManager', function () {
  var trace;
  var accessors;
  var manager;
  beforeEach(function () {
    jest.mocked(scrollBy).mockReset();
    jest.mocked(scrollTo).mockReset();
    trace = getTrace();
    accessors = getAccessors();
    manager = new ScrollManager(trace, {
      scrollBy: scrollBy,
      scrollTo: scrollTo
    });
    manager.setAccessors(accessors);
  });
  it('saves the accessors', function () {
    accessors = getAccessors();
    manager.setAccessors(accessors);
    expect(manager._accessors).toBe(accessors);
  });
  describe('_scrollPast()', function () {
    it('throws if accessors is not set', function () {
      expect(manager._scrollPast).toThrow();
    });
    it('is a noop if an invalid rowPosition is returned by the accessors', function () {
      // eslint-disable-next-line no-console
      var oldWarn = console.warn;
      // eslint-disable-next-line no-console
      console.warn = function () {};
      manager._scrollPast(-2, 1);
      expect(jest.mocked(accessors.getRowPosition).mock.calls.length).toBe(1);
      expect(jest.mocked(accessors.getViewHeight).mock.calls.length).toBe(0);
      expect(jest.mocked(scrollTo).mock.calls.length).toBe(0);
      // eslint-disable-next-line no-console
      console.warn = oldWarn;
    });
    it('scrolls up with direction is `-1`', function () {
      var y = 10;
      var expectTo = y - 0.5 * accessors.getViewHeight();
      jest.mocked(accessors.getRowPosition).mockReturnValue({
        y: y,
        height: SPAN_HEIGHT
      });
      manager._scrollPast(NaN, -1);
      expect(jest.mocked(scrollTo).mock.calls).toEqual([[expectTo]]);
    });
    it('scrolls down with direction `1`', function () {
      var y = 10;
      var vh = accessors.getViewHeight();
      var expectTo = y + SPAN_HEIGHT - 0.5 * vh;
      jest.mocked(accessors.getRowPosition).mockReturnValue({
        y: y,
        height: SPAN_HEIGHT
      });
      manager._scrollPast(NaN, 1);
      expect(jest.mocked(scrollTo).mock.calls).toEqual([[expectTo]]);
    });
  });
  describe('_scrollToVisibleSpan()', function () {
    function getRefs(spanID) {
      return [{
        refType: 'CHILD_OF',
        spanID: spanID
      }];
    }
    var scrollPastMock;
    beforeEach(function () {
      scrollPastMock = jest.fn();
      manager._scrollPast = scrollPastMock;
    });
    it('throws if accessors is not set', function () {
      expect(manager._scrollToVisibleSpan).toThrow();
    });
    it('exits if the trace is not set', function () {
      manager.setTrace(null);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock.mock.calls.length).toBe(0);
    });
    it('does nothing if already at the boundary', function () {
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(0);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(trace.spans.length - 1);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock.mock.calls.length).toBe(0);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock.mock.calls.length).toBe(0);
    });
    it('centers the current top or bottom span', function () {
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(5);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(5);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock).lastCalledWith(5, -1);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(5, 1);
    });
    it('skips spans that are out of view', function () {
      trace.spans[4].startTime = trace.startTime + trace.duration * 0.5;
      accessors.getViewRange = function () {
        return [0.4, 0.6];
      };
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(trace.spans.length - 1);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(0);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(4, 1);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock).lastCalledWith(4, -1);
    });
    it('skips spans that do not match the text search', function () {
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(trace.spans.length - 1);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(0);
      accessors.getSearchedSpanIDs = function () {
        return new Set([trace.spans[4].spanID]);
      };
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(4, 1);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock).lastCalledWith(4, -1);
    });
    it('scrolls to boundary when scrolling away from closest spanID in findMatches', function () {
      var closetFindMatchesSpanID = 4;
      jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(closetFindMatchesSpanID - 1);
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(closetFindMatchesSpanID + 1);
      accessors.getSearchedSpanIDs = function () {
        return new Set([trace.spans[closetFindMatchesSpanID].spanID]);
      };
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(trace.spans.length - 1, 1);
      manager._scrollToVisibleSpan(-1);
      expect(scrollPastMock).lastCalledWith(0, -1);
    });
    it('scrolls to last visible row when boundary is hidden', function () {
      var parentOfLastRowWithHiddenChildrenIndex = trace.spans.length - 2;
      jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(0);
      accessors.getCollapsedChildren = function () {
        return new Set([trace.spans[parentOfLastRowWithHiddenChildrenIndex].spanID]);
      };
      accessors.getSearchedSpanIDs = function () {
        return new Set([trace.spans[0].spanID]);
      };
      trace.spans[trace.spans.length - 1].references = getRefs(trace.spans[parentOfLastRowWithHiddenChildrenIndex].spanID);
      manager._scrollToVisibleSpan(1);
      expect(scrollPastMock).lastCalledWith(parentOfLastRowWithHiddenChildrenIndex, 1);
    });
    describe('scrollToNextVisibleSpan() and scrollToPrevVisibleSpan()', function () {
      beforeEach(function () {
        // change spans so 0 and 4 are top-level and their children are collapsed
        var spans = trace.spans;
        var parentID;
        for (var i = 0; i < spans.length; i++) {
          switch (i) {
            case 0:
            case 4:
              parentID = spans[i].spanID;
              break;
            default:
              spans[i].references = getRefs(parentID);
          }
        }
        // set which spans are "in-view" and which have collapsed children
        jest.mocked(accessors.getTopRowIndexVisible).mockReturnValue(trace.spans.length - 1);
        jest.mocked(accessors.getBottomRowIndexVisible).mockReturnValue(0);
        jest.mocked(accessors.getCollapsedChildren).mockReturnValue(new Set([spans[0].spanID, spans[4].spanID]));
      });
      it('skips spans that are hidden because their parent is collapsed', function () {
        manager.scrollToNextVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, 1);
        manager.scrollToPrevVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, -1);
      });
      it('ignores references with unknown types', function () {
        // modify spans[2] so that it has an unknown refType
        var spans = trace.spans;
        spans[2].references = [{
          refType: 'OTHER'
        }];
        manager.scrollToNextVisibleSpan();
        expect(scrollPastMock).lastCalledWith(2, 1);
        manager.scrollToPrevVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, -1);
      });
      it('handles more than one level of ancestry', function () {
        // modify spans[2] so that it has an unknown refType
        var spans = trace.spans;
        spans[2].references = getRefs(spans[1].spanID);
        manager.scrollToNextVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, 1);
        manager.scrollToPrevVisibleSpan();
        expect(scrollPastMock).lastCalledWith(4, -1);
      });
    });
    describe('scrollToFirstVisibleSpan', function () {
      beforeEach(function () {
        jest.spyOn(manager, '_scrollToVisibleSpan');
      });
      it('calls _scrollToVisibleSpan searching downwards from first span', function () {
        manager.scrollToFirstVisibleSpan();
        expect(manager._scrollToVisibleSpan).toHaveBeenCalledWith(1, 0);
      });
    });
  });
  describe('scrollPageDown() and scrollPageUp()', function () {
    it('scrolls by +/~ viewHeight when invoked', function () {
      manager.scrollPageDown();
      expect(scrollBy).lastCalledWith(0.95 * accessors.getViewHeight(), true);
      manager.scrollPageUp();
      expect(scrollBy).lastCalledWith(-0.95 * accessors.getViewHeight(), true);
    });
    it('is a no-op if _accessors or _scroller is not defined', function () {
      manager._accessors = null;
      manager.scrollPageDown();
      manager.scrollPageUp();
      expect(jest.mocked(scrollBy).mock.calls.length).toBe(0);
      manager._accessors = accessors;
      manager._scroller = null;
      manager.scrollPageDown();
      manager.scrollPageUp();
      expect(jest.mocked(scrollBy).mock.calls.length).toBe(0);
    });
  });
  describe('destroy()', function () {
    it('disposes', function () {
      expect(manager._trace).toBeDefined();
      expect(manager._accessors).toBeDefined();
      expect(manager._scroller).toBeDefined();
      manager.destroy();
      expect(manager._trace).not.toBeDefined();
      expect(manager._accessors).not.toBeDefined();
      expect(manager._scroller).not.toBeDefined();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInRyYWNlR2VuZXJhdG9yIiwiU2Nyb2xsTWFuYWdlciIsInNjcm9sbEJ5Iiwic2Nyb2xsVG8iLCJTUEFOX0hFSUdIVCIsImdldFRyYWNlIiwiZ2VuZXJhdGVkVHJhY2UiLCJ0cmFjZSIsIm51bWJlck9mU3BhbnMiLCJkdXJhdGlvbiIsInN0YXJ0VGltZSIsInNwYW5zIiwiZm9yRWFjaCIsInNwYW4iLCJpbmRleCIsInNwYW5JRCIsInRvU3RyaW5nIiwiZ2V0QWNjZXNzb3JzIiwiZ2V0Vmlld1JhbmdlIiwiZm4iLCJnZXRTZWFyY2hlZFNwYW5JRHMiLCJnZXRDb2xsYXBzZWRDaGlsZHJlbiIsImdldFZpZXdIZWlnaHQiLCJnZXRCb3R0b21Sb3dJbmRleFZpc2libGUiLCJnZXRUb3BSb3dJbmRleFZpc2libGUiLCJnZXRSb3dQb3NpdGlvbiIsIm1hcFJvd0luZGV4VG9TcGFuSW5kZXgiLCJuIiwibWFwU3BhbkluZGV4VG9Sb3dJbmRleCIsImRlc2NyaWJlIiwiYWNjZXNzb3JzIiwibWFuYWdlciIsImJlZm9yZUVhY2giLCJtb2NrZWQiLCJtb2NrUmVzZXQiLCJzZXRBY2Nlc3NvcnMiLCJpdCIsImV4cGVjdCIsIl9hY2Nlc3NvcnMiLCJ0b0JlIiwiX3Njcm9sbFBhc3QiLCJ0b1Rocm93Iiwib2xkV2FybiIsImNvbnNvbGUiLCJ3YXJuIiwiY2FsbHMiLCJsZW5ndGgiLCJ5IiwiZXhwZWN0VG8iLCJtb2NrUmV0dXJuVmFsdWUiLCJoZWlnaHQiLCJOYU4iLCJ0b0VxdWFsIiwidmgiLCJnZXRSZWZzIiwicmVmVHlwZSIsInNjcm9sbFBhc3RNb2NrIiwiX3Njcm9sbFRvVmlzaWJsZVNwYW4iLCJzZXRUcmFjZSIsImxhc3RDYWxsZWRXaXRoIiwiU2V0IiwiY2xvc2V0RmluZE1hdGNoZXNTcGFuSUQiLCJwYXJlbnRPZkxhc3RSb3dXaXRoSGlkZGVuQ2hpbGRyZW5JbmRleCIsInJlZmVyZW5jZXMiLCJwYXJlbnRJRCIsImkiLCJzY3JvbGxUb05leHRWaXNpYmxlU3BhbiIsInNjcm9sbFRvUHJldlZpc2libGVTcGFuIiwic3B5T24iLCJzY3JvbGxUb0ZpcnN0VmlzaWJsZVNwYW4iLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInNjcm9sbFBhZ2VEb3duIiwic2Nyb2xsUGFnZVVwIiwiX3Njcm9sbGVyIiwiX3RyYWNlIiwidG9CZURlZmluZWQiLCJkZXN0cm95Iiwibm90Il0sInNvdXJjZXMiOlsiLi4vc3JjL1Njcm9sbE1hbmFnZXIudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTcgVWJlciBUZWNobm9sb2dpZXMsIEluYy5cbi8vXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuLy8gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4vL1xuLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuamVzdC5tb2NrKCcuL3Njcm9sbC1wYWdlJyk7XG5cbmltcG9ydCB0cmFjZUdlbmVyYXRvciBmcm9tICcuLi9zcmMvZGVtby90cmFjZS1nZW5lcmF0b3JzJztcblxuaW1wb3J0IFNjcm9sbE1hbmFnZXIsIHsgQWNjZXNzb3JzIH0gZnJvbSAnLi9TY3JvbGxNYW5hZ2VyJztcbmltcG9ydCB7IHNjcm9sbEJ5LCBzY3JvbGxUbyB9IGZyb20gJy4vc2Nyb2xsLXBhZ2UnO1xuaW1wb3J0IHsgVHJhY2UsIFRyYWNlU3BhbkRhdGEsIFRyYWNlU3BhblJlZmVyZW5jZSB9IGZyb20gJy4vdHlwZXMvdHJhY2UnO1xuXG5jb25zdCBTUEFOX0hFSUdIVCA9IDI7XG5cbmZ1bmN0aW9uIGdldFRyYWNlKCk6IFRyYWNlIHtcbiAgY29uc3QgZ2VuZXJhdGVkVHJhY2UgPSB0cmFjZUdlbmVyYXRvci50cmFjZSh7IG51bWJlck9mU3BhbnM6IDEwIH0pO1xuICBnZW5lcmF0ZWRUcmFjZS5kdXJhdGlvbiA9IDIwMDA7XG4gIGdlbmVyYXRlZFRyYWNlLnN0YXJ0VGltZSA9IDEwMDA7XG5cbiAgZ2VuZXJhdGVkVHJhY2Uuc3BhbnMuZm9yRWFjaCgoc3BhbjogVHJhY2VTcGFuRGF0YSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIHNwYW4uZHVyYXRpb24gPSAxO1xuICAgIHNwYW4uc3RhcnRUaW1lID0gMTAwMDtcbiAgICBzcGFuLnNwYW5JRCA9IChpbmRleCArIDEpLnRvU3RyaW5nKCk7XG4gIH0pO1xuICByZXR1cm4gZ2VuZXJhdGVkVHJhY2U7XG59XG5cbmZ1bmN0aW9uIGdldEFjY2Vzc29ycygpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXRWaWV3UmFuZ2U6IGplc3QuZm4oKCkgPT4gWzAsIDFdIGFzIFtudW1iZXIsIG51bWJlcl0pLFxuICAgIGdldFNlYXJjaGVkU3BhbklEczogamVzdC5mbigpLFxuICAgIGdldENvbGxhcHNlZENoaWxkcmVuOiBqZXN0LmZuKCksXG4gICAgZ2V0Vmlld0hlaWdodDogamVzdC5mbigoKSA9PiBTUEFOX0hFSUdIVCAqIDIpLFxuICAgIGdldEJvdHRvbVJvd0luZGV4VmlzaWJsZTogamVzdC5mbigpLFxuICAgIGdldFRvcFJvd0luZGV4VmlzaWJsZTogamVzdC5mbigpLFxuICAgIGdldFJvd1Bvc2l0aW9uOiBqZXN0LmZuKCksXG4gICAgbWFwUm93SW5kZXhUb1NwYW5JbmRleDogamVzdC5mbigobikgPT4gbiksXG4gICAgbWFwU3BhbkluZGV4VG9Sb3dJbmRleDogamVzdC5mbigobikgPT4gbiksXG4gIH07XG59XG5cbmRlc2NyaWJlKCdTY3JvbGxNYW5hZ2VyJywgKCkgPT4ge1xuICBsZXQgdHJhY2U6IFRyYWNlO1xuICBsZXQgYWNjZXNzb3JzOiBBY2Nlc3NvcnM7XG4gIGxldCBtYW5hZ2VyOiBTY3JvbGxNYW5hZ2VyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QubW9ja2VkKHNjcm9sbEJ5KS5tb2NrUmVzZXQoKTtcbiAgICBqZXN0Lm1vY2tlZChzY3JvbGxUbykubW9ja1Jlc2V0KCk7XG4gICAgdHJhY2UgPSBnZXRUcmFjZSgpO1xuICAgIGFjY2Vzc29ycyA9IGdldEFjY2Vzc29ycygpO1xuICAgIG1hbmFnZXIgPSBuZXcgU2Nyb2xsTWFuYWdlcih0cmFjZSwgeyBzY3JvbGxCeSwgc2Nyb2xsVG8gfSk7XG4gICAgbWFuYWdlci5zZXRBY2Nlc3NvcnMoYWNjZXNzb3JzKTtcbiAgfSk7XG5cbiAgaXQoJ3NhdmVzIHRoZSBhY2Nlc3NvcnMnLCAoKSA9PiB7XG4gICAgYWNjZXNzb3JzID0gZ2V0QWNjZXNzb3JzKCk7XG4gICAgbWFuYWdlci5zZXRBY2Nlc3NvcnMoYWNjZXNzb3JzKTtcbiAgICBleHBlY3QobWFuYWdlci5fYWNjZXNzb3JzKS50b0JlKGFjY2Vzc29ycyk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdfc2Nyb2xsUGFzdCgpJywgKCkgPT4ge1xuICAgIGl0KCd0aHJvd3MgaWYgYWNjZXNzb3JzIGlzIG5vdCBzZXQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QobWFuYWdlci5fc2Nyb2xsUGFzdCkudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2lzIGEgbm9vcCBpZiBhbiBpbnZhbGlkIHJvd1Bvc2l0aW9uIGlzIHJldHVybmVkIGJ5IHRoZSBhY2Nlc3NvcnMnLCAoKSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc3Qgb2xkV2FybiA9IGNvbnNvbGUud2FybjtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4gPSAoKSA9PiB7fTtcbiAgICAgIG1hbmFnZXIuX3Njcm9sbFBhc3QoLTIsIDEpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRSb3dQb3NpdGlvbikubW9jay5jYWxscy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3QoamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldFZpZXdIZWlnaHQpLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDApO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKHNjcm9sbFRvKS5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgwKTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4gPSBvbGRXYXJuO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Njcm9sbHMgdXAgd2l0aCBkaXJlY3Rpb24gaXMgYC0xYCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHkgPSAxMDtcbiAgICAgIGNvbnN0IGV4cGVjdFRvID0geSAtIDAuNSAqIGFjY2Vzc29ycy5nZXRWaWV3SGVpZ2h0KCk7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Um93UG9zaXRpb24pLm1vY2tSZXR1cm5WYWx1ZSh7IHksIGhlaWdodDogU1BBTl9IRUlHSFQgfSk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxQYXN0KE5hTiwgLTEpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKHNjcm9sbFRvKS5tb2NrLmNhbGxzKS50b0VxdWFsKFtbZXhwZWN0VG9dXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2Nyb2xscyBkb3duIHdpdGggZGlyZWN0aW9uIGAxYCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHkgPSAxMDtcbiAgICAgIGNvbnN0IHZoID0gYWNjZXNzb3JzLmdldFZpZXdIZWlnaHQoKTtcbiAgICAgIGNvbnN0IGV4cGVjdFRvID0geSArIFNQQU5fSEVJR0hUIC0gMC41ICogdmg7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Um93UG9zaXRpb24pLm1vY2tSZXR1cm5WYWx1ZSh7IHksIGhlaWdodDogU1BBTl9IRUlHSFQgfSk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxQYXN0KE5hTiwgMSk7XG4gICAgICBleHBlY3QoamVzdC5tb2NrZWQoc2Nyb2xsVG8pLm1vY2suY2FsbHMpLnRvRXF1YWwoW1tleHBlY3RUb11dKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ19zY3JvbGxUb1Zpc2libGVTcGFuKCknLCAoKSA9PiB7XG4gICAgZnVuY3Rpb24gZ2V0UmVmcyhzcGFuSUQ6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFt7IHJlZlR5cGU6ICdDSElMRF9PRicsIHNwYW5JRCB9XSBhcyBUcmFjZVNwYW5SZWZlcmVuY2VbXTtcbiAgICB9XG4gICAgbGV0IHNjcm9sbFBhc3RNb2NrOiBqZXN0Lk1vY2s7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHNjcm9sbFBhc3RNb2NrID0gamVzdC5mbigpO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsUGFzdCA9IHNjcm9sbFBhc3RNb2NrO1xuICAgIH0pO1xuICAgIGl0KCd0aHJvd3MgaWYgYWNjZXNzb3JzIGlzIG5vdCBzZXQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QobWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbikudG9UaHJvdygpO1xuICAgIH0pO1xuICAgIGl0KCdleGl0cyBpZiB0aGUgdHJhY2UgaXMgbm90IHNldCcsICgpID0+IHtcbiAgICAgIG1hbmFnZXIuc2V0VHJhY2UobnVsbCk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKDEpO1xuICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RvZXMgbm90aGluZyBpZiBhbHJlYWR5IGF0IHRoZSBib3VuZGFyeScsICgpID0+IHtcbiAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRUb3BSb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSgwKTtcbiAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRCb3R0b21Sb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSh0cmFjZS5zcGFucy5sZW5ndGggLSAxKTtcbiAgICAgIG1hbmFnZXIuX3Njcm9sbFRvVmlzaWJsZVNwYW4oLTEpO1xuICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDApO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbigxKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jay5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdjZW50ZXJzIHRoZSBjdXJyZW50IHRvcCBvciBib3R0b20gc3BhbicsICgpID0+IHtcbiAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRUb3BSb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSg1KTtcbiAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRCb3R0b21Sb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSg1KTtcbiAgICAgIG1hbmFnZXIuX3Njcm9sbFRvVmlzaWJsZVNwYW4oLTEpO1xuICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCg1LCAtMSk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKDEpO1xuICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCg1LCAxKTtcbiAgICB9KTtcblxuICAgIGl0KCdza2lwcyBzcGFucyB0aGF0IGFyZSBvdXQgb2YgdmlldycsICgpID0+IHtcbiAgICAgIHRyYWNlLnNwYW5zWzRdLnN0YXJ0VGltZSA9IHRyYWNlLnN0YXJ0VGltZSArIHRyYWNlLmR1cmF0aW9uICogMC41O1xuICAgICAgYWNjZXNzb3JzLmdldFZpZXdSYW5nZSA9ICgpID0+IFswLjQsIDAuNl07XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0VG9wUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUodHJhY2Uuc3BhbnMubGVuZ3RoIC0gMSk7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Qm90dG9tUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUoMCk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKDEpO1xuICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCg0LCAxKTtcbiAgICAgIG1hbmFnZXIuX3Njcm9sbFRvVmlzaWJsZVNwYW4oLTEpO1xuICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCg0LCAtMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2tpcHMgc3BhbnMgdGhhdCBkbyBub3QgbWF0Y2ggdGhlIHRleHQgc2VhcmNoJywgKCkgPT4ge1xuICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldFRvcFJvd0luZGV4VmlzaWJsZSkubW9ja1JldHVyblZhbHVlKHRyYWNlLnNwYW5zLmxlbmd0aCAtIDEpO1xuICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldEJvdHRvbVJvd0luZGV4VmlzaWJsZSkubW9ja1JldHVyblZhbHVlKDApO1xuICAgICAgYWNjZXNzb3JzLmdldFNlYXJjaGVkU3BhbklEcyA9ICgpID0+IG5ldyBTZXQoW3RyYWNlLnNwYW5zWzRdLnNwYW5JRF0pO1xuICAgICAgbWFuYWdlci5fc2Nyb2xsVG9WaXNpYmxlU3BhbigxKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoNCwgMSk7XG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKC0xKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoNCwgLTEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Njcm9sbHMgdG8gYm91bmRhcnkgd2hlbiBzY3JvbGxpbmcgYXdheSBmcm9tIGNsb3Nlc3Qgc3BhbklEIGluIGZpbmRNYXRjaGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2xvc2V0RmluZE1hdGNoZXNTcGFuSUQgPSA0O1xuICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldFRvcFJvd0luZGV4VmlzaWJsZSkubW9ja1JldHVyblZhbHVlKGNsb3NldEZpbmRNYXRjaGVzU3BhbklEIC0gMSk7XG4gICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Qm90dG9tUm93SW5kZXhWaXNpYmxlKS5tb2NrUmV0dXJuVmFsdWUoY2xvc2V0RmluZE1hdGNoZXNTcGFuSUQgKyAxKTtcbiAgICAgIGFjY2Vzc29ycy5nZXRTZWFyY2hlZFNwYW5JRHMgPSAoKSA9PiBuZXcgU2V0KFt0cmFjZS5zcGFuc1tjbG9zZXRGaW5kTWF0Y2hlc1NwYW5JRF0uc3BhbklEXSk7XG5cbiAgICAgIG1hbmFnZXIuX3Njcm9sbFRvVmlzaWJsZVNwYW4oMSk7XG4gICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2spLmxhc3RDYWxsZWRXaXRoKHRyYWNlLnNwYW5zLmxlbmd0aCAtIDEsIDEpO1xuXG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKC0xKTtcbiAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoMCwgLTEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Njcm9sbHMgdG8gbGFzdCB2aXNpYmxlIHJvdyB3aGVuIGJvdW5kYXJ5IGlzIGhpZGRlbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHBhcmVudE9mTGFzdFJvd1dpdGhIaWRkZW5DaGlsZHJlbkluZGV4ID0gdHJhY2Uuc3BhbnMubGVuZ3RoIC0gMjtcbiAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRCb3R0b21Sb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSgwKTtcbiAgICAgIGFjY2Vzc29ycy5nZXRDb2xsYXBzZWRDaGlsZHJlbiA9ICgpID0+IG5ldyBTZXQoW3RyYWNlLnNwYW5zW3BhcmVudE9mTGFzdFJvd1dpdGhIaWRkZW5DaGlsZHJlbkluZGV4XS5zcGFuSURdKTtcbiAgICAgIGFjY2Vzc29ycy5nZXRTZWFyY2hlZFNwYW5JRHMgPSAoKSA9PiBuZXcgU2V0KFt0cmFjZS5zcGFuc1swXS5zcGFuSURdKTtcbiAgICAgIHRyYWNlLnNwYW5zW3RyYWNlLnNwYW5zLmxlbmd0aCAtIDFdLnJlZmVyZW5jZXMgPSBnZXRSZWZzKFxuICAgICAgICB0cmFjZS5zcGFuc1twYXJlbnRPZkxhc3RSb3dXaXRoSGlkZGVuQ2hpbGRyZW5JbmRleF0uc3BhbklEXG4gICAgICApO1xuXG4gICAgICBtYW5hZ2VyLl9zY3JvbGxUb1Zpc2libGVTcGFuKDEpO1xuICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aChwYXJlbnRPZkxhc3RSb3dXaXRoSGlkZGVuQ2hpbGRyZW5JbmRleCwgMSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnc2Nyb2xsVG9OZXh0VmlzaWJsZVNwYW4oKSBhbmQgc2Nyb2xsVG9QcmV2VmlzaWJsZVNwYW4oKScsICgpID0+IHtcbiAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAvLyBjaGFuZ2Ugc3BhbnMgc28gMCBhbmQgNCBhcmUgdG9wLWxldmVsIGFuZCB0aGVpciBjaGlsZHJlbiBhcmUgY29sbGFwc2VkXG4gICAgICAgIGNvbnN0IHNwYW5zID0gdHJhY2Uuc3BhbnM7XG4gICAgICAgIGxldCBwYXJlbnRJRDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICBwYXJlbnRJRCA9IHNwYW5zW2ldLnNwYW5JRDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBzcGFuc1tpXS5yZWZlcmVuY2VzID0gZ2V0UmVmcyhwYXJlbnRJRCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHNldCB3aGljaCBzcGFucyBhcmUgXCJpbi12aWV3XCIgYW5kIHdoaWNoIGhhdmUgY29sbGFwc2VkIGNoaWxkcmVuXG4gICAgICAgIGplc3QubW9ja2VkKGFjY2Vzc29ycy5nZXRUb3BSb3dJbmRleFZpc2libGUpLm1vY2tSZXR1cm5WYWx1ZSh0cmFjZS5zcGFucy5sZW5ndGggLSAxKTtcbiAgICAgICAgamVzdC5tb2NrZWQoYWNjZXNzb3JzLmdldEJvdHRvbVJvd0luZGV4VmlzaWJsZSkubW9ja1JldHVyblZhbHVlKDApO1xuICAgICAgICBqZXN0Lm1vY2tlZChhY2Nlc3NvcnMuZ2V0Q29sbGFwc2VkQ2hpbGRyZW4pLm1vY2tSZXR1cm5WYWx1ZShuZXcgU2V0KFtzcGFuc1swXS5zcGFuSUQsIHNwYW5zWzRdLnNwYW5JRF0pKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2tpcHMgc3BhbnMgdGhhdCBhcmUgaGlkZGVuIGJlY2F1c2UgdGhlaXIgcGFyZW50IGlzIGNvbGxhcHNlZCcsICgpID0+IHtcbiAgICAgICAgbWFuYWdlci5zY3JvbGxUb05leHRWaXNpYmxlU3BhbigpO1xuICAgICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2spLmxhc3RDYWxsZWRXaXRoKDQsIDEpO1xuICAgICAgICBtYW5hZ2VyLnNjcm9sbFRvUHJldlZpc2libGVTcGFuKCk7XG4gICAgICAgIGV4cGVjdChzY3JvbGxQYXN0TW9jaykubGFzdENhbGxlZFdpdGgoNCwgLTEpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdpZ25vcmVzIHJlZmVyZW5jZXMgd2l0aCB1bmtub3duIHR5cGVzJywgKCkgPT4ge1xuICAgICAgICAvLyBtb2RpZnkgc3BhbnNbMl0gc28gdGhhdCBpdCBoYXMgYW4gdW5rbm93biByZWZUeXBlXG4gICAgICAgIGNvbnN0IHNwYW5zID0gdHJhY2Uuc3BhbnM7XG4gICAgICAgIHNwYW5zWzJdLnJlZmVyZW5jZXMgPSBbeyByZWZUeXBlOiAnT1RIRVInIH1dIGFzIHVua25vd24gYXMgVHJhY2VTcGFuUmVmZXJlbmNlW107XG4gICAgICAgIG1hbmFnZXIuc2Nyb2xsVG9OZXh0VmlzaWJsZVNwYW4oKTtcbiAgICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCgyLCAxKTtcbiAgICAgICAgbWFuYWdlci5zY3JvbGxUb1ByZXZWaXNpYmxlU3BhbigpO1xuICAgICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2spLmxhc3RDYWxsZWRXaXRoKDQsIC0xKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnaGFuZGxlcyBtb3JlIHRoYW4gb25lIGxldmVsIG9mIGFuY2VzdHJ5JywgKCkgPT4ge1xuICAgICAgICAvLyBtb2RpZnkgc3BhbnNbMl0gc28gdGhhdCBpdCBoYXMgYW4gdW5rbm93biByZWZUeXBlXG4gICAgICAgIGNvbnN0IHNwYW5zID0gdHJhY2Uuc3BhbnM7XG4gICAgICAgIHNwYW5zWzJdLnJlZmVyZW5jZXMgPSBnZXRSZWZzKHNwYW5zWzFdLnNwYW5JRCk7XG4gICAgICAgIG1hbmFnZXIuc2Nyb2xsVG9OZXh0VmlzaWJsZVNwYW4oKTtcbiAgICAgICAgZXhwZWN0KHNjcm9sbFBhc3RNb2NrKS5sYXN0Q2FsbGVkV2l0aCg0LCAxKTtcbiAgICAgICAgbWFuYWdlci5zY3JvbGxUb1ByZXZWaXNpYmxlU3BhbigpO1xuICAgICAgICBleHBlY3Qoc2Nyb2xsUGFzdE1vY2spLmxhc3RDYWxsZWRXaXRoKDQsIC0xKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3Njcm9sbFRvRmlyc3RWaXNpYmxlU3BhbicsICgpID0+IHtcbiAgICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBqZXN0LnNweU9uKG1hbmFnZXIsICdfc2Nyb2xsVG9WaXNpYmxlU3BhbicpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdjYWxscyBfc2Nyb2xsVG9WaXNpYmxlU3BhbiBzZWFyY2hpbmcgZG93bndhcmRzIGZyb20gZmlyc3Qgc3BhbicsICgpID0+IHtcbiAgICAgICAgbWFuYWdlci5zY3JvbGxUb0ZpcnN0VmlzaWJsZVNwYW4oKTtcbiAgICAgICAgZXhwZWN0KG1hbmFnZXIuX3Njcm9sbFRvVmlzaWJsZVNwYW4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDEsIDApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzY3JvbGxQYWdlRG93bigpIGFuZCBzY3JvbGxQYWdlVXAoKScsICgpID0+IHtcbiAgICBpdCgnc2Nyb2xscyBieSArL34gdmlld0hlaWdodCB3aGVuIGludm9rZWQnLCAoKSA9PiB7XG4gICAgICBtYW5hZ2VyLnNjcm9sbFBhZ2VEb3duKCk7XG4gICAgICBleHBlY3Qoc2Nyb2xsQnkpLmxhc3RDYWxsZWRXaXRoKDAuOTUgKiBhY2Nlc3NvcnMuZ2V0Vmlld0hlaWdodCgpLCB0cnVlKTtcbiAgICAgIG1hbmFnZXIuc2Nyb2xsUGFnZVVwKCk7XG4gICAgICBleHBlY3Qoc2Nyb2xsQnkpLmxhc3RDYWxsZWRXaXRoKC0wLjk1ICogYWNjZXNzb3JzLmdldFZpZXdIZWlnaHQoKSwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnaXMgYSBuby1vcCBpZiBfYWNjZXNzb3JzIG9yIF9zY3JvbGxlciBpcyBub3QgZGVmaW5lZCcsICgpID0+IHtcbiAgICAgIG1hbmFnZXIuX2FjY2Vzc29ycyA9IG51bGw7XG4gICAgICBtYW5hZ2VyLnNjcm9sbFBhZ2VEb3duKCk7XG4gICAgICBtYW5hZ2VyLnNjcm9sbFBhZ2VVcCgpO1xuICAgICAgZXhwZWN0KGplc3QubW9ja2VkKHNjcm9sbEJ5KS5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgwKTtcbiAgICAgIG1hbmFnZXIuX2FjY2Vzc29ycyA9IGFjY2Vzc29ycztcbiAgICAgIG1hbmFnZXIuX3Njcm9sbGVyID0gbnVsbDtcbiAgICAgIG1hbmFnZXIuc2Nyb2xsUGFnZURvd24oKTtcbiAgICAgIG1hbmFnZXIuc2Nyb2xsUGFnZVVwKCk7XG4gICAgICBleHBlY3QoamVzdC5tb2NrZWQoc2Nyb2xsQnkpLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGVzdHJveSgpJywgKCkgPT4ge1xuICAgIGl0KCdkaXNwb3NlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChtYW5hZ2VyLl90cmFjZSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChtYW5hZ2VyLl9hY2Nlc3NvcnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWFuYWdlci5fc2Nyb2xsZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBtYW5hZ2VyLmRlc3Ryb3koKTtcbiAgICAgIGV4cGVjdChtYW5hZ2VyLl90cmFjZSkubm90LnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWFuYWdlci5fYWNjZXNzb3JzKS5ub3QudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChtYW5hZ2VyLl9zY3JvbGxlcikubm90LnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBQSxJQUFJLENBQUNDLElBQUksQ0FBQyxlQUFlLENBQUM7QUFFMUIsT0FB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